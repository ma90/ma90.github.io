(function(){ 
"use strict";
window.Safe=angular.module("Safe",["ionic","LocalStorageModule","ngCordova","angular-md5","angular-repeat-n","ab.test","pascalprecht.translate","pouchdb","$q-spread","formly","pdf"]),Safe.config(["$provide",function(e){return e.decorator("$exceptionHandler",["$delegate","$window",function(e,n){return function(t,r){return window.cordova&&n._trackJs&&n.trackJs.track(t),e(t,r)}}])}]),Safe.run(["$rootScope","SettingsService",function(e,n){return n.initSettings()}]),Safe.value("telRegex",/^(01|((00)?(4901|491)))[\d]{6,14}$/),Safe.config(["$provide","$httpProvider",function(e,n){return e.factory("httpTimeoutInterceptor",["$q","$injector","ErrNotifier","Database","$window",function(e,n,t,r,i){var o,s,a,u;return o=[/users\/status\.json/,/guessed_addresses\.json/,/html/],a=!1,s=function(e){return 0===e.status},u=function(e){return _.every(o,function(n){return!n.test(e)})},{responseError:function(o){var c,l;return 401===o.status&&(null!=o&&null!=(c=o.config)&&null!=(l=c.url)?l.indexOf("getsafe"):void 0)!==-1&&(localStorage.removeItem("ls.account"),window.TEST||(i.location="")),r.hasStoredData("user_index").then(function(e){if(!e&&s(o)&&u(o.config.url))return n.invoke(["$ionicPopup",function(e){if(!a)return a=!0,t.send({},"Timeout"),e.alert({title:"Schlechte Internetverbindung",template:"Leider konnte die gewünschte Aktion auf Grund einer zu schlechten Internetverbindung nicht durchgeführt werden. Bitte versuche es mit besserer Verbindung erneut.",okType:"button-calm"}).then(function(e){return a=!1})}])}),e.reject(o)}}}]),n.interceptors.push("httpTimeoutInterceptor")}]),Safe.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}),Safe.run(["$ionicPlatform","$rootScope","$ionicScrollDelegate","$templateCache","NotificationsManager","$cordovaSplashscreen","$timeout","ULinkRedirector","AndroidBackButtonHandler","AdjustService","InputScrollFix","CodeUpdater","FormlyTemplateConfigurator",function(e,n,t,r,i,o,s,a,u,c,l,d,f){return e.ready(function(){var e,n,t;return f.run(),a(),u(),i.setupHandler(),ionic.Platform.isAndroid()&&(ionic.Platform.isFullScreen=!1),window.cordova?(window.screen.lockOrientation("portrait-primary"),cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0),StatusBar.show(),StatusBar.styleLightContent(),t=ionic.Platform.isAndroid()?2e3:500,s(function(){return o.hide()},t),n=window.Settings.adjustProduction?AdjustConfig.EnvironmentProduction:AdjustConfig.EnvironmentSandbox,e=new AdjustConfig(window.Settings.adjustToken,n),Adjust.create(e),l.apply()):"undefined"!=typeof mixpanel&&null!==mixpanel?mixpanel.init(window.Settings.mixpanelToken):void 0}),document.addEventListener("resume",function(){return c.appResume(),i.setupHandler()},!1),n.$on("$stateChangeStart",function(e,n,t){if("undefined"!=typeof t)return r.remove(t.templateUrl)})}]),Safe.config(["$compileProvider","$ionicConfigProvider",function(e,n){var t;return e.debugInfoEnabled(!1),n.views.swipeBackEnabled(!1),n.backButton.text("").previousTitleText(!1),n.scrolling.jsScrolling(!1),t=ionic.Platform.isAndroid()?"none":"platform",t=ionic.cordova?t:"none",n.views.transition(t)}]);var handleOpenURL,remainingAttempts,triggerOpenURL,waitForAndCallHandlerFunction;remainingAttempts=10,handleOpenURL=function(e){return setTimeout(function(){return Adjust.appWillOpenUrl(e)},300)},waitForAndCallHandlerFunction=function(e){return"function"==typeof window.handleOpenURL?window.handleOpenURL(e):remainingAttempts-- >0?(setTimeout(function(){return waitForAndCallHandlerFunction(e)}),500):void 0},triggerOpenURL=function(){return cordova.exec(waitForAndCallHandlerFunction,console.log.bind(console),"LaunchMyApp","checkIntent",[])},ionic.Platform.isAndroid()&&document.addEventListener("deviceready",triggerOpenURL,!1),Safe.config(["$provide",function(e){return e.decorator("$q",["$delegate",function(e){var n;return n=e.defer,e.defer=function(){var e;return e=n(),e.promise.success=function(n){return e.promise.then(n),e.promise},e.promise.error=function(n){return e.promise.then(null,n),e.promise},e},e}])}]),Safe.run(["$rootScope","$timeout","Account","Navigator","$ionicPlatform","Redirector","ConnectionChecker",function(e,n,t,r,i,o,s){var a,u,c;return u=!1,a=function(){if(s.isOnline())return o.redirectUser(),u=!1},c=function(e,n,i,o){var s,c,l,d;return d=n.name,s="user"===o.name.split(".")[0],c="user"===d.split(".")[0],l={noBack:!0,animation:"none"},!c||s||u?t.hasToken()&&!c?void a():c&&!t.hasToken()?r.go("start.intro",l):void 0:void a()},e.$on("$stateChangeSuccess",c),document.addEventListener("resume",function(){return u||a(),u=!1},!1),i.ready(function(){return a()}),window.handleOpenURL=function(e){if((null!=e?e.indexOf("getsafe://"):void 0)!==-1)return n(function(){var n;return n=e.replace("getsafe://",""),0!==n.indexOf("#")&&(n="#/"+n),u=!0,window.location.hash=n})}}]),Safe.config(["$stateProvider","$urlRouterProvider",function(e,n){return e.state("start",{url:"/start","abstract":!0,templateUrl:"views/userPanel/menu7.html"}).state("start.intro",{url:"/intro",views:{menuContent:{templateUrl:"views/common/intro.html",controller:"IntroCtrl"}}}).state("start.intro-faq",{url:"/intro/faq",views:{menuContent:{templateUrl:"views/intro/faq.html",controller:"FaqCtrl"}}}).state("start.intro-informations",{url:"/intro/informations",views:{menuContent:{templateUrl:"views/intro/informations.html",controller:"IntroInformationsCtrl"}}}).state("start.intro-contact",{url:"/intro/contact",views:{menuContent:{templateUrl:"views/intro/contact.html",controller:"SupportCtrl"}}}).state("start.login-requestCode",{url:"/login/requestCode",views:{menuContent:{templateUrl:"views/login/requestCode4.html",controller:"LoginRequestCodeCtrl"}},defaultBack:{state:"start.intro",getStateParams:function(){return{step:4}}}}).state("start.login-checkCode",{url:"/login/checkCode",views:{menuContent:{templateUrl:"views/shared/checkCode3.html",controller:"LoginCheckCodeCtrl"}},defaultBack:{state:"start.login-requestCode"}}).state("start.register-requestCode",{cache:!1,url:"/register/requestCode",views:{menuContent:{templateUrl:"views/register/requestCode1.html",controller:"RegisterRequestCodeCtrl"}},defaultBack:{state:"start.intro",getStateParams:function(){return{step:4}}}}).state("start.register-checkCode",{url:"/register/checkCode",views:{menuContent:{templateUrl:"views/shared/checkCode3.html",controller:"RegisterCheckCodeCtrl"}},defaultBack:{state:"start.register-requestCode"}}).state("start.register-guide",{url:"/register/guide",views:{menuContent:{templateUrl:"views/register/step-guide2.html",controller:"RegisterGuideCtrl"}}}).state("start.register-stepInsurers",{url:"/register/step-insurers",views:{menuContent:{templateUrl:"views/register/step-insurers1.html",controller:"RegisterStepInsurersCtrl"}},defaultBack:{state:"start.register-guide"}}).state("start.register-stepPersonalData",{url:"/register/step-personalData",views:{menuContent:{templateUrl:"views/register/step-personalData5.html",controller:"RegisterStepPersonalDataCtrl"}},defaultBack:{state:"start.register-guide"}}).state("start.register-stepSignatureExplain",{url:"/register/step-signatureExplain",views:{menuContent:{templateUrl:"views/register/step-signatureExplain5.html",controller:"RegisterStepSignatureExplainCtrl"}},defaultBack:{state:"start.register-guide"}}).state("start.register-stepPoa",{url:"/register/step-poa",views:{menuContent:{templateUrl:"views/register/step-poa3.html",controller:"RegisterStepPoaCtrl"}},defaultBack:{state:"start.register-stepSignatureExplain"}}).state("start.register-stepSignature",{url:"/register/step-signature/:one_time_token",views:{menuContent:{templateUrl:"views/register/step-signature3.html",controller:"RegisterStepSignatureCtrl"}},defaultBack:{state:"start.register-stepPoa"}}).state("start.register-stepPoaConfirmation",{url:"/register/step-poaConfirmation",views:{menuContent:{templateUrl:"views/register/step-poaConfirmation2.html",controller:"RegisterStepPoaConfirmationCtrl"}},defaultBack:{state:"start.register-stepPoa"}}).state("start.register-stepPushNotification",{url:"/register/step-pushNotification",views:{menuContent:{templateUrl:"views/register/step-pushNotification.html",controller:"RegisterStepPushNotificationCtrl"}}}).state("start.relatives-welcome",{cache:!1,url:"/relatives-welcome",views:{menuContent:{templateUrl:"views/contracts/relatives-welcome.html",controller:"ContractsRelativesWelcomeCtrl"}},params:{next_target:"user.products"}}).state("user",{url:"/user","abstract":!0,templateUrl:"views/userPanel/menu7.html"}).state("user.products",{url:"/products",views:{menuContent:{templateUrl:"views/products/index5.html",controller:"ProductsCtrl"}}}).state("user.insurances-show",{url:"/selected_products/:id",views:{menuContent:{templateUrl:"views/insurances/show10.html",controller:"InsurancesShowCtrl"}},defaultBack:{state:"user.products"}}).state("user.insurances-multicheck",{cache:!1,url:"/selected_products/:id/multicheck",views:{menuContent:{templateUrl:"views/products/tariff.html",controller:"CheckTariffCtrl"}}}).state("user.about",{url:"/about",views:{menuContent:{templateUrl:"views/userPanel/about.html",controller:"AboutCtrl"}}}).state("user.terms",{url:"/terms",views:{menuContent:{templateUrl:"views/userPanel/terms.html",controller:"TermsCtrl"}}}).state("user.privacy",{url:"/privacy",views:{menuContent:{templateUrl:"views/userPanel/privacy.html",controller:"PrivacyCtrl"}}}).state("user.contractNum",{url:"/contractNum/:insurer_id",views:{menuContent:{templateUrl:"views/userPanel/contractNum.html",controller:"ContractNumCtrl"}}}).state("user.explainer-spec",{url:"/explainer/:spec",views:{menuContent:{templateUrl:"views/content/explainer.html",controller:"ExplainerCtrl"}},defaultBack:{state:"user.products"}}).state("user.refer-a-friend",{url:"/referAFriend",views:{menuContent:{templateUrl:"views/userPanel/refer-a-friend.html",controller:"ReferAFriendCtrl"}},defaultBack:{state:"user.products"}}).state("user.consultation-docs",{url:"/consultations/:conversation_id/docs",views:{menuContent:{templateUrl:"views/consultations/docs.html",controller:"ConsultationsDocsCtrl"}},defaultBack:{state:"user.consultations"}}).state("user.consultation-chat",{url:"/consultations/:conversation_id/chat",views:{menuContent:{templateUrl:"views/consultations/chat10.html",controller:"ConsultationsChatCtrl"}},defaultBack:{state:"user.consultations"}}).state("user.consultations",{url:"/consultations",views:{menuContent:{templateUrl:"views/consultations/index6.html",controller:"ConsultationsIndexCtrl"}}}).state("user.buy-product-consultation-select",{cache:!1,url:"/buyProduct/select",views:{menuContent:{templateUrl:"views/productsConsultation/select1.html",controller:"ProductsConsultationSelect"}},defaultBack:{state:"user.products"}}).state("user.buy-product-consultation-success",{url:"/buyProduct/success",views:{menuContent:{templateUrl:"views/productsConsultation/success1.html",controller:"ProductsConsultationSuccess"}}}).state("user.contracts-inquiry",{url:"/contracts/inquiry",views:{menuContent:{templateUrl:"views/contracts/inquiry.html",controller:"ContractsInquiryCtrl"}},defaultBack:{state:"user.products"}}).state("user.contracts-relatives",{cache:!1,url:"/contracts/relatives",views:{menuContent:{templateUrl:"views/contracts/relatives.html",controller:"ContractsRelativesCtrl"}},defaultBack:{state:"user.contracts-inquiry"}}).state("user.contracts-relatives-data",{cache:!1,url:"/contracts/relatives-data/:relative_type",params:{relative_type:null},views:{menuContent:{templateUrl:"views/contracts/relatives-data.html",controller:"ContractsRelativesDataCtrl"}},defaultBack:{state:"user.contracts-relatives"}}).state("user.contracts-relatives-success",{url:"/contracts/relatives/success",views:{menuContent:{templateUrl:"views/contracts/relatives-success.html",controller:"ContractsRelativesSuccessCtrl"}}}).state("user.contracts-select",{cache:!1,url:"/contracts/select",views:{menuContent:{templateUrl:"views/contracts/select.html",controller:"ContractsSelectCtrl"}},defaultBack:{state:"user.contracts-inquiry"}}).state("user.contracts-select-spec",{cache:!1,url:"/contracts/select/:spec",views:{menuContent:{templateUrl:"views/contracts/select.html",controller:"ContractsSelectCtrl"}},defaultBack:{state:"user.contracts-inquiry"}}).state("user.contracts-select-confirm",{url:"/contracts/select/confirm/:insurer_id/:insurer_title",views:{menuContent:{templateUrl:"views/contracts/select-confirm.html",controller:"ContractsSelectConfirmCtrl"}},defaultBack:{state:"user.contracts-select"}}).state("user.contracts-missing-insurances",{cache:!1,url:"/contracts/missing/:insurer_id/:insurer_title",views:{menuContent:{templateUrl:"views/contracts/missing-insurances2.html",controller:"ContractsMissingInsurancesCtrl"}},defaultBack:{state:""}}).state("user.dynamicForm-question",{cache:!1,url:"/dynamicForm/:page",views:{menuContent:{templateUrl:"views/dynamicForm/question4.html",controller:"DynamicFormQuestionCtrl"}}}).state("user.dynamicForm-success",{cache:!1,url:"/dynamicForm/success",views:{menuContent:{templateUrl:"views/dynamicForm/success.html",controller:"DynamicFormSuccessCtrl"}}}).state("user.dynamicForm-questions-intro",{cache:!1,url:"/consultation/:id/questions-intro/:insurer_title/",views:{menuContent:{templateUrl:"views/dynamicForm/questions-intro2.html",controller:"DynamicFormQuestionsIntroCtrl"}}}).state("user.gkv-insurance-rate-form",{cache:!1,url:"/gkv/insuranceRate/:insurer_id",views:{menuContent:{templateUrl:"views/gkv/insurance-rate-form.html",controller:"GkvInsuranceRateFormCtrl"}},defaultBack:{state:"user.products"}}).state("user.gkv-user-income-form",{cache:!1,url:"/gkv/userIncome/:insurer_id",views:{menuContent:{templateUrl:"views/gkv/user-income-form.html",controller:"GkvUserIncomeFormCtrl"}},defaultBack:{state:"user.products"}}),n.otherwise("/start/intro")}]),Safe.config(["$translateProvider",function(e){return e.useStaticFilesLoader({prefix:"translations/",suffix:".json"}),e.preferredLanguage("de")}]),Safe.controller("CheckCodeCtrl",["$scope","Navigator","$ionicLoading","Account","AdjustService","SettingsService","Flash","$timeout","Recommendations","AndroidGoButtonHandler",function(e,n,t,r,i,o,s,a,u,c){var l,d,f,h;return e.codeRegexp=/^(\d{4}|\d{6})$/,h=e.$on("$stateChangeSuccess",function(){return o.loadSettings(e),d()}),f=e.$on("$ionicView.afterEnter",function(){return a(function(){return form.confirmationCode.focus()},100)}),e.setForm=function(n){return e.form=n},e.requestCodeAgain=function(){return t.show(),i.registerCodeRequestedAgain(),r.requestCode(l()).success(function(){return s.show("Der Verifizierungscode wurde versandt")})["finally"](t.hide)},e.checkCodeBase=function(o){var a;if(e.form.$submitted=!0,e.form.$valid)return t.show(),a=e.form.confirmationCode.$modelValue,r.loginWithCode(l(),a).success(function(e){var t;return delete localStorage["ls.userNumber"],t=r.recommendationData(),u.isPending(t)&&!u.isFriendInvite(t)?n.go("start.relatives-welcome",{noBack:!0,clearHistory:!0,state:{next_target:o.targetState}}):n.go(o.targetState,{noBack:!0,clearHistory:!0}),i.verificationCodeSuccess(),i.loginSuccess(e.analytics_slug)}).error(function(e){return console.log("error"),i.verificationCodeError(),s.show("Falscher Verifizierungscode")})["finally"](t.hide)},e.keyDown=function(n){return c.keyDownHandler(n.keyCode,function(){return n.preventDefault(),e.checkCode()})},d=function(){return e.userNumber=l()},l=function(){return localStorage["ls.userNumber"]||o.get("userNumber")},e.$on("$destroy",function(){return h(),f()})}]),Safe.controller("EmailCtrl",["$scope","$window",function(e,n){return e.sendEmail=function(){var e;if(null!=(e=n.plugin)?e.email:void 0)return n.plugin.email.open({to:["kunden@getsafe.de"],subject:"Nachricht an den Kundenservice"})}}]),Safe.controller("FaqCtrl",["$scope",function(e){return e.groups=[{title:"Welche Idee steckt hinter GetSafe?",content:"Bei GetSafe arbeiten wir gemeinsam an einer Vision: Wir wollen einer breiten Masse mehr Kontrolle über ihre Versicherungen geben. GetSafe bietet dafür eine zentrale, digitale Lösung für die eigenen Versicherungen. Ohne Aufwand, ohne Papierkram, jederzeit in der App einsehbar."},{title:"Wer steht hinter GetSafe?",content:"Wir sind ein junges Team von Gründern, Kreativen & Versicherungsexperten mit Sitz in Heidelberg. Unser Team wächst stetig, dadurch stellen wir sicher, dass wir dich immer optimal beraten können. Unterstützt werden wir von großartigen Investoren: den Gründern von Check24 und Interhyp, sowie Rocket Internet. Als Plan Forward GmbH firmiert das Unternehmen hinter GetSafe."},{title:"Welche Vorteile habe ich durch GetSafe?",content:"GetSafe fasst all deine Versicherungen an einem zentralen Ort zusammen. Du erhältst einen Überblick deiner Verträge, Tarife, Beiträge und Leistungen. Darüber hinaus hilft dir GetSafe gerne dabei Sparpotentiale zu entdecken und deine Absicherung zu optimieren. Unser Team geprüfter Experten bietet dir jederzeit eine professionelle Beratung und Betreuung für deine Versicherungen."},{title:"Wie hilft mir GetSafe Geld zu sparen?",content:"Der Überblick über deine Versicherungen in der GetSafe App und unsere Zusammenarbeit mit mehr als 100 Versicherern erlaubt es uns bei allen Versicherungsprodukten stets das für dich am besten passende Preis-/Leistungsangebot zu identifizieren. Auch können wir eventuell überlappende und damit unnötige Versicherungsangebote erkennen."},{title:"Ich möchte eine neue Versicherung abschließen oder einen Tarif wechseln, wie mache ich das?",content:"Wenn du einen Tarif überprüfen oder eine neue Versicherung abschließen möchtest, kontaktiert dich dein GetSafe-Versicherungsexperte. Alle GetSafe-Experten haben langjährige Beratungserfahrung und kennen sich bestens im deutschen Versicherungsmarkt aus. Jeden Versicherungsvertrag kannst du über GetSafe papierlos abschließen. Er wird automatisch in deiner GetSafe App gespeichert."},{title:"Ich möchte meine Versicherungen über einen Schaden oder eine Änderung bei mir informieren, unterstützt mich GetSafe dabei?",content:"Bei GetSafe stehen wir dir auch zur Seite, wenn du Deine Versicherung über einen Schaden oder eine Änderung deiner persönlichen Daten informieren willst (z.B. Addressänderung). Schreib uns kurz dein Anliegen, wir helfen dir dann den richtigen Ansprechpartner und die richtigen Formulare zu finden oder informieren direkt deine Versicherungsgesellschaften."},{title:"Mit welchen Versicherungsgesellschaften arbeitet GetSafe zusammen?",content:"Wir können deine Verträge bei fast allen deutschen Versicherungsgesellschaften in der App abbilden. Zudem können wir für dich bei der Identifizierung von Einsparpotenzialen auf die Zusammenarbeit mit über 100 Versicherern zurückgreifen, darunter alle großen Markenversicherer als auch die Direktversicherer."},{title:"Ist die Nutzung der GetSafe App kostenlos?",content:"Ja, die Nutzung der GetSafe App und die Betreuung durch deinen GetSafe Versicherungsexperten ist für dich immer kostenlos. "},{title:"Warum ist die Nutzung der GetSafe App kostenlos?",content:"Wir werden von deinen Versicherungsgesellschaften für die Verwaltung deiner Versicherungen jährlich mit kleinen Bestandspflegecourtagen bezahlt. Für dich entstehen dadurch keine zusätzlichen Kosten."},{title:"Wofür gibt es die SMS Verizifierung?",content:"Um die Registrierung abzuschließen, musst du einen Verifizierungscode eingeben, den wir dir per SMS schicken. Die Verifikation dient zur Identifikation und Sicherheit. Mit dem Code prüfen wir, dass wirklich du dich für die Nutzung der GetSafe App anmeldest."},{title:"Welche Angaben muss ich bei der Anmeldung machen?",content:"Alle Angaben, die wir von dir benötigen, sind deine persönlichen Kerndaten (Anschrift, Geburtsdatum) die Namen deiner Versicherer, sowie die Erteilung der Vollmacht, dich in Versicherungsfragen zur betreuen. Diese kannst du ganz einfach digital mit deinem Finger in der App unterschreiben. "},{title:"Ich habe mehrere Versicherungen bei einer Gesellschaft, wie kann ich diese eintragen?",content:"Du brauchst uns nur deine Versicherungsgesellschaft nennen. Unser System prüft daraufhin welche Versicherungen du bei der jeweiligen Gesellschaft besitzt und wir stellen dir diese gesammelt in der GetSafe App zur Verfügung. Manchmal kann nur die Zeit der Bereitstellung variieren."},{title:"Wie kann ich eine weitere  Versicherung hinzufügen?",content:"In der Versicherungsübersicht deiner App siehst du einen Button “+”. Wenn du diesen anklickst, wirst du mit unserem Serviceteam verbunden. Wir helfen dir gerne weiter, solltest du eine Versicherung im Anmeldeprozess vergessen oder falsch angegeben haben. "},{title:"Wie lange dauert es, bis meine Versicherungsdaten in GetSafe einsehbar sind?",content:"Nachdem du dich registriert und uns dein Einverständnis erteilt hast, treten wir direkt mit deinen Versicherungsgesellschaften in Kontakt, um dort deine Daten für dich einzuholen. Je nach Gesellschaft siehst du im Regelfall innerhalb von 7-14 Tagen deine Versicherungen in der App. Nur manchmal kommt es zu einer Rückfrage, dann dauert es etwas länger. Sobald eine Versicherung eingepflegt wurde, erhältst du automatisch eine Benachrichtigung."},{title:"Wofür wird die Maklervollmacht benötigt?",content:"Mit der Maklervollmacht beauftragst du uns formal mit der Verwaltung deiner Versicherungen. Dadurch ist es uns erlaubt deine Informationen bei deinen Versicherern einzuholen, dir diese in der GetSafe App zur Verfügung zu stellen und dich in Versicherungsfragen zu betreuen. Die Vollmacht ist rechtliche Voraussetzung um uns gegenüber den Versicherungsgesellschaften zu legitimieren."},{title:"Was macht GetSafe auf Grundlage der Vollmacht?",content:"Es ist es unser Ziel, dir mehr Kontrolle und Transparenz über deine Versicherungen zu geben. Die Maklervollmacht ist notwendig damit wir deine Daten bei deinen Versicherungsgesellschaften erfragen und dich in Versicherungsfragen betreuen dürfen. Vertragsänderungen aber erfolgen nur, wenn du uns explizit beauftragst. Die Vollmacht ist jederzeit kündbar."},{title:"Wie erhält GetSafe Auskünfte zu meinen Versicherungen?",content:"Als DIHK registrierter Versicherungsmakler sind wir berechtigt Vertragsdaten zu deinen Versicherungen bei den Versicherungsgesellschaften abzufragen. Dafür benötigen wir aber deine Zustimmung und Unterschrift zur oben genannten Maklervollmacht. Ohne diese dürfen und können wir keine Versicherungsinformationen für dich einholen."},{title:"Verändern sich mein Versicherungsschutz oder meine Versicherungsbeiträge, wenn ich GetSafe nutze?",content:"An deinem Versicherungsschutz und deinen Versicherungsbeiträgen ändert sich durch die Nutzung von GetSafe gar nichts. Um deine Versicherungsdaten in die App zu laden und dich bei Bedarf unterstützen zu können, wird GetSafe formal als neuer Ansprechpartner und Betreuer bei den Versicherungsgesellschaften hinterlegt."},{title:"Sind meine Daten bei GetSafe sicher?",content:"Der Schutz deiner Daten hat für uns höchste Priorität. Daher verpflichten wir uns zur Geheimhaltung deiner Daten und setzen dafür auf höchste Sicherheitsstandards. Deine Daten werden niemals an Dritte weitergegeben. Durch Löschung deines GetSafe Accounts werden all deine Daten automatisch gelöscht."},{title:"Welche Daten speichert GetSafe von mir?",content:"GetSafe speichert dein Nutzerprofil und allgemeine Informationen deiner Versicherungen wie z.B. die Höhe deines Beitrags oder deine Versicherungsnummer. Sensible Daten aus deinen Policen (z.B. Gesundheitsdaten) werden niemals gespeichert."},{title:"Wie kann ich meinen GetSafe Account löschen?",content:"Du kannst deinen Account vor Beendigung der Anmeldung direkt in der GetSafe App löschen. Bei bereits beendeter Anmeldung schickst du uns einfach eine E-Mail an kunden@getsafe.de."}]}]),Safe.controller("IntroCtrl",["$scope","SettingsService","$ionicHistory","$window","CodeUpdater","$timeout","Navigator","$ionicModal",function(e,n,t,r,i,o,s,a){var u,c;return c=!0,o(function(){return c=!1},500),u=e.$on("$ionicView.afterEnter",function(){return t.clearHistory(),t.clearCache(),n.initSettings()}),a.fromTemplateUrl("views/document/document.html",{scope:e,animation:"slide-in-up"}).then(function(n){return e.document_modal=n,console.log("open succ 1")}).then(function(e){return console.log("open fail 1")}),e.foo=function(){return e.pdfUrl="https://media.readthedocs.org/pdf/flask-cors/latest/flask-cors.pdf",e.document_modal.show()},e.goToLogin=function(){if(!c)return s.go("start.login-requestCode")},e.goToRegister=function(){if(!c)return s.go("start.register-requestCode")},e.sendEmail=function(){var e;if(null!=(e=r.plugin)?e.email:void 0)return r.plugin.email.open({to:["kunden@getsafe.de"],subject:"Nachricht an den Kundenservice"})},e.$on("$destroy",function(){return u()})}]),Safe.controller("ModalInsurersCtrl",function(){}),Safe.controller("PoaCtrl",function(){}),Safe.controller("ReviewCtrl",["$scope","$window","Review","$ionicPopup","ConnectionChecker","$rootScope",function(e,n,t,r,i,o){var s,a;return e.current_rating=5,e.stars_array=[1,2,3,4,5],e.rating_given=!1,e.givenRating=function(n){return e.rating_given=!0,e.current_rating=n},e.isActive=function(n){return e.current_rating>n},e.submitRating=function(){return i.isOffline()?i.internetErrorPopup():(t.showLater(),e.current_rating<4?a():s(),t.submitRating(e.current_rating))},a=function(){return r.confirm({title:"Was können wir besser machen?",template:"Bitte gebe uns ein Feedback was wir an GetSafe verbessern können um dich zu einem zufriedenen Kunden zu machen.",okType:"button-calm",cancelText:"Abbrechen"}).then(function(e){var r;if(e&&(null!=(r=n.plugin)?r.email:void 0))return n.plugin.email.open({to:["kunden+feedback@getsafe.de"],subject:"Mein Feedback zu GetSafe"}),t.submitted()}).then(function(){return o.$broadcast("reviewModal-hide")})},s=function(){return r.confirm({title:"Bewerte uns im App Store!",template:"Wir würden uns freuen, wenn du uns im App Store eine ähnliche Bewertung hinterlassen würdest.",cancelText:"Abbrechen",okType:"button-calm"}).then(function(e){if(e)return ionic.Platform.isAndroid()&&cordova?n.open(t.storeUrl(),"_system"):n.open(t.storeUrl(),"_self"),t.submitted()}).then(function(){return o.$broadcast("reviewModal-hide")})}}]),Safe.controller("selectProductsBaseCtrl",["$scope","Product","$ionicLoading",function(e,n,t){var r,i;return i=0,r=[],e.products=[],e.can_show=!1,e.hide_button=!1,e.getAllProducts=function(){return t.show(),n.get().then(function(n){return i=20,r=_.uniqBy(e.products.concat(n.data),"id"),e.hide_button=!0,e.products=_.take(r,i)})["finally"](t.hide)},e.updateCanShow=function(){return e.can_show=_.some(e.products,"checked")},e.moreDataAvailable=function(){return e.products<r},e.loadMore=function(){return e.products=_(e.products).concat(_.slice(r,i,i+=20)).value(),e.$broadcast("scroll.infiniteScrollComplete")},e.selectedProducts=function(){return _.filter(e.products,"checked")}}]),Safe.directive("accordion",function(){return{restrict:"E",templateUrl:"views/shared/accordion.html",link:function(e,n,t){return e.toggleGroup=function(n){return e.isGroupShown(n)?e.shownGroup=null:e.shownGroup=n},e.isGroupShown=function(n){return e.shownGroup===n}}}}),Safe.directive("addPlusButton",["$timeout","$ionicActionSheet","Navigator","ConnectionChecker","AdjustService","Chat","ConsultationFlow",function(e,n,t,r,i,o,s){var a;return a=function(a,u,c){var l,d,f,h,g,m,p,v;return l={addProduct:"addProductButton",buyProduct:"buyProductButton",consultation:"consultantButtonClick",onAction:"onActionIndex"},p=a.tracking||l,v=angular.element(document.querySelector(".js-floating-button")),d=angular.element(document.querySelector("body")),g=angular.element(document.querySelector(".js-floating-button-handler")),a.activeButton=!1,h=function(){if(a.activeButton)return t.go("user.contracts-inquiry"),i[p.addProduct]()},f=function(){if(a.activeButton)return t.go("user.buy-product-consultation-select"),i[p.buyProduct]()},m=function(){if(a.activeButton)return s.run("generalConsultation").then(function(e){var n,t;if(n=null!=e&&null!=(t=e.data)?t.conversation_id:void 0)return o.goToChat(n)})["finally"](function(){return i[p.consultation]()})},a.showBackdrop=function(){var t,o,s;return s="sheet-transition-blocker",o=null,i[p.onAction](),e.cancel(o),e(function(){return v.addClass("active")}),o=e(function(){return a.activeButton=!0},500),t=n.show({cssClass:"products-action-sheet "+s,buttons:[{text:"Weitere verträge verwalten"},{text:"Neues Angebot einholen"}],buttonClicked:function(e){if(r.isOffline())return r.internetErrorPopup();switch(e){case 0:h();break;case 1:f()}return t()},cancel:function(){return g.after(v),e.cancel(o),e(function(){return v.removeClass("active"),a.activeButton=!1})}}),e(function(){return angular.element(document.getElementsByClassName(s)[0]).removeClass(s)}),d.append(v),t}},{restrict:"E",templateUrl:"views/shared/plusButton.html",scope:{tracking:"=tracking"},link:a}}]),Safe.directive("agentTimestamp",["$timeout",function(e){var n;return n={display_name:"GetSafe",avatar_url:"./img/getsafe_icon_70.png"},{templateUrl:"views/consultations/agentTimestamp.html",restrict:"E",link:function(t,r,i){var o,s,a;return t.message=_.find(t.messages,["id",i.messageId]),o=t.message.sender.userId,t.admin=(null!=(s=t.consultation)&&null!=(a=s.admins_metadata)?a[o]:void 0)||n,e(function(){return t.$destroy()})}}}]),Safe.directive("agentProfile",["$timeout",function(e){return{templateUrl:"views/consultations/agentProfile.html",restrict:"E",link:function(n,t,r){var i,o;return o=_.find(n.messages,["id",r.messageId]),i=JSON.parse(o.__parts[0].body),n.user_name=i.user_name,n.agent_name=i.agent_name,n.agent_role=i.agent_role,n.agent_education=i.agent_education,n.agent_avatar_url=i.agent_avatar_url,n.last_message=o.last_message,e(function(){return n.$destroy()})}}}]),Safe.directive("backToStateButton",["Navigator",function(e){return{restrict:"E",templateUrl:"views/shared/backToStateButton2.html",link:function(n,t,r){if(!r.targetState)throw"Missing target state";return n.goToState=function(){return e.go(r.targetState,{animation:"back",noBack:!0})}}}}]),Safe.directive("consultationDocumentMessage",["ChatCache","Navigator","$timeout",function(e,n,t){var r;return r=function(e,r,i){var o;return o=_.find(e.messages,["id",i.messageId]),e.title=JSON.parse(o.__parts[0].body).title,e.last_message=o.last_message,e.goToDocumentBox=function(){return t(function(){return n.go("user.consultation-docs",{stateParams:{conversation_id:i.conversation}})},250)}},{templateUrl:"views/consultations/consultationDocumentMessage.html",restrict:"E",link:r}}]),Safe.directive("coverageEditButton",["CoverageQuestion","Navigator",function(e,n){return{restrict:"E",templateUrl:"views/userPanel/coverageEditButton.html",scope:{},link:function(t,r,i){var o,s;return s={"-1":["not_known","stable"],0:["very_bad","assertive"],1:["not_so_bad","energized"],2:["quite_good","balanced"]},o=function(){return t.show_coverage=e.showCoverage(),t.edit_coverage_data=s[e.currentStatus().toString()]},t.goToCoverageIntro=function(){return n.go("user.coverageIntro")},t.$on("$stateChangeStart",o),o()}}}]),Safe.directive("coverageStatus",["CoverageQuestion",function(e){return{restrict:"E",templateUrl:"views/userPanel/coverageStatus.html",scope:{},link:function(n,t,r){var i;return i=function(){return n.coverage_status=e.currentStatus(),n.show_coverage=e.showCoverage(),n.image_src="img/coverage/status_"+n.coverage_status+".png"},n.$on("$stateChangeStart",i),i()}}}]),Safe.directive("defaultNavBackButton",["BackButton",function(e){var n;return n=function(n,t,r){return n.backTitle=function(){return e.backTitle()},n.goDefaultBack=function(){return e.goDefaultBack()},n.goBack=function(){return e.goBack()}},{link:n,restrict:"EA"}}]),Safe.directive("detectFocus",["$timeout",function(e){return{restrict:"A",scope:{focusOnBlur:"=focusOnBlur"},link:function(n,t){return t.on("focus",function(){return e(function(){return n.focusOnBlur=!0;
})}),t.on("blur",function(){if(n.focusOnBlur)return t[0].focus()})}}}]),Safe.directive("formMessage",["$rootScope","ChatCache","UserDataRequest","DynamicForm","$ionicLoading","Navigator","Flash",function(e,n,t,r,i,o,s){var a,u;return a=["Jetzt ausfüllen","Ausgefüllt"],u=function(u,c,l){var d,f,h,g;return h=_.find(u.messages,["id",l.messageId]),f=JSON.parse(h.__parts[0].body),u.last_message=h.last_message,u.complete=!1,u.title=f.title,u.status=a[0],d=1,g=function(){return n.get(l.conversation).then(function(e){return u.complete=_.includes(e.data.consultation.form_hash_array,f.form_hash),u.status=u.complete?a[1]:a[0]})},g(),e.$on("form-button.refresh",g),u.fetchForm=function(){return i.show(),t.get(f.product_id).then(function(e){var n,t,i,a;return(n=null!=(t=e.data.user_product_form)&&null!=(i=t.policyholders)&&null!=(a=i.objects[0])?a.fields:void 0)?(r.cache(n,f.product_id,null,atob(l.conversation),f.form_hash),o.go("user.dynamicForm-question",{stateParams:{page:d}})):void s.show("Cannot fetch a form. Please text Agent!")})["catch"](function(e){s.show("Cannot fetch a form. Please text Agent!")})["finally"](i.hide)}},{templateUrl:"views/consultations/formMessage.html",restrict:"E",link:u}}]),Safe.directive("infoBackdrop",function(){return{restrict:"E",templateUrl:"views/dynamicForm/components/info_backdrop.html"}}),Safe.directive("inlineReview",function(){var e;return e=["$scope","Review","$ionicPopup","ConnectionChecker","$rootScope","Navigator","AdjustService","$timeout",function(e,n,t,r,i,o,s,a){var u;return e.current_rating=5,e.stars_array=[1,2,3,4,5],e.rating_given=!1,e.review={user_suggestion:null},e.givenRating=function(n){if(e.rating_given=!0,e.current_rating=n,e.current_rating<4)return a(function(){var e;return null!=(e=document.getElementsByClassName("js-inline-review-input")[0])?e.focus():void 0},500)},e.isActive=function(n){return e.current_rating>n},e.submitRating=function(){return r.isOffline()?r.internetErrorPopup():(n.submitRating(e.current_rating,e.consultation.id,e.review.user_suggestion)["finally"](function(){return e.refresh({show_loading:!1})}),e.current_rating>=4?u():t.alert({title:"Danke für dein Feedback!",template:"",okText:"OK",okType:"button-calm"}))},u=function(){return t.confirm({title:"Empfehle uns deinen Freunden!",template:"Wir freuen uns, dass dir GetSafe gefällt. Lade auch deine Freunde ganz einfach über die App ein.",cancelText:"Abbrechen",okType:"button-calm"}).then(function(e){if(e)return s.referAFriendAfterReview(),o.go("user.refer-a-friend"),n.submitted()}).then(function(){return i.$broadcast("reviewModal-hide")})}}],{restrict:"EA",controller:e,templateUrl:"views/consultations/inlineReview.html"}});var indexOf=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};Safe.directive("insurersList",function(){var e;return e=["$scope","Insurer","$ionicLoading","Registration","Flash","AdjustService","ErrNotifier","$ionicPopup","InsurerAutocomplete","$rootScope","$ionicScrollDelegate",function(e,n,t,r,i,o,s,a,u,c,l){var d,f,h,g,m,p,v;return h=[],p=[],g=[],e.all_selected=[],e.insurers=[],e.current_selected=[],e.chosen_insurances=[],e.loading_insurers=!0,e.autocomplete={search_filter:""},v=function(){return n.get().success(function(n){return e.chosen_insurances=_(n).filter(["user_insurer",!0]).map("id").value(),e.current_selected=_(e.chosen_insurances).clone(),e.concatSelectedInsurers(),h=n,e.insurers=h,e.loading_insurers=!1})},v(),e.$on("refresh-insurers-modal",v),e.search=function(){return u(h,"title",e.autocomplete.search_filter).then(function(n){return _.isEmpty(e.autocomplete.search_filter)?(g=[],e.insurers=h):(g=n,p=g,e.insurers=p)})},e.isChosenStoredInsurer=function(n){return _.some(e.chosen_insurances,function(e){return e===n.id})},e.isChosenInsurer=function(n){return _.some(e.all_selected,function(e){return e===(null!=n?n.id:void 0)})},e.submit=function(n){var a;if(null==n&&(n=!0),a=e.all_selected,n){if(0===a.length)return f();if(1===a.length||a.length>=6)return m(a.length)}if(!_.isEmpty(a))return t.show(),r.addInsurers(a).success(function(){return o.insurersAdded(),c.$broadcast("insurers-choosen")}).error(function(e,n){return 401===n?Redirector.handleInvalidToken():(i.show("Data update failed"),s.send(e,"Error on adding new insurers"))})["finally"](t.hide)},e.toggleInsurer=function(n,t){var r,i;return i=function(e){return e===n.id},r=function(){var t;return t=n.id,indexOf.call(e.chosen_insurances,t)<0},_.some(e.all_selected,i)?r()?(e.current_selected=_.reject(e.current_selected,i),e.autocomplete.search_filter="",o.removeOneInsurer()):null!=t&&t.preventDefault():(e.current_selected.push(n.id),e.autocomplete.search_filter="",o.addOneInsurer()),e.concatSelectedInsurers(),e.insurers=h,l.scrollTop()},e.selectedFirst=function(n){return _.includes(e.all_selected,n.id)?-1:n.title},e.noneSelected=function(){return _.isEmpty(e.current_selected)},e.concatSelectedInsurers=function(){return e.all_selected=_.uniq(e.chosen_insurances.concat(e.current_selected))},e.trackSearching=function(){return o.insurerSearchbarFocus()},f=function(){return a.alert({title:"Achtung",template:"Markiere hier deine Versicherungen bei denen du bereits Verträge hast.",okText:"Ok",okType:"button-calm"})},m=function(n){var t;return t=d(n),a.confirm({title:""+t.title,template:t.template,scope:e,cancelText:t.cancelBtn,cancelType:t.cancelType,okText:t.okBtn,okType:t.okType}).then(function(t){if(1!==n||t||o.furtherInsurersAdd(),t)return e.submit(!1)})},d=function(e){var n;return n=1===e?{title:"Versicherungen hinzufügen",template:"Bist du sicher, dass du nur eine Versicherung auswählen willst?",okBtn:"Ja, nur eine",cancelBtn:'<i class="icomoon icomoon-plus"></i>Weitere hinzufügen',okType:"button-default flex-order-reverse",cancelType:"button-calm"}:{title:"Achtung",template:"Du hast "+e+" Versicherungen ausgewählt. Bitte wähle nur Versicherungen aus, bei denen du bereits Verträge hast.",okBtn:"Angaben sind korrekt",cancelBtn:"Überprüfen",okType:"button-calm",cancelType:"button-default"}}}],{restrict:"EA",controller:e,templateUrl:"views/shared/insurersList2.html"}}),Safe.directive("linkMessage",function(){return{templateUrl:"views/consultations/linkMessage.html",restrict:"E",link:function(e,n,t){var r,i;return i=_.find(e.messages,["id",t.messageId]),r=JSON.parse(i.__parts[0].body),e.target_url=r.target_url,e.url_description=r.url_description,e.last_message=i.last_message,e.openUrl=function(e){return window.cordova?cordova.InAppBrowser.open(e,"_blank"):console.log("Cannot open in chat link in the browser.")}}}}),Safe.directive("overwriteTel",["telRegex",function(e){var n,t;return t=e,n=/[^\d]/gi,{require:"?ngModel",link:function(e,r,i,o){if(o)return o.$validators.tel=function(e){var r;return r=null!=e?e.replace(n,""):void 0,o.$isEmpty(r)||t.test(r)}}}}]),Safe.directive("partnerProductsList",function(){return{restrict:"E",templateUrl:"views/products/partner-products-list.html",link:function(e,n,t){return e.$watch("partners",function(){return e.partner_data=e.partners[t.partnerIndex],e.has_products=0!==e.partner_data.selected_products.length,e.is_pending="pending"===e.partner_data.recommendation_state},!0)}}}),Safe.directive("selectedProductMessage",["$timeout",function(e){var n,t,r,i;return t="Wir prüfen deine folgenden Versicherungen auf Leistungslücken und Einsparpotenziale:",n="Wir beraten dich jetzt auch zu Neuabschlüssen zu folgenden Versicherungen",r="application/getsafe.optimized-selected-products",i=function(i,o,s){var a;return a=_.find(i.messages,["id",s.messageId]),i.titles=JSON.parse(a.__parts[0].body).titles,i.last_message=a.last_message,i.message=a.__parts[0].mimeType===r?t:n,e(function(){return i.$destroy()})},{templateUrl:"views/consultations/selectedProductMessage.html",restrict:"E",link:i}}]),Safe.directive("stopEvent",function(){return{restrict:"A",link:function(e,n,t){if(t&&t.stopEvent)return n.bind(t.stopEvent,function(e){return e.stopPropagation()})}}}),Safe.directive("submittableFooter",function(){return{restrict:"E",templateUrl:"views/shared/submittableFooter.html",link:function(e,n,t){return n.find("a").on("click",function(){return e[t.handler]()})}}}),Safe.directive("teaserPanel",function(){var e,n,t,r,i;return e="teaserPanel-data",n="teaserPanel-version",t=6048e5,i={gkv:{title:"Jetzt AOK, TK, BKK, IKK und Co. freischalten!",body:"GetSafe unterstützt jetzt auch deine gesetzliche Krankenversicherung.",visual:"img/icon-gkv.svg",link:"user.contracts-select-spec",params:{spec:"gkv"}},household:{title:"Lade deinen Partner ein!",body:"Jetzt könnt ihr mit GetSafe gemeinsam eure Verträge einsehen und verwalten.",visual:"img/icon-household.svg",link:"user.contracts-relatives"},bu:{title:'<div style="font-size:17px">Was ist, wenn du nicht mehr arbeiten kannst?</div>',body:'<div style="font-size:13px;">Vom Staat gibt\'s maximal <br>35% deines Gehalts <br>- reicht dir das?</div>',visual:"img/icon-bu.svg",link:"user.explainer-spec",link_text:"Erfahre mehr",params:{spec:"bu"}},version:1},r=["$scope","localStorageService","AdjustService","Navigator","$sce",function(r,o,s,a,u){var c,l,d,f,h,g,m,p;return f=o,d=function(){var n,t;return t=(new Date).getTime(),n=_(f.get(e)||[]).sortBy("ts_start").find(function(e){return e.ts_start<=t})},h=function(){return f.set(e,_.tail(f.get(e)||[])),r.show_teaser=!1},g=function(e){var n;return n=(new Date).getTime(),_.each(e,function(e,r){return e.ts_start=n+r*t})},p=function(){var t,o;return f.set(n,i.version),o=r.userInsuranceTypes,t=[],_(o).includes("gkv")||_(o).includes("pkv")||"false"!==r.gkvInCheck||t.push({id:"gkv"}),"true"!==r.hasPartner&&t.push({id:"household"}),_(o).includes("bu")||t.push({id:"bu"}),t=_.shuffle(t),g(t),f.set(e,t)},null!=f.get(e)&&i.version===f.get(n)||p(),l=null,c=null,m=function(){if(c=d())return l=i[c.id],r.show_teaser=!0,r.title=l.title,r.body=l.body,r.visual=l.visual,r.link=l.link,r.link_text=l.link_text,s.teaserShown(c.id)},m(),r.$watch("userInsuranceTypes",function(e){var n;if(n=d(),n&&"gkv"===n.id&&_(e).includes("gkv"))return h()}),r.$watch("hasPartner",function(e){var n;if(n=d(),"household"===(null!=n?n.id:void 0)&&"true"===e)return h()}),r.close=function(){return s.teaserClosed(c.id),h()},r.openLink=function(){return s.teaserClicked(c.id),a.go(l.link,{stateParams:l.params})},r.trustAsHtml=function(e){return u.trustAsHtml(e)},document.addEventListener("resume",m),r.$on("$destroy",function(){return document.removeEventListener("resume",m)})}],{restrict:"AE",controller:r,scope:{hasPartner:"@",userInsuranceTypes:"@",gkvInCheck:"@"},templateUrl:"views/shared/teaserPanel.html"}}),Safe.directive("typeIndicator",function(){return{restrict:"E",template:"<div class='type-indicator' ng-class='{\"type-indicator-active\": is_typing}'><span></span><span></span><span></span></div>"}}),Safe.directive("validateEmail",function(){var e;return e=/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i,{require:"ngModel",restrict:"",link:function(n,t,r,i){if(i&&i.$validators.email)return i.$validators.email=function(n){return i.$isEmpty(n)||e.test(n)}}}}),Safe.directive("validateTrue",function(){return{require:"ngModel",restrict:"",link:function(e,n,t,r){return r.$validators.date=function(){return!0}}}}),Safe.filter("fuzzyBy",["$parse",function(e){var n;return n=function(e,t){var r;return""===t?e:(r=e.indexOf(t.charAt(0)),r!==-1&&n(e.substr(r+1),t.substr(1)))},function(t,r,i){var o;return t=_.isObject(t)?_.toArray(t):t,!_.isArray(t)||_.isUndefined(t)||_.isUndefined(i)?t:(o=e(r),_.filter(t,function(e){var t;return t=o(e),!!_.isString(t)&&(t=t.toLowerCase(),i=i.toLowerCase(),n(t,i)!==!1)}))}}]),Safe.filter("percentage",function(){return function(e){return e?(_.round(100*parseFloat(e),4)+"%").replace(".",","):""}}),Safe.filter("price",function(){return function(e){return"EUR "+parseFloat(e).toFixed(2).toString()}}),Safe.factory("Account",["Api","$q","localStorageService","SettingsService","$window","$cordovaDevice","Database","ConnectionChecker","$rootScope",function(e,n,t,r,i,o,s,a,u){var c,l;return c="recommendation",l=["step_insurers","step_full_profile","step_power_of_attorney"],{coverage_status:null,show_coverage:null,tokenGetParams:function(e){var n;return n=e||this.token(),"?user[token]="+n},requestCode:function(n,t){var r;return null==t&&(t=null),r={user:{phonenumber:n.replace("+49","0049")}},t&&(r.user.full_name=t),r.user.network_name="undefined"==typeof Adjust||null===Adjust?"1822":null,this.removeRecommendationData(),e.post("users/login_phonenumber.json",r)},loginWithCode:function(t,r){var i,o;return i=n.defer(),o={login_from:ionic.Platform.is("Browser")?"web":"",user:{phonenumber:t.replace("+49","0049"),code:r}},e.post("users/check_code.json",o).success(function(e){return function(n){return n.remember_token?(n.token=n.remember_token,delete n.remember_token,e.setCurrent(n),i.resolve(n)):i.reject(n)}}(this)).error(i.reject),i.promise},status:function(){var t,r,s,a,u,c,l;return l=this,a=i.innerWidth+"x"+i.innerHeight,s=window.device?[o.getPlatform()+"-"+o.getVersion(),o.getModel()].map(function(e){return e?encodeURIComponent(e):"missing-data"}):["dev-browser","dev-browser"],c=s[0],r=s[1],u="&info[resolution]="+a+"&info[operating_system]="+c+"&info[device]="+r+"&info[current_app_version]="+window.Settings.app_version,t=n.defer(),e.get("users/status.json"+this.tokenGetParams()+u,{}).then(function(e){var n;return(n=e.data)&&(l.setNotificationsEnabled(n.push_notifications_enabled),l.setCoverageStatus(n.coverage_status,n.show_coverage),l.setAskForReview(n.ask_for_review),l.setChatEnabled(n.chat_enabled),l.setUnreadMessagesCount(n.has_consultations,n.unread_messages_count)),t.resolve(e.data)})["catch"](t.reject),t.promise},completedSteps:function(e){var n;return n=_(e).pickBy(function(e,n){return _.includes(l,n)&&e===!0}).keys().value()},registrationCompleted:function(e){var n;return n=this.completedSteps(e),_.size(n)===_.size(l)},nextStep:function(){var e,r;return r=this,e=n.defer(),this.status().success(function(n){var i,o,s;return o=r.recommendationData(),i=r.completedSteps(n),s=r.registrationCompleted(n)?"user_registered":"pending"===(null!=o?o.share_state:void 0)&&"friend"!==(null!=o?o.type:void 0)?"relatives_welcome":(t.set("are_consultations_checked",!1),t.set("isBackdropVisible",!0),_.first(_.difference(l,i))),e.resolve(s)}).error(function(n,t){return null!=n&&(n.status=t),e.reject(n)}),e.promise},logout:function(){var n;if(n=this.tokenGetParams(this.token()),this.setCurrent(null),this.removeRecommendationData(),r.set("userNumber",""),r.set("userName",""),r.initSettings(),s.clear("user_index"),a.isOnline())return e.get("logout.json"+n,{})},"delete":function(){var n;return n=this.token(),this.setCurrent(null),e.put("users/disable.json",{user:{token:n}})},current:function(){return t.get("account")},setCurrent:function(e){return t.set("account",e)},setCoverageStatus:function(e,n){return this.coverage_status=e,t.set("coverage_status",e),this.show_coverage=n,t.set("show_coverage",n)},setAskForReview:function(e){return t.set("ask_for_review",e)},setChatEnabled:function(e){return u.chat_enabled=e,t.set("chat_enabled",e)},setNotificationsEnabled:function(e){return t.set("notifications_enabled",e)},setUnreadMessagesCount:function(e,n){var r,i;return r=JSON.parse(t.get("are_consultations_checked"))||!1,i=!e&&!r,u.unread_messages_count=i?1:n,u.has_consultations=e,u.has_new_chat_messages=n>0||i,t.set("unread_messages_count",n)},unreadMessagesCount:function(){return u.unread_messages_count||JSON.parse(t.get("unread_messages_count"))},chatEnabled:function(){return u.chat_enabled||JSON.parse(t.get("chat_enabled"))},notificationsEnabled:function(){return ionic.Platform.isAndroid()||!!JSON.parse(t.get("notifications_enabled"))},token:function(){return this.current()&&this.current().token},hasToken:function(){return!!this.token()},updatePushToken:function(n){var t;return t=this.token(),e.put("users/mobile_update.json",{user:{token:t,push_token:n}})},latestPoaUrl:function(){return window.Settings.host+"poa_pdfs/download_latest"},setRecommendationData:function(e){return t.set(c,e)},removeRecommendationData:function(){return t.remove(c)},recommendationData:function(){return t.get(c)}}}]),Safe.factory("Api",["$http",function(e){var n,t;return n={cache:!1,timeout:2e4},t=window.Settings.host,{get:function(r,i,o){return null==o&&(o=n),e.get(t+r,{params:i},o)},put:function(r,i,o){return null==o&&(o=n),e.put(t+r,i,o)},post:function(r,i,o){return null==o&&(o=n),e.post(t+r,i,o)}}}]),Safe.factory("Chat",["Api","Account","$q","Navigator","Consultation","ChatCache",function(e,n,t,r,i,o){var s,a,u,c,l,d,f;return s=window.Settings.layer_app_id,a=50,u=null,c=null,f=null,d=function(t){var r;return r={user:{token:n.token()},nonce:t},e.post("chat_tokens.json",r)},l=function(e,n,t){return u.createQuery({model:layer.Query.Conversation}).on("change",_.once(function(){var t;return c=u.getConversation(e),n.resolve(c),t=u.createTypingListener(document.getElementsByClassName("js-chat-input")[0]),t.setConversation(c)})),f=u.createQuery({model:layer.Query.Message,predicate:"conversation.id = '"+e+"'",paginationWindow:a}),t.resolve(f)},{setup:function(e){var n,r,o,a,c;return n=atob(e),c=t.defer(),o=t.defer(),r=t.defer(),a=t.defer(),i.get(n).then(function(e){return o.resolve(e.data)})["catch"](o.reject),u=new layer.Client({appId:s,challenge:function(e){return d(e.nonce).then(function(n){return e.callback(n.data)})["catch"](c.reject)},ready:function(){return l(n,a,c)}}),r.resolve(u),t.all([c.promise,o.promise,r.promise,a.promise])},sendMessage:function(e){return c.createMessage(e).send()},goToChat:function(e){var n;return n=function(){return r.go("user.consultation-chat",{stateParams:{conversation_id:btoa(e)}})},o.get(btoa(e)).then(function(e){return o.setLastChat(e.data.messages),n()})["catch"](function(){return n()})},loadEarlierMessages:function(e){return f.update({paginationWindow:e})}}}]),Safe.factory("Consultation",["Api","Account",function(e,n){var t;return t="consultations.json",{index:function(){return e.get(t+n.tokenGetParams())},intentIndex:function(r){return e.get(t+n.tokenGetParams()+("&intent="+r))},get:function(t){return e.get("consultations/"+btoa(t)+n.tokenGetParams())},getDocuments:function(t){return e.get("consultations/"+btoa(t)+"/documents"+n.tokenGetParams())},getDocumentBackendUrl:function(e){return window.Settings.host+("consultation_documents/"+e)},notifyUser:function(t){var r;return r={user:{token:n.token()}},e.post("consultations/"+btoa(t)+"/documents/notify_user",r)},reportDamage:function(r){var i;return i={user:{token:n.token()},consultation:{intent:"claim",selected_product_id:r}},e.post(t,i)},batchCreation:function(r){var i;return i={user:{token:n.token()},consultations:r},e.post(t,i)},singleCreation:function(r){var i;return i={user:{token:n.token()},consultation:r[0]},e.post(t,i)},generalConsultation:function(){var r;return r={user:{token:n.token()},consultation:{intent:"generalConsultation"}},e.post(t,r)},coverageConsultation:function(){var r;return r={user:{token:n.token()},consultation:{intent:"improveCoverageConsultation"}},e.post(t,r)},contractRelatedQuestion:function(r){var i;return i={user:{token:n.token()},consultation:{intent:"contractRelatedQuestion",selected_product_id:r}},e.post(t,i)},buyProduct:function(r){var i;return i={user:{token:n.token()},consultation:{intent:"buyProduct",product_id:r}},e.post(t,i)},updateDynamicFormInfo:function(t,r,i,o){var s;return s={user:{token:n.token()},consultation:{id:t},form_info:{product_id:r,form_hash:i,completed:o}},e.put("consultations/update_dynamic_form_info.json",s)}}}]),Safe.factory("ContractImport",["Api","Account",function(e,n){var t;return t=n.token(),{saveRelative:function(n){return e.put("users/update_relatives",{user:{token:t},relatives:n})},addProducts:function(n,r){return e.post("selected_products",{user:{token:t},insurer_id:n,products:r})}}}]),Safe.factory("CoverageQuestion",["Api","Account","$q","localStorageService",function(e,n,t,r){return{cached_answers:{},cacheAnswer:function(e,n){var t;return t=_.tap({},function(t){return t[e]=n}),this.cached_answers=_.merge(this.cached_answers,t)},data:function(){return[{id:1,slug:"me_my_family_status",text:"Wie ist dein Familienstand?",answers:{"Liiert und zusammenlebend.":"dating and living together","Ledig und alleinlebend.":"unmarried and living alone"}},{id:2,slug:"me_has_kids",text:"Hast du Kinder?",answers:{Ja:"yes",Nein:"no"}},{id:3,slug:"me_owns_residential_property",text:"Hast du Wohneigentum?",answers:{Ja:"yes",Nein:"no"}},{id:4,slug:"me_making_a_living_only_from_income",text:"Ist dein Einkommen für den Lebensunterhalt wichtig?",answers:{Ja:"yes",Nein:"no"}}]},current:function(e){return _.find(this.data(),["slug",e])},next:function(e){return e===_.size(this.data())?null:_.find(this.data(),["id",e+1])},submitAnswer:function(r,i){var o,s,a;return o=this.current(r),1===o.id&&(this.cached_answers={}),this.next(o.id)?(s=t.defer(),this.cacheAnswer(r,i),s.resolve(!0),s.promise):(a=this,this.cacheAnswer(r,i),e.put("users/main_person.json",{user:{token:n.token()},user_datum:{document:a.cached_answers}}).then(a.fetchCoverageData))},currentStatus:function(){return n.coverage_status||(n.coverage_status=r.get("coverage_status"))},showCoverage:function(){return JSON.parse(n.show_coverage||(n.show_coverage=r.get("show_coverage")))},fetchCoverageData:function(){var e;return e=t.defer(),n.status().then(function(n){return n?e.resolve({coverage_status:n.coverage_status,show_coverage:n.show_coverage}):e.reject("missing_status_data")})["catch"](e.reject),e.promise}}}]),Safe.factory("Document",["Api","Account",function(e,n){return{foo:function(){return"bar"}}}]),Safe.factory("Insurer",["Api","Account",function(e,n){return{get:function(t){return null==t&&(t={}),t.category="private",e.get("insurers.json"+n.tokenGetParams(),t)},setContractNum:function(t){return null==t&&(t={contract_num:null,insurer_id:null}),e.put("insurers/"+t.insurer_id+"/contract_number.json",{contract_number:t.contract_num,user:{token:n.token()}})},noContractNum:function(t){return null==t&&(t={insurer_id:null}),e.put("insurers/"+t.insurer_id+"/unknown_contract_number.json",{user:{token:n.token()}})},intervalNamesMapping:function(e){return{Monatlicher:"monatlich","Vierteljährlicher":"vierteljährlich","Halbjährlicher":"halbjährlich","Jährlicher":"jährlich",Einmalig:"einmalig"}[e]||""}}}]),Safe.factory("Product",["Api","Account",function(e,n){return{get:function(t){return null==t&&(t=null),t?e.get("products.json"+n.tokenGetParams()+"&insurer_id="+t):e.get("products.json"+n.tokenGetParams())},getPersonalized:function(){return e.get("personalized_products.json"+n.tokenGetParams())},addGkvWithMonthlyRate:function(t,r){return e.post("gkv_products.json",{user:{token:n.token()},gkv_product:{insurer_id:t,monthly_rate:_.replace(r,",",".")}})},addGkvWithUserIncome:function(t,r,i){return e.post("gkv_products.json",{user:{token:n.token()},gkv_product:{insurer_id:t,income_amount:_.replace(r,",","."),income_interval:i}})},updateGkvWithMonthlyRate:function(t,r,i){return e.put("gkv_products/"+t,{user:{token:n.token()},gkv_product:{insurer_id:r,monthly_rate:_.replace(i,",",".")}})},updateGkvWithUserIncome:function(t,r,i,o){return e.put("gkv_products/"+t,{user:{token:n.token()},gkv_product:{insurer_id:r,income_amount:_.replace(i,",","."),income_interval:o}})}}}]),Safe.factory("Recommendations",["Account","Api","localStorageService",function(e,n,t){var r;return r={pending:"pending",accepted:"accepted",rejected:"rejected"},{isPending:function(e){return(null!=e?e.share_state:void 0)===r.pending},isFriendInvite:function(e){return"friend"===(null!=e?e.type:void 0)},add:function(t){var r;return r={new_user:{full_name:t.name,phonenumber:t.phonenumber.replace("+","00")},recommendation:{type:t.relative_type},user:{token:e.token()}},n.post("users/invite.json",r)},share:function(t){var i;return i=t?r.accepted:r.rejected,n.put("users/share_contracts.json",{recommendation:{share_state:i},user:{token:e.token()}})},acceptedBoolToState:function(e){return e?r.accepted:r.rejected}}}]),Safe.factory("Registration",["Api","Account",function(e,n){return{has_one_time_token:!1,addInsurers:function(t){var r;return r={user:{token:n.token(),insurer_ids:t}},e.post("users/add_insurers.json",r)},updateData:function(t){var r,i;return i=angular.copy(t),i.birthdate=i.birthdate.toString(),r={user:i},r.user.token=n.token(),e.put("users/mobile_update.json",r)},uploadSignature:function(t){var r,i,o,s,a,u;return s=new Date,o=s.getUTCMonth()+1,r=s.getUTCDate(),u=s.getUTCFullYear(),i="poa-"+u+"-"+o+"-"+r,a={user:{token:n.token()},legal_tracking:{type_of:"ACCEPTED_POWER_OF_ATTORNEY",signature_base64:t,document_version:i}},e.post("legal_trackings.json",a)},reviewBroker:function(t){var r;return r={user:{token:n.token(),review_text:t}},e.put("users/review_broker.json",r)},requestOneTimeSignature:function(){return e.get("legal_trackings/request_one_time_signature_url.json"+n.tokenGetParams())},registerOneTimeToken:function(e){if(e)return this.has_one_time_token=!0,n.setCurrent({token:e})},hasOneTimeToken:function(){return!!this.has_one_time_token}}}]),Safe.factory("Review",["Account","localStorageService","Api",function(e,n,t){var r,i,o,s,a,u,c,l;return i=864e5,o="https://play.google.com/store/apps/details?id=de.getsafe.safe&reviewId=0",r="https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=964426812&pageNumber=0&sortOrdering=2&type=Purple+Software&mt=8",l=function(){return"true-"+window.Settings.app_version},s=function(){return new Date},a=function(){var e;return!(e=u())||e<=s()},u=function(){var e;return(e=n.get("review-showAt"))?new Date(e.replace(/\"/g,"")):null},c=function(){return n.get("was_reviewed")===l()},{storeUrl:function(){return ionic.Platform.isAndroid()?o:ionic.Platform.isIOS()?r:"https://getsafe.de"},showOverlay:function(){return!c()&&(!!a()&&JSON.parse(n.get("ask_for_review")))},submitRating:function(n,r,i){return t.post("app_reviews.json",{user:{token:e.token()},app_review:{rating:n,version:window.Settings.app_version,consultation_id:r,user_suggestion:i}})},submitted:function(){return n.set("was_reviewed",l()),t.put("users/app_was_reviewed",{user:{token:e.token()}})},showLater:function(e){var t;return null==e&&(e=14),t=new Date(s().getTime()+e*i),n.set("review-showAt",t)}}}]),Safe.factory("UserDataRequest",["Api","Account",function(e,n){return{get:function(t){return e.get("user_data/main/user_products/new.json"+n.tokenGetParams()+"&product_id="+t)},create:function(t,r){return e.post("user_data/main/user_products.json",{user:{token:n.token()},user_product:{product_id:t,policyholders_attributes:r}})}}}]),Safe.factory("UserIndex",["Api","Account","Database","ConnectionChecker",function(e,n,t,r){var i,o;return o="user_index",i=o+".json",{index:function(){return r.isOnline()?t.put(e.get(i+n.tokenGetParams()),o):t.get(o)}}}]),Safe.factory("AdjustService",["$window","Account",function(e,n){return{loginCodeRequested:function(){return this._trackEvent("loginCodeRequested","qi40l6")},registerCodeRequested:function(){return this._trackEvent("registerCodeRequested","eni9i3")},registerCodeRequestedAgain:function(){return this._trackEvent("registerCodeRequestedAgain","to5zcq")},verificationCodeSuccess:function(){return this._trackEvent("verificationCodeSuccess","34rgch")},verificationCodeError:function(){return this._trackEvent("verificationCodeError","9wwx76")},optimizeTariffButton:function(){return this._trackEvent("optimizeTariffButton","oduw7q")},reportDamageButton:function(){return this._trackEvent("reportDamageButton","m7onj9")},consultationCreate:function(){return this._trackEvent("consultationCreate","bgi5yb")},policeShowButton:function(){return this._trackEvent("policeShowButton","6p6sqk")},addProductButton:function(){return this._trackEvent("addProductButton","7maegf")},addProductFromConsultationsButton:function(){return this._trackEvent("addProductFromConsultationsButton","vxae9o")},buyProductButton:function(){return this._trackEvent("buyProductButton","gg54a8")},buyProductFromConsultationsButton:function(){return this._trackEvent("buyProductFromConsultationsButton","mqlvs2")},sliderSwipeStart:function(){return this._trackEvent("sliderSwipeStart","yelqel")},loginStart:function(){return this._trackEvent("loginStart","fxigx4")},loginSuccess:function(e){return this._trackEvent("loginSuccess","sj49ck",{analytics_slug:e})},registrationStart:function(){return this._trackEvent("registrationStart","86nbq3")},signupComplete:function(){return this._trackEvent("signupComplete","3df0yn")},insurersAdded:function(){return this._trackEvent("insurersAdded","ww18rb")},profileDataAdded:function(){return this._trackEvent("profileDataAdded","gy866x")},signatureAdded:function(){return this._trackEvent("signatureAdded","j7z5ao")},productIndex:function(){return this._trackEvent("productIndex","h86is2")},productDetails:function(e,n){return this._trackEvent("productDetails","vw66yz",{product_id:e,product_spec:n})},insurersModalEnter:function(){return this._trackEvent("insurersModalEnter","75o016")},personalDataModalEnter:function(){return this._trackEvent("personalDataModalEnter","emeims")},signatureExplanationEnter:function(){return this._trackEvent("signatureExplanationEnter","vi3vj6")},signaturePOAOpen:function(){return this._trackEvent("signaturePOAOpen","om0ndf")},signaturePOAClose:function(){return this._trackEvent("signaturePOAClose","b9ij5m")},signaturePadEnter:function(){return this._trackEvent("signaturePadEnter","e3ytod")},signupCompletionPage:function(){return this._trackEvent("signupCompletionPage","3df0yn")},addOneInsurer:function(){return this._trackEvent("addOneInsurer","e4uj6e")},removeOneInsurer:function(){return this._trackEvent("removeOneInsurer","jeki2g")},insurerSearchbarFocus:function(){return this._trackEvent("insurerSearchbarFocus","donacz")},furtherInsurersAdd:function(){return this._trackEvent("furtherInsurersAdd","8sknjp")},personalDataExplanationOpen:function(){return this._trackEvent("personalDataExplanationOpen","1ikhw3")},personalDataExplanationClose:function(){return this._trackEvent("personalDataExplanationClose","6l9br4")},signaturePOAReadModeToggle:function(){return this._trackEvent("signaturePOAReadModeToggle","bejyne")},signaturePadClear:function(){return this._trackEvent("signaturePadClear","z0dztn")},chatButtonClick:function(){return this._trackEvent("chatButtonClick","v6ooc0")},onActionIndex:function(){return this._trackEvent("onActionIndex","7amj62")},onActionFromConsultationsIndex:function(){return this._trackEvent("onActionFromConsultationsIndex","keppcb")},customerPolicyholder:function(){return this._trackEvent("customerPolicyholder","reoo6v")},addProductInsurersList:function(){return this._trackEvent("addProductInsurersList","ih4jru")},missingContractOpen:function(e){return this._trackEvent("missingContractOpen","rgazsx",{insurer_id:e})},missingContractConfirm:function(e){return this._trackEvent("missingContractConfirm","katlxg",{insurer_id:e})},missingContractCancel:function(e){return this._trackEvent("missingContractCancel","hhxlcl",{insurer_id:e})},missingContractAdd:function(){return this._trackEvent("missingContractAdd","8nxtrq")},policyholderOpen:function(){return this._trackEvent("policyholderOpen","m18lgl")},policyholderSelect:function(){return this._trackEvent("policyholderSelect","2y8k9e")},policyholderConfirm:function(){return this._trackEvent("policyholderConfirm","nws6mt")},partnerExplanationOpen:function(){return this._trackEvent("partnerExplanationOpen","1br1y9")},partnerExplanationClose:function(){return this._trackEvent("partnerExplanationClose","px4wgl")},checkboxPartnerInvitor:function(){return this._trackEvent("checkboxPartnerInvitor","9w7787")},checkboxPartnerInvitee:function(){return this._trackEvent("checkboxPartnerInvitee","hrwlvsl")},partnerInviteeSignup:function(){return this._trackEvent("partnerInviteeSignup","b0z86g");
},seePartnerTerms:function(){return this._trackEvent("seePartnerTerms","2ikyma")},invitePartner:function(){return this._trackEvent("invitePartner","hf8in5")},insuranceTypeOpen:function(){return this._trackEvent("insuranceTypeOpen","kaqoji")},insuranceTypeSelect:function(){return this._trackEvent("insuranceTypeSelect","svav9l")},consultantButtonClick:function(){return this._trackEvent("consultantButtonClick","bjuuyu")},consultantButtonFromConsultationsClick:function(){return this._trackEvent("consultantButtonFromConsultationsClick","o7uet2")},consultantPage:function(){return this._trackEvent("consultantPage","dc6iuo")},aboutPage:function(){return this._trackEvent("aboutPage","bdb8up")},termsPage:function(){return this._trackEvent("termsPage","36o5mj")},privacyPage:function(){return this._trackEvent("privacyPage","c4lu20")},chatInboxPage:function(){return this._trackEvent("chatInboxPage","n05ns1")},chatPage:function(){return this._trackEvent("chatPage","5sszg7")},partnerOptimization:function(){return this._trackEvent("partnerOptimization","rz73mz")},logout:function(){return this._trackEvent("logout","cqkgb9")},teaserClicked:function(e){return this._trackEvent("teaserClicked","uzve28",{teaser_id:e})},teaserClosed:function(e){return this._trackEvent("teaserClosed","2vsc3x",{teaser_id:e})},teaserShown:function(e){return this._trackEvent("teaserShown","aoedib",{teaser_id:e})},docBoxShown:function(){return this._trackEvent("docBoxShown","9f2pkb")},docBoxMail:function(){return this._trackEvent("docBoxMail","emn2dq")},docBoxOpenDoc:function(e){return this._trackEvent("docBoxOpenDoc","if6tud",{doc_id:e})},optimizationStart:function(){return this._trackEvent("optimizationStart","r8dewl")},optimizationModalClose:function(){return this._trackEvent("optimizationModalClose","g93n78")},optimizationClickedBuyProduct:function(){return this._trackEvent("optimizationClickedBuyProduct","pi397o")},optimizationAddRecommended:function(e){return this._trackEvent("optimizationAddRecommended","ib4yi9",{proposal_id:e})},optimizationRemoveRecommended:function(e){return this._trackEvent("optimizationRemoveRecommended","8p58wc",{proposal_id:e})},productToOptimizationChecked:function(){return this._trackEvent("productToOptimizationChecked","f5tifm")},productToOtimizationUnchecked:function(){return this._trackEvent("productToOtimizationUnchecked","g4ltle")},appResume:function(){return this._trackEvent("appResume","bq1j4n")},enterGkvRequestFromRate:function(){return this._trackEvent("enterGkvRequestFromRate","rtqb6l")},createGkvFromRate:function(){return this._trackEvent("createGkvFromRate","ghn17j")},enterGkvRequestFromIncome:function(){return this._trackEvent("enterGkvRequestFromIncome","cbjvq0")},createGkvFromIncome:function(){return this._trackEvent("createGkvFromIncome","a0lpv6")},editGkv:function(){return this._trackEvent("editGkv","9w93no")},editGkvSucceeded:function(){return this._trackEvent("editGkvSucceeded","3hqs8h")},editGkvFromRate:function(){return this._trackEvent("editGkvFromRate","fms4l5")},editGkvFromIncome:function(){return this._trackEvent("editGkvFromIncome","2g4ems")},editGkvGoToIncome:function(){return this._trackEvent("editGkvGoToIncome","1xyudc")},referAFriendVisit:function(){return this._trackEvent("referAFriendVisit","jfb3j4")},referAFriendChooseContact:function(){return this._trackEvent("referAFriendChooseContact","ipbv7j")},referAFriendSubmitManually:function(){return this._trackEvent("referAFriendSubmitManually","vc31u6")},referAFriendContactsAllow:function(){return this._trackEvent("referAFriendContactsAllow","4awvrb")},referAFriendContactsDecline:function(){return this._trackEvent("referAFriendContactsDecline","bi96lq")},referAFriendAfterReview:function(){return this._trackEvent("referAFriendAfterReview","bgg6p4")},_trackEvent:function(e,t,r){var i,o,s,a;return null==r&&(r={}),"undefined"!=typeof Adjust&&null!==Adjust?(window.TEST||console.log("trackEvent: ",t,r),o=new AdjustEvent(t),_.each(r,function(e,n){return o.addCallbackParameter(n,String(e))}),(i=null!=(s=n.current())?s.analytics_slug:void 0)&&o.addCallbackParameter("analytics_slug",String(i)),Adjust.trackEvent(o)):window.mixpanel?(r.analytics_slug=String(null!=(a=n.current())?a.analytics_slug:void 0),mixpanel.track(e,r)):window.TEST?void 0:console.log("trackEvent(adjust not available): ",t,r)}}}]),Safe.factory("AndroidBackButtonHandler",["$ionicPlatform","BackButton","Navigator","$stateParams","DynamicForm",function(e,n,t,r,i){var o,s,a;return a=function(){return"user.products"===t.currentState()},o=function(){return"user.consultation-chat"===t.currentState()},s=function(){return"user.dynamicForm-question"===t.currentState()},function(){return e.registerBackButtonAction(function(){return a()?ionic.Platform.exitApp():o()?n.goDefaultBack():s()?i.previousPage(r.page):n.goBack()},100)}}]),Safe.factory("AndroidGoButtonHandler",function(){var e,n;return e=9,n=ionic.Platform.isAndroid(),{keyDownHandler:function(t,r){if(n&&t===e)return r()}}}),Safe.factory("BackButton",["$ionicHistory","$state","$stateParams","$ionicConfig","$ionicViewSwitcher",function(e,n,t,r,i){return{backTitle:function(){var n;if(n=this.getDefaultBack(),r.backButton.previousTitleText()&&n)return e.backTitle()||n.title},goDefaultBack:function(){var r,o;return i.nextDirection("back"),e.nextViewOptions({disableBack:!0,historyRoot:!0}),r={},(null!=(o=this.getDefaultBack())?o.getStateParams:void 0)&&(r=this.getDefaultBack().getStateParams(t)),n.go(this.getDefaultBack().state,r)},goBack:function(){return"user.consultation-chat"===n.current.name?this.goDefaultBack():e.backView()?e.goBack():this.goDefaultBack()},getDefaultBack:function(){return(n.current||{}).defaultBack}}}]),Safe.factory("ChatCache",["Database",function(e){var n,t,r;return n="chat_messages",t=null,r=function(e){return n+"-"+e},{save:function(n,t,i){var o;return o={messages:n,consultation:t},e.put(o,r(i))},get:function(n){return e.get(r(n))},setLastChat:function(e){return t=e},getLastChat:function(){var e;return e=t,t=null,e}}}]),Safe.factory("ClaimChatManager",function(){var e,n;return e="closed",n=function(n){return n.claim_conversation_id?n.claim_consultation_state!==e||null:null},{idForActiveChat:function(e){return e&&n(e)?e.claim_conversation_id:null},buttonText:function(e){return e?n(e)?"Zur Schadenmeldung":"Schaden melden":null}}}),Safe.factory("CodeUpdater",["Flash","$timeout","$cordovaSplashscreen",function(e,n,t){var r,i;return r=new Ionic.Deploy,r.setChannel(window.Settings.updatesChannel),i=function(){return r.check().then(function(i){if(i)return r.download().then(function(){return console.log("#New version downloaded"),r.extract().then(function(){return console.log("#New version extracted"),e.show("Wir aktualisieren kurz deine GetSafe-App. Gleich geht es wie gewohnt weiter").then(function(){return t.show(),n(function(){return r.load()},200)})},function(e){return console.log("#Error extracting"),console.log(e)},function(e){})},function(e){return console.log("#Error downloading the updates"),console.log(e)},function(e){})},function(e){return console.log("#Error checking for updates"),console.log(e)})},function(){return i()}}]),Safe.factory("ConnectionChecker",["$ionicPopup","$ionicPlatform",function(e,n){var t;return t=!1,n.ready(function(){return t=!0}),{isOnline:function(){return!t||(!this.isDevice()||"none"!==navigator.connection.type)},isOffline:function(){return!this.isOnline()},isDevice:function(){return window.cordova},storedDataErrorPopup:function(){return e.alert({title:"Es gab ein Problem mit den Daten im Zwischenspeicher",template:"Der Offline-Modus ist nicht verfügbar, weil keine Daten im Zwischenspeicher sind. Bitte sorge für eine stabile Internetverbindung.",okType:"button-calm"})},internetErrorPopup:function(){return e.alert({title:"Es besteht keine Internetverbindung",template:"Diese Aktion kannst du leider nur mit einer stabilen Internetverbindung durchführen!",okType:"button-calm"})}}}]),Safe.factory("ConsultationFlow",["$rootScope","$ionicPopup","$ionicLoading","Consultation","AdjustService","ChatCache",function(e,n,t,r,i,o){var s,a;return s={reportDamage:{confirmPopup:{title:"Schaden melden",template:"Möchtest du von deinem GetSafe-Experten dabei unterstützt werden einen Schaden abzuwickeln?",cancelText:"Abbrechen",okText:"Ja"},success:{title:"Anfrage gesendet",template:"Wir melden uns umgehend bei dir."},error:{title:"Fehler",template:"Leider konnte deine Anfrage nicht gesendet werden, bitte versuche uns per E-Mail unter kunden@getsafe.de zu erreichen."}},generalConsultation:{confirmPopup:{title:"Berater kontaktieren",template:"Möchtest du mit einem GetSafe-Experten über deine Versicherungen sprechen?",cancelText:"Abbrechen",okText:"Ja"},success:{title:"Anfrage gesendet",template:"Wir melden uns umgehend bei dir."},error:{title:"Fehler",template:"Leider konnte deine Anfrage nicht gesendet werden, bitte versuche uns per E-Mail unter kunden@getsafe.de zu erreichen."}},coverageConsultation:{confirmPopup:{title:"Coverage title",template:"Coverage text",cancelText:"cancel",okText:"ok"},success:{title:"Coverage success title",template:"Coverage success text"},error:{title:"Coverage error title",template:"Coverage error text"}}},s.contractRelatedQuestion=s.generalConsultation,a=function(e,t){var r;return 401===t?Redirector.handleInvalidToken():r=n.alert({title:e.title,template:e.template,okType:"button-calm"})},{run:function(e,u){var c,l;return c={confirmPopup:{okType:"button-calm",cancelType:"button-default"}},l=_.merge({},s[e],c),n.confirm(l.confirmPopup).then(function(s){if(s)return t.show(),r[e](u).then(function(t){var r;return(r=t.data.consultation)&&o.save([],r,btoa(r.conversation_id)),i.consultationCreate(),"generalConsultation"!==e&&"reportDamage"!==e?(n.alert({title:l.success.title,template:l.success.template,okType:"button-calm"}),t):t})["catch"](function(e){a(l.error,e.status)})["finally"](t.hide)})}}}]),Safe.factory("ConsultationsCache",["Database",function(e){var n,t;return n="consultations_index",t=null,{save:function(t){return e.put(t,n)},get:function(){return e.get(n)},setLastConsultation:function(e){return t=e},getLastConsultation:function(){var e;return e=t,t=null,e}}}]),Safe.factory("ContactsImporter",["$q","localStorageService",function(e,n){var t;return t="contacts_permission ",{permissionWasGranted:function(){return n.set(t,!0)},hasPermission:function(){return JSON.parse(n.get(t))},canImportContacts:function(){return!!("undefined"!=typeof navigator&&null!==navigator?navigator.contacts:void 0)},pickContact:function(){var n;return n=e.defer(),this.canImportContacts()?navigator.contacts.pickContact(n.resolve,n.reject):n.reject(),n.promise}}}]),Safe.factory("ContractImportFlowPopup",["$ionicPopup",function(e){var n,t;return t=function(e){return"<p class='text-success'>"+e+"</p>"},n=function(e){return _.thru(_(e).take(4).map("title").reduce(function(e,n){return e+=t(n)},""),function(n){return e.length>4?n+="<p>...</p>":n})},function(t,r,i,o){var s,a,u,c,l,d;return null==o&&(o=""),s={missingContracts:"Folgende Verträge werden bei der "+o+" hinzugefügt:",buyProduct:"Für folgende Versicherung bereiten wir dir ein unverbindliches Angebot vor:"},c=[s[i],"<ul>"+n(t)+"</ul>","Zurück","Weiter"],d=c[0],l=c[1],u=c[2],a=c[3],e.confirm({title:""+d,template:l,okText:u,okType:"button-default flex-order-reverse",cancelText:a,cancelType:"button-calm"}).then(function(e){if(!e)return r()})}}]),Safe.factory("DynamicForm",["localStorageService","$ionicHistory","Consultation","ChatCache",function(e,n,t,r){var i,o,s,a;return i="!$parent.canShow(options.key)",o=["json","answers","product-id","consultation-type","conversation_id","title-page-number","form-hash"],s=function(e){return e-1},a=function(n){return e.set("dynamicForm-"+o[0],_.each(n,function(e){return _.merge(e,{hideExpression:i})}))},{validAnswers:function(){return _.filter(e.get("dynamicForm-"+o[0]),function(e){return _.isObject(e.templateOptions.show)}).reduce(function(e,n){return e[n.templateOptions.show.field]!==n.templateOptions.show.equal&&(e[n.key]=null),e},this.getAnswers())},currentPage:function(e){var n;return n=_(e).map(function(e){return e.templateOptions.page}).uniq().value(),1===n.length?n[0]:void 0},numberPages:function(){return _(this.cache()).map(function(e){return e.templateOptions.page}).last()},getAnswers:function(){return e.get("dynamicForm-"+o[1])},cache:function(n){return function(n,t,r,i,s){return null==s&&(s=null),0===arguments.length?e.get("dynamicForm-"+o[0]):(a(n),e.set("dynamicForm-"+o[1],{}),e.set("dynamicForm-"+o[2],t),e.set("dynamicForm-"+o[3],r),e.set("dynamicForm-"+o[4],i),e.set("dynamicForm-"+o[5],1),e.set("dynamicForm-"+o[6],s))}}(this),getProductId:function(){return e.get("dynamicForm-"+o[2])},getConversationId:function(){return e.get("dynamicForm-"+o[4])},getFormHash:function(){return e.get("dynamicForm-"+o[6])},storeAnswer:function(n){return e.set("dynamicForm-"+o[1],_.mergeWith(this.getAnswers(),n,function(e,n){return n}))},findPage:function(e){return _(this.cache()).filter(function(n){return n.templateOptions.page===""+e}).sortBy("order").value()},findFieldByName:function(e){return _.find(this.cache(),["key",e])},next:function(e){var n;return n=e+1,n>this.numberPages()?void 0:n},title:function(e){return"Frage "+this.pageNumber()},clearCache:function(){return _.each(o,function(n){return e.remove("dynamicForm-"+n)})},finalAnswers:function(){return{0:{document:this.validAnswers()}}},getConsultationType:function(){return e.get("dynamicForm-"+o[3])},pageNumber:function(n){return 0===arguments.length?e.get("dynamicForm-"+o[5]):e.set("dynamicForm-"+o[5],n)},isSeparatorPage:function(e){return _.some(e,function(e){return _.endsWith(e.type,"_separator")})},computeOffset:function(e,n){var t,r,i,o;for(i=n(e),t=!1,o=0;;)if(r=this.findPage(i),t=_.isEmpty(r)?void 0:_.every(r,function(e){return function(n){return!!_.isObject(n.templateOptions.show)&&e.getAnswers()[n.templateOptions.show.field]!==n.templateOptions.show.equal}}(this)),i=n(i),t&&(o+=1),!t)break;return o},previousPage:function(e){var t;return 1!==this.pageNumber()&&(this.isSeparatorPage(this.findPage(e-1))||this.pageNumber(this.pageNumber()-1),t=this.computeOffset(e,s)),n.goBack()},trackLeavingForm:function(){var e,n,i;return e=btoa(this.getConversationId()),i=this.getProductId(),n=this.getFormHash(),r.get(e).then(function(e){var r;if(r=e.data.consultation)return t.updateDynamicFormInfo(r.id,i,n,!1)})},prefillAnswers:function(e){var n;return n=_.map(e,"key"),_.pickBy(this.getAnswers(),function(e,t){return!_.isUndefined(e)&&_.includes(n,t)})}}}]),Safe.factory("ErrNotifier",["$window",function(e){return{send:function(n,t){var r;if(null==t&&(t=""),window.cordova&&e._trackJs)return r=JSON.stringify(_.merge(n,{msg:t})),trackJs.track(r)}}}]),Safe.factory("FormlyBackdrop",["$compile",function(e){var n;return n=angular.element(document.createElement("info-backdrop")),{show:function(t){var r;r=e(n)(t),angular.element(document.body).append(r)},remove:function(){n.remove()}}}]),Safe.factory("FormlyTemplateConfigurator",["formlyConfig","FormlyBackdrop",function(e,n){var t,r,i,o,s;return t=/^\d+((\.|\,)\d+)?$/,i={text_input:"views/dynamicForm/components/formly_text.html",date_select:"views/dynamicForm/components/formly_date.html",radio_select:"views/dynamicForm/components/formly_radio.html",horizontal_radio_select:"views/dynamicForm/components/formly_horizontal_radio.html",separator:"views/dynamicForm/components/formly_separator.html",multiple_select:"views/dynamicForm/components/formly_multiple.html"},r={car_further_drivers:{text:"Fragen zu weiteren Fahrzeughaltern",src:"car_drivers"},details_house:{text:"Beschreibung des Wohngebäudes",src:"house_details"},ask_for_vehicle:{text:"Fragen zum Fahrzeug",src:"vehicle"},type_house:{text:"Fragen zur Art des Gebäudes",src:"house"},your_insurance:{text:"Fragen zu deinem Versicherungsschutz",src:"insurance"},your_person:{text:"Fragen zu deiner Person",src:"person"},ask_for_motorbike:{text:"Fragen zum Motorrad",src:"motorrad",items:["Leichtkräfträder","Motorräder","Quads"]},motorbike_further_drivers:{text:"Fragen zu weiteren Fahrzeughaltern / Fahrzeugnutzern",src:"motorrad_drivers"}},o=function(e){return e<10?"0"+e:""+e},s=function(e){var n;return n=_.split(_.split(e,"T",2)[0],"-",3),3!==n.length?{}:{day:n[2],month:n[1],year:n[0]}},{run:function(){return e.setType({name:"text_input",templateUrl:i.text_input,link:function(e,r,i){return e.value=e.model[e.options.key],e.has_unit=!!e.to.unit,e.input_type=e.has_unit?"tel":"text",e.verify=function(n){var r;return e.model[e.options.key]=e.has_unit?(r=(""+n).replace(",","."),t.test(r)?parseFloat(r):null):""===n?null:n},e.showBackdrop=function(){return n.show(e)},e.hideBackdrop=function(){return n.remove()}}}),e.setType({name:"date_select",templateUrl:i.date_select,link:function(e,t,r){var i,a,u;return e.days=_.map(function(){for(a=[],i=1;i<=31;i++)a.push(i);return a}.apply(this),o),e.months=_.map([1,2,3,4,5,6,7,8,9,10,11,12],o),e.years=function(){u=[];for(var e=1920,n=(new Date).getFullYear();1920<=n?e<=n:e>=n;1920<=n?e++:e--)u.push(e);return u}.apply(this),e.date=s(e.model[e.options.key]),e.computeDate=function(){var n;if(e.date.day&&e.date.month&&e.date.year)return n=moment(e.date.year+"-"+e.date.month+"-"+e.date.day),e.model[e.options.key]=n.isValid()?n.format():null},e.showBackdrop=function(){return n.show(e)},e.hideBackdrop=function(){return n.remove()}}}),_.each(["radio","horizontal_radio"],function(t){return e.setType({name:t+"_select",templateUrl:i[t+"_select"],link:function(e,t,r){return _.isUndefined(e.model[e.options.key])||_.each(e.to.select_options,function(n){n[1]===e.model[e.options.key]&&(n.checked=!0)}),e.toggle=function(n,t){return e.model[e.options.key]=e.model[e.options.key]===t?null:t,_.each(e.to.select_options,function(e,t){n!==t&&(e.checked=!1)})},e.showBackdrop=function(){return n.show(e)},e.hideBackdrop=function(){return n.remove()}}})}),_.each(r,function(n,t){return e.setType({name:t+"_separator",templateUrl:i.separator,link:function(e,t,r){return e.separator_text=n.text,e.separator_src=n.src,e.separator_items=n.item}})}),e.setType({name:"multiple_select",templateUrl:i.multiple_select,link:function(e,t,r){return _.isUndefined(e.model[e.options.key])||_.each(e.to.select_options,function(n){_.includes(e.model[e.options.key],n[1])&&(n.checked=!0)}),e.updateMultiselect=function(){var n,t;return t=_.filter(e.options.templateOptions.select_options,"checked"),n=_.isEmpty(t)?null:_.map(t,1),e.model[e.options.key]=n},e.showBackdrop=function(){return n.show(e)},e.hideBackdrop=function(){return n.remove()}}})}}}]),Safe.factory("InputScrollFix",["$ionicScrollDelegate","$timeout",function(e,n){return{apply:function(){var e;if(ionic.Platform.isIOS()&&!ionic.Platform.is("Browser"))return e=null,window.addEventListener("native.keyboardshow",function(t){return function(){var r;if(r=document.activeElement,"INPUT"===r.tagName)return e=n(function(){var e,n,i,o,s,a,u;if(u=ionic.DomUtil.getParentWithClass(r,"scroll"),t.addInputExtender(u),e=_(document.getElementsByClassName("bar-footer")).find(function(e){return e.offsetHeight>0}),a=r.getBoundingClientRect(),o=null!=e?e.getBoundingClientRect():void 0,i=null!=o?o.top:void 0,n=i+(null!=o?o.height:void 0),s=a.top+a.height,ionic.DomUtil.rectContains(0,s,0,i,0,n))return angular.element(document.body).addClass("input-scroll-fix")},500)}}(this)),window.addEventListener("native.keyboardhide",function(t){return function(){return n.cancel(e),t.removeInputExtender(),angular.element(document.body).removeClass("input-scroll-fix")}}(this))},addInputExtender:function(n){return this.removeInputExtender(),angular.element(n).append('<input type="text" id="ios_scroll_extender" style="height:54px;visibility:hidden">'),e.resize()},removeInputExtender:function(){return angular.element(document.getElementById("ios_scroll_extender")).remove(),e.resize()}}}]),Safe.factory("InsurerAutocomplete",["$filter","$q","$timeout",function(e,n,t){return function(r,i,o){var s;return s=n.defer(),t(function(){var n;return n=e("fuzzyBy")(r,i,o),s.resolve(n)},100),s.promise}}]),Safe.factory("MaturityChecker",function(){return function(e){var n,t;return!!_.isDate(e)&&(n=new Date,t=n.setFullYear(n.getFullYear()-18),t>=e.getTime())}}),Safe.factory("MyPDFReader",["$cordovaFileTransfer","$cordovaFile","$q","$ionicLoading","Flash","md5","$cordovaFileOpener2","Account","ConnectionChecker","$http",function(e,n,t,r,i,o,s,a,u,c){var l,d,f;return l=function(e){return c.get(e+"?user[token]="+a.token()+"&plain_url=true")},d=function(e){var n;return n=e===a.latestPoaUrl()?e+_.random(1e4,9e4):e,o.createHash(n)+".pdf"},f=function(){return ionic.Platform.isAndroid()?cordova.file.externalDataDirectory:ionic.Platform.isIOS()?cordova.file.cacheDirectory:void 0},{setup:function(){var e;return e=t.defer(),r.show(),window.cordova?window.resolveLocalFileSystemURL(f(),function(n){return function(t){return n.documents_path=t.toURL(),r.hide(),e.resolve(!0)}}(this)):(r.hide(),e.resolve(!0)),e.promise},open:function(e){return r.hide(),"android"===cordova.platformId?s.open(e,"application/pdf").then(function(){return!1},function(){return i.show("Bitte installiere eine App zum Öffnen von PDFs.")}):PDFReader.open(e),setTimeout(function(){return r.hide()},500)},downloadAndOpen:function(t){var o,s,a,c;return a=this,o=d(t),window.cordova?(document.addEventListener("PDFReaderClosed",function(){return r.hide()}),r.show(),c=this.documents_path+o,n.checkFile(this.documents_path,o).success(function(e){return a.open(e.toURL())}).error(function(n){return l(t).then(function(n){return console.log("fileDoesNotExist downloading"),e.download(n.data.file_url,c).then(function(e){return a.open(e.toURL())},function(e){return r.hide(),i.show("Das Vertragsdokument konnte leider nicht geöffnet werden.")},function(e){return console.log(parseInt(e.loaded/e.total*100)+"%")},!1)})["catch"](function(e){return r.hide(),u.isOnline()?i.show("Das Vertragsdokument konnte leider nicht geladen werden."):i.show("Bitte sorge für eine stabile Internetverbindung.")})})):(s=window.open(""),l(t).then(function(e){return s.location.href=e.data.file_url}))}}}]),Safe.factory("Navigator",["$state","$ionicViewSwitcher","$ionicHistory",function(e,n,t){return{currentState:function(){return e.current.name},forwardState:function(){var e;return null!=(e=t.viewHistory().forwardView)?e.stateName:void 0},backState:function(){var e;return null!=(e=t.viewHistory().backView)?e.stateName:void 0},go:function(r,i){if(null==i&&(i={stateParams:{},noBack:!1,clearHistory:!1,animation:"forward",removeBackView:!1}),n.nextDirection(i.animation),e.go(r,i.stateParams).then(function(){if(i.noBack)return t.viewHistory().backView=null}),i.clearHistory)return t.clearHistory()},goBack:function(){return t.goBack()}}}]),Safe.factory("NotificationsManager",["Account","Flash","localStorageService","$timeout","Navigator","$q",function(e,n,t,r,i,o){var s,a,u,c,l,d;return s=/^\b(user.dynamicForm)/,c={ios:{alert:"true",badge:"true",sound:"true",clearBadge:"true"},android:{senderID:"343009275645"}},d=function(n){var r;if(console.log("Notifications registered"),console.log(n),e.hasToken()&&(r=n.registrationId))return t.set("notification-permission",!0),e.updatePushToken(r)},l=function(e){var n,t,r,o,a,u,c;if(!s.test(i.currentState()))return o=(null!=(n=e.additionalData)?n.redirect_to:void 0)||e.additionalData["gcm.notification.redirect_to"],u=(null!=(t=e.additionalData)?t.state_param_name:void 0)||e.additionalData["gcm.notification.state_param_name"],c=(null!=(r=e.additionalData)?r.state_param_value:void 0)||e.additionalData["gcm.notification.state_param_value"],a=u&&c?_.tap({},function(e){return e[u]=c}):{},i.go(o,{stateParams:a})},u=function(e){var t,i,o,s;if(console.log("Notification received"),console.log(e),(t=(null!=(i=e.additionalData)?i.popup_text:void 0)||e.additionalData["gcm.notification.popup_text"])&&r(function(){return n.show(t)},1e3),s=(null!=(o=e.additionalData)?o.redirect_to:void 0)||e.additionalData["gcm.notification.redirect_to"])return l(e)},a=function(){var e;return e=PushNotification.init(c),e.off("registration",d),e.on("registration",d),e.off("notification",u),e.on("notification",u)},{setupHandler:function(){if(this.permissionGranted()&&window.PushNotification)return console.log("Notification callback setup"),a()},permissionGranted:function(){return ionic.Platform.isAndroid()||!!t.get("notification-permission")},requestPermission:function(){return window.PushNotification?(console.log("Requesting notification permission"),a()):(t.set("notification-permission",!0),console.log("Not on device, not requesting permission."))},devicePermissionGranted:function(){var e,n;return e=o.defer(),(null!=(n=window.PushNotification)?n.hasPermission:void 0)?PushNotification.hasPermission(function(n){return e.resolve(n.isEnabled)}):e.resolve(this.permissionGranted()),e.promise}}}]),Safe.factory("OptimizeTariffResolver",function(){var e,n,t,r,i,o,s,a,u,c;return s=null,a=function(){return null!=s?s.from_partner:void 0},e=function(){return!!(null!=s?s.consultation_id:void 0)},t=function(){return!!(null!=s?s.conversation_id:void 0)},i=function(){return!!(null!=s?s.consultation_state:void 0)},o=function(){return!!(null!=s?s.super_consultation_state:void 0)},n=function(e){return(null!=s?s.consultation_state:void 0)===e},r=function(){return!o()&&i()&&(n("lost")||n("won"))},c=function(){return"open"===(null!=s?s.super_consultation_state:void 0)},u=function(){return"closed"===(null!=s?s.super_consultation_state:void 0)},{canShowConsultationButton:function(t,l){return null==l&&(l=!1),s=t,!a()&&(!l&&(!o()&&!i()&&!e()||r()||c()&&n("lost")||u()))},canShowChatButton:function(e){return s=e,!a()&&(!!t()&&((!o()||c())&&!n("lost")&&!n("won")))},canShowWonMessage:function(e){return s=e,c()&&n("won")}}}),Safe.factory("ProductRecommender",function(){var e,n,t,r,i;return e={bu:{title:"Berufsunfähigkeitsversicherung",text:"Vom Staat gibt's maximal 35% deines Gehaltes - reicht dir das?",icon:"img/icon-bu.svg"},phv:{title:"Private Haftpflicht",text:"Die wichtigste Versicherung überhaupt! - Schützt vor dem finanziellen Ruin.",icon:"img/icon-phv.svg"},altersvorsorge:{title:"Altersvorsorge",text:"Finanzielle Sicherheit auch im Alter? - Wir helfen dir dabei.",icon:"img/icon-altersvorsorge.svg"}},n=[],i=[],r=[],t=function(e){return!_.find(i,["spec",e])&&_(r).filter(["product_spec",e]).every(function(e){return"lost"===e.state})},function(o,s,a){var u;if(u=null,n=o,i=s,r=a,_.each(e,function(e,n){if(t(n)&&(u=n),u)return!1}),u)return e[u].id=_.find(n,["spec",u]).id,e[u]}});var indexOf=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};Safe.factory("Redirector",["$state","Navigator","Account","$ionicLoading","Database",function(e,n,t,r,i){var o,s,a,u,c;return u=["start.intro","start.login-requestCode","start.login-requestCode","start.register-requestCode","start.register-checkCode","start.register-stepSignature",""],a=["user.products","user.insurances-show","user.contractNum","user.about","user.terms","user.privacy","user.coverageIntro","user.coverageQuestion","user.coverageStatus","user.coverageOptimize","user.consultations","user.consultation-chat","user.buy-product-consultation-select","user.buy-product-consultation-success","user.contracts-inquiry","user.contracts-relatives","user.contracts-relatives-data","user.contracts-relatives-welcome","user.contracts-relatives-success","user.contracts-select","user.contracts-select-spec","user.contracts-inquiry","user.contracts-missing-insurances","user.dynamicForm-question","user.dynamicForm-success","user.dynamicForm-questions-intro","user.gkv-insurance-rate-form","user.gkv-user-income-form","user.consultation-docs","user.explainer-spec","user.refer-a-friend","start.register-stepPushNotification","start.relatives-welcome"],c=["start.register-guide","start.register-stepSignatureExplain","start.register-stepSignature","start.register-stepPoa","start.register-stepPoaConfirmation"],s={step_insurers:["start.register-stepInsurers","start.register-guide"],step_full_profile:["start.register-stepPersonalData","start.register-guide"],step_power_of_attorney:["start.register-stepSignatureExplain","start.register-stepPoa","start.register-stepSignature","start.register-stepPoaConfirmation","start.register-guide"]},o=_.flatMap(s),{handleInvalidToken:function(){return t.setCurrent(null),i.clear("user_index"),console.log("INFO: Loggin user out due to invalid auth token value."),n.go("start.intro",{animation:"none"})},redirectUser:function(){var e,i,c;return c=this,t.hasToken()?(e=n.currentState(),indexOf.call(a,e)<0&&r.show(),t.nextStep().success(function(e){var t;if(t=n.currentState(),"user_registered"===e){if(indexOf.call(a,t)<0)return n.go("user.products",{animation:"none"})}else{if("relatives_welcome"===e)return n.go("start.relatives-welcome",{noBack:!0,clearHistory:!0,state:{next_target:"start.register-guide"}});if(!_.includes(o,t))return n.go(_.first(s[e]))}}).error(function(e){return 401===(null!=e?e.status:void 0)?c.handleInvalidToken():n.go("start.intro",{animation:"none"})})["finally"](r.hide)):(i=n.currentState(),indexOf.call(u,i)<0?n.go("start.intro",{animation:"none"}):void 0)}}}]),Safe.factory("SettingsService",["$window",function(e){var n;return n={},{initSettings:function(){if(null!=e.Settings)return _.each(e.Settings,function(e){return function(e,t){n[t]=e}}(this))},set:function(e,t){return n[e]=t},get:function(e){return n.hasOwnProperty(e)?n[e]:""},loadSettings:function(e){return _.each(n,function(n,t){e[t]=n})}}}]),Safe.factory("Signature",["$ionicLoading","Registration","AdjustService","Navigator","Redirector","Flash",function(e,n,t,r,i,o){return{dataUrl:"",upload:function(s){return e.show(),n.uploadSignature(this.dataUrl).then(function(){if(t.signatureAdded(),!s)return ionic.Platform.isAndroid()?r.go("user.products"):r.go("start.register-stepPushNotification")})["catch"](function(e){401===e.status?i.handleInvalidToken():o.show("Signature upload failed")})["finally"](e.hide)}}}]),Safe.factory("ULinkRedirector",["Navigator",function(e){var n;return n=function(n){var t,r;if(r=null!=(t=n.params)?t.st:void 0)return e.go(r,{animation:"none"})},function(){if(window.universalLinks)return universalLinks.subscribe(null,n)}}]),Safe.factory("Database",["$q","pouchDB",function(e,n){var t;return t=function(e){return n(e,{auto_compaction:!0,location:"default"})},{put:function(n,r){var i;return"function"==typeof n.then?(n.then(function(e){var n;return n=e.data,t(r).destroy().then(function(e){return t(r).put({_id:r,data:n})})}),n):(i=e.defer(),t(r).destroy().then(function(e){return t(r).put({_id:r,data:n})["finally"](function(e){return i.resolve({data:n})})}),i.promise)},get:function(e){return t(e).get(e)},clear:function(e){return t(e).destroy()},hasStoredData:function(n){var t;return t=e.defer(),this.get(n).then(function(e){return t.resolve(!!(null!=e?e.data:void 0))})["catch"](function(e){return t.resolve(!1)}),t.promise}}}]),Safe.factory("Flash",["$ionicPopup",function(e){return{show:function(n){return e.alert({title:n,okType:"button-calm"})}}}]),Safe.factory("Helpers",function(){return{replacePhoneCode:function(e){var n;return n=e.toString().replace(/[^\d]/gi,""),n.replace(/^(01|((00)?(4901|491)))/,"+491")}}}),Safe.controller("ConsultationsChatCtrl",["$rootScope","$scope","$stateParams","Chat","$ionicLoading","Navigator","Account","$ionicScrollDelegate","$ionicModal","NotificationsManager","$ionicPopup","ChatCache","AdjustService","$cordovaKeyboard","$timeout","$interval","ConsultationsCache",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g,m,p){var v,k,b,w,S,y,C,z,A,P,$,I,E,B,D;return C=!1,k=s.current().analytics_slug,y=!1,n.params=t,n.messages=[],n.new_message={},n.focus_manager={focusInputOnBlur:!0},n.chat_ready=!1,n.consultation={active:!0},n.is_typing=!1,n.chatTitle="",P=null,w=null,E=null,S=50,B=n.$on("$ionicView.beforeEnter",function(){return n.fromMemory=!1,f.chatPage(),P=a.$getByHandle("chatScroller").getScrollView(),
n.refresh({show_loading:!1})}),D=n.$on("$ionicView.beforeLeave",function(){return P.el.style.overflowY="hidden !important",g(function(){return P.el.style.overflowY="scroll !important",n.scrollToBottom()}),m.cancel(w),g.cancel(E),n.noFocusOnBlur()}),A=function(e){return d.save(e,n.consultation,t.conversation_id)},I=function(){if(!C)return C=!0,window.cordova?u.fromTemplateUrl("views/consultations/modal-pushPermission.html",{scope:n}).then(function(e){return n.permission_modal=e,c.devicePermissionGranted()}).then(function(e){if(!e)return i.hide(),n.permission_modal.show()}):console.log("not on device, not showing push modal")},n.scrollToBottom=function(e){return null==e&&(e={animated:!1}),a.$getByHandle("chatScroller").scrollBottom(e.animated)},n.scrollToBottomAnimated=function(){return g(function(){return n.scrollToBottom({animated:!0})})},window.addEventListener("native.keyboardshow",n.scrollToBottomAnimated),z=function(e,t){var r;if(null==t&&(t={from_cache:!1}),!_.isEmpty(e))return t.from_cache||A(e),r=_.sortBy(e,"sentAt"),n.messages=_.map(r,function(e,n){var t,i,o,s;return e.sender.userId!==(null!=(i=r[n+1])&&null!=(o=i.sender)?o.userId:void 0)?e.last_message=!0:e.last_message=!1,e.sent_at_display=b(e.sentAt),t=_(e.__recipientStatus).omit(e.sender.userId).values().value(),e.read_status=_.includes(t,"read")?"gelesen":"gesendet",(null!=e&&null!=(s=e.sender)?s.userId:void 0)===k&&(e.app_user_message=!0),e.isRead||(e.isRead=!0),e}),n.can_load_earlier_messages=n.messages.length>=S},v=function(e){return g(function(){var t,r,i;return n.scrollToBottom(),r=!e&&i<=1,i=P.getScrollMax().top,m.cancel(w),t=0,w=m(function(){if(t++,P.el.scrollTop>=i||r||t>50)return m.cancel(w),n.cacheLoaded=!0},40)},150)},n.refresh=function(e){var s,a;return null==e&&(e={show_loading:!0}),$(p.getLastConsultation()),a=d.getLastChat(),_.isEmpty(a)?d.get(t.conversation_id).then(function(e){if(!_.isEmpty(e.data.messages))return $(e.data.consultation),z(e.data.messages,{from_cache:!0}),s?void 0:(s=!0,v())}):(n.fromMemory=!0,z(a,{from_cache:!0}),s||(s=!0,v())),n.chat_ready=!1,I(),e.show_loading&&i.show(),r.setup(t.conversation_id).spread(function(e,t,r){return $(t),y=!1,E=g(function(){return n.$apply(function(){return s||(s=!0,z(e.data),v(!0)),n.chat_ready=!0})},1e3),e.on("change",function(t){return n.$apply(function(){return g.cancel(E),"data"===t.type&&(n.chat_ready=!0),n.is_typing=!1,n.chat_ready&&z(e.data),s||"insert"===t.type?"insert"===t.type&&n.chat_ready&&n.scrollToBottom({animated:!0}):(s=!0,v()),i.hide()})}),r.on("typing-indicator-change",function(e){if(e.conversationId===t.conversation_id)return n.$apply(function(){var t;return t=_.reject(e.typing,function(e){return e===k}),n.is_typing=!_.isEmpty(t)})})})["catch"](o.goBack)["finally"](i.hide)},n.$on("$destroy",function(){return B(),D(),window.removeEventListener("native.keyboardshow",n.scrollToBottomAnimated)}),n.callMeMaybe=function(){return n.noFocusOnBlur(),h.close(),l.confirm({title:"Rückruf gewünscht?",template:"Dein Berater meldet sich so schnell wie möglich bei dir.",okText:"Ja",okType:"button-calm",cancelText:"Nein",cancelType:"button-default"}).then(function(e){if(e)return n.new_message.content="Bitte rufe mich zurück.",n.sendMessage()})},n.goToDocBox=function(){return o.go("user.consultation-docs",{stateParams:t})},n.sendMessage=function(e){return r.sendMessage(n.new_message.content),n.new_message.content=null,y=!0},n.sendIfEnter=function(e){if(13===e.keyCode&&!ionic.Platform.isWebView())return n.sendMessage()},n.noFocusOnBlur=function(){return n.focus_manager.focusInputOnBlur=!1},n.loadEarlierMessages=function(){return i.show(),r.loadEarlierMessages(S+=50)},$=function(t){var r;if(t)return n.consultation=t,n.chatTitle=_.replace(null!=(r=t.splitted_title)?r[0]:void 0,":",""),e.$broadcast("form-button.refresh")},b=function(e){var n,t;return n=e.toString(),t=n.length,24===t?n.slice(11,16):40===t?n.split(" ")[4].slice(0,5):""}}]),Safe.controller("ConsultationsDocsCtrl",["$scope","$stateParams","$ionicLoading","Navigator","Account","Consultation","$ionicScrollDelegate","AdjustService","MyPDFReader","Flash",function(e,n,t,r,i,o,s,a,u,c){var l,d,f;return e.params=n,e.document_sections=[],e.isEmpty=_.isEmpty,f=e.$on("$ionicView.beforeEnter",function(){return t.show(),e.getDocuments()}),l=atob(n.conversation_id),a.docBoxShown(),e.getDocuments=function(){return o.getDocuments(l).then(function(n){var t;if(t=n.data)return e.document_sections=t.document_sections})["catch"](d)["finally"](t.hide)},e.notifyUser=function(){if(!_.isEmpty(e.document_sections))return o.notifyUser(l).then(function(){return c.show("Wir haben dir eine E-Mail mit Link zur Web Dokumenten Verwaltung gesendet.")})["catch"](d)["finally"](function(){return a.docBoxMail()})},e.readPDF=function(e){var n;return n=o.getDocumentBackendUrl(e),u.setup().then(function(){return u.downloadAndOpen(n)})["catch"](console.log.bind(console))["finally"](function(){return a.docBoxOpenDoc(e)})},d=function(n){return console.log(e.document_sections),c.show("Es ist ein Fehler aufgetreten, bitte versuche es später nochmal.")},e.$on("$destroy",function(){return f()})}]),Safe.controller("ConsultationsIndexCtrl",["$scope","$ionicLoading","Navigator","Consultation","Account","Chat","AdjustService","Redirector","ConnectionChecker","ConsultationFlow","ConsultationsCache","$q","ChatCache",function(e,n,t,r,i,o,s,a,u,c,l,d,f){var h,g,m,p;return e.consultations=[],e.index_empty=!1,e.plusButtonTrackers={addProduct:"addProductFromConsultationsButton",buyProduct:"buyProductFromConsultationsButton",consultation:"consultantButtonFromConsultationsClick",onAction:"onActionFromConsultationsIndex"},p=e.$on("$ionicView.enter",function(){return s.chatInboxPage(),e.fetchConsultations()}),m=_.curry(function(n,t){var r,o,s;return e.consultations=_.orderBy(t.data,["user_has_unread_messages","active"],["desc","desc"]),e.index_empty=_.isEmpty(e.consultations),n.refresh_cache&&l.save(e.consultations),r=_.some(e.consultations,"user_has_unread_messages"),s=_(e.consultations).map("user_unread_messages_count").sum(),o=!_.isEmpty(e.consultations),i.setUnreadMessagesCount(o,s)}),e.fetchConsultations=function(e){var t;return null==e&&(e={refresh_data:!1}),t=r.index(),e.refresh_data?(n.show(),t.then(m({refresh_cache:!0}))["catch"](g)["finally"](h)):l.get().then(m({refresh_cache:!1}))["catch"](n.show)["finally"](function(){return t.then(m({refresh_cache:!0}))["catch"](g)["finally"](h)})},h=function(){return n.hide(),e.$broadcast("scroll.refreshComplete")},g=function(n,t){return 401===t?a.handleInvalidToken():"missing"===(null!=n?n.reason:void 0)?u.storedDataErrorPopup():e.consultations=[]},e.goToConsultationChat=function(e){return l.setLastConsultation(e),o.goToChat(e.conversation_id)},e.generalConsultation=function(){return c.run("generalConsultation").then(function(e){var n,t;if(n=null!=e&&null!=(t=e.data)?t.conversation_id:void 0)return o.goToChat(n)})["catch"](function(e){return Flash.show("Bitte versuche es erneut.")})},e.$on("$destroy",function(){return p()})}]),Safe.controller("ConsultationsPushPermissionCtrl",["$scope","NotificationsManager","$timeout","Account",function(e,n,t,r){return e.closePermissionModal=function(){return e.permission_modal.hide()},e.requestPermission=function(){return n.requestPermission(),r.setNotificationsEnabled(!0),t(r.status,6e3),e.closePermissionModal()}}]),Safe.controller("ExplainerCtrl",["$scope","$stateParams","Navigator","AdjustService","$ionicLoading","Consultation","DynamicForm","Product","Flash",function(e,n,t,r,i,o,s,a,u){var c;return c={bu:[{type:"title",content:"Berufsunfähigkeit"},{type:"heading",content:"Was passiert eigentlich, wenn du nicht mehr arbeiten kannst?"},{type:"image",src:"img/explainer/BU_visual_1.jpg"},{type:"intro",content:"Erfahre, was dir widerfahren kann, wenn du eines Tages aus gesundheitlichen Gründen nicht mehr deinem Beruf nachgehen kannst - und wie du dich dagegen absichern kannst."},{type:"cta",consultationSpec:"bu",link_text:"Jetzt beraten lassen"},{type:"text",content:"Fast jeder braucht sein Einkommen um seinen Lebensunterhalt zu bestreiten - was aber, wenn man eines Tages nicht mehr arbeiten kann? Hier setzt die private Berufsunfähigkeitsversicherung an. Sie sichert deine eigene, lebenslange Arbeitskraft ab, die gut und gerne einen Wert von mehreren Millionen Euro annehmen kann."},{type:"text",content:"Du denkst das betrifft dich nicht? Statistiken der staatlichen Rentenversicherung belegen, dass jeder Vierte (!) im Laufe seines Lebens berufsunfähig wird. Dann kann die Gefahr für dich und deine Familie schnell existenzbedrohlich werden, denn vom Staat bekommt man maximal 35% des vorherigen Gehalts als Erwerbsminderungsrente, oft noch weniger. Darüberhinaus erhalten Schüler, Studenten, Auszubildende, Hausfrauen/-männer, Selbstständige und Berufseinsteiger häufig gar keine Rente."},{type:"text",content:"Leider beschäftigen sich viele erst mit einer privaten Berufsunfähigkeitsversicherung, wenn der Ernstfall eingetreten ist. Dann ist es jedoch häufig zu spät, denn bei Abschluss der Versicherung findet eine Gesundheitsprüfung statt. Diese sorgt dafür, dass die Beitragskosten für die Versicherung individuell und gerecht festgelegt werden. Es ist daher sinnvoll, die Versicherung abzuschließen, wenn man noch jung und gesund ist, um günstigere Beiträge angeboten zu bekommen."},{type:"text",content:"Um deine Arbeitskraft von z.B. netto 2.000 € monatlich (das sind 960.000 € über 40 Berufsjahre !) nicht zu verlieren, kannst du diese mit einer privaten Berufsunfähigkeitsversicherung absichern. Wir empfehlen dabei, die Höhe deiner sogenannten Berufsunfähigkeits-Rente so zu wählen, dass du in jedem Fall deine fixen Kosten wie Miete, Essen, Kleidung, Versicherungen, usw. tragen kannst. Das sind in der Regel zwischen 60 und 80% deines Nettogehalts."},{type:"text",content:"Übrigens gehen nur 10% der Berufsunfähigkeitsfälle auf einen Unfall zurück - viel häufiger sind psychische Krankheiten wie Burnout oder Depressionen, Skeletterkrankungen wie Rückenleiden oder Krebs."},{type:"image",src:"img/explainer/BU_visual_2.png"},{type:"cta",consultationSpec:"bu",link_text:"Jetzt beraten lassen"}]},e.content=c[n.spec],e.createConsultation=function(e){var n,c;return c=null,n=null,i.show(),a.get().then(function(t){return n=_(t.data).find(function(n){return n.spec===e}),c=null!=n?n.id:void 0,o.buyProduct(c)}).then(function(e){var i,o,a,u,l,d;return r.consultationCreate(),o=null!=(a=e.data.user_product_form)&&null!=(u=a.policyholders)&&null!=(l=u.objects[0])?l.fields:void 0,i=null!=e&&null!=(d=e.data)?d.conversation_id:void 0,o?(s.cache(o,c,"buyProduct",i),t.go("user.dynamicForm-questions-intro",{stateParams:{insurer_title:n.title,id:c}})):(s.cache(null,null,"buyProduct",i),t.go("user.buy-product-consultation-success"))})["catch"](function(e){switch(e.status){case 401:return Redirector.handleInvalidToken();case 429:u.show("Du hast zu viele Anfragen gestellt. Bitte gedulde dich ein wenig und versuche es später erneut.");break;default:return u.show("Die Anfrage konnte leider nicht erstellt werden. Bitte gedulde dich ein wenig und versuche es später erneut."),ErrNotifier.send(e,"Error on creating a new buyProduct consultation")}})["finally"](i.hide)}}]),Safe.controller("ContractsInquiryCtrl",["$scope","Navigator","AdjustService",function(e,n,t){return e.goToRelativesImport=function(){return n.go("user.contracts-relatives")},e.goToInsurerSelect=function(){return n.go("user.contracts-select"),t.customerPolicyholder()}}]),Safe.controller("ContractsMissingInsurancesCtrl",["$scope","$controller","ContractImport","$stateParams","$ionicLoading","Flash","ErrNotifier","Navigator","Redirector","Product","ContractImportFlowPopup",function(e,n,t,r,i,o,s,a,u,c,l){var d,f,h,g;return n("selectProductsBaseCtrl",{$scope:e}),f=r.insurer_title,i.show(),c.get(r.insurer_id).then(function(n){return e.products=n.data})["catch"](function(e){a.go("user.products",{animation:"back",noBack:!0}),o.show("Cannot load the products.")})["finally"](i.hide),e.updateCanShow=function(){var n;return e.can_show=!_.isEmpty(n=_.filter(e.products,"checked"))&&_.every(n,"insurance_number")},e.submit=function(){if(e.can_show)return l(e.selectedProducts(),d,"missingContracts",f)},h=function(e){return{product_id:e.id,insurance_number:e.insurance_number||null}},g=function(){return _.map(e.selectedProducts(),h)},d=function(){return i.show(),t.addProducts(r.insurer_id,g()).then(function(){return a.go("user.products",{noBack:!0,clearHistory:!0})})["catch"](function(e){return 401===e.status?u.handleInvalidToken():(s.send(e,"Error on adding new insurers"),void o.show("Cannot add a new insurers"))})["finally"](i.hide)}}]),Safe.controller("ContractsRelativesCtrl",["$scope","Navigator","ContractImport","Flash","$ionicLoading","AdjustService","$ionicModal",function(e,n,t,r,i,o,s){var a,u;return e.can_show=!1,a=-1,s.fromTemplateUrl("views/contracts/modal-relativesTerms.html",{scope:e}).then(function(n){return e.terms_modal=n}),e.relatives=[{type:"spouse",name:"Ehepartner"},{type:"life-partner",name:"Lebenspartner"},{type:"father",name:"Vater"},{type:"mother",name:"Mutter"},{type:"other",name:"Sonstige Person"}],u=e.$on("$ionicView.beforeEnter",function(){return o.policyholderOpen()}),e.$on("$destroy",function(){return u()}),e.selectRelative=function(n){if(a=n,_.each(e.relatives,function(e,t){n!==t&&(e.checked=!1)}),e.can_show=_.some(e.relatives,"checked"),e.can_show)return o.policyholderSelect()},e.showTermsModal=function(){return e.terms_modal.show()},e.closeTermsModal=function(){return e.terms_modal.hide()},e.submit=function(){var s;return o.policyholderConfirm(),s=_.get(_.find(e.relatives,"checked"),"type"),0===a||1===a?n.go("user.contracts-relatives-data",{stateParams:{relative_type:s}}):(i.show(),t.saveRelative(s).then(function(){return n.go("user.contracts-relatives-success")})["catch"](function(){r.show("Relative was not added. Try again!")})["finally"](i.hide))}}]),Safe.controller("ContractsRelativesDataCtrl",["$scope","$stateParams","$timeout","$ionicLoading","$ionicPopup","$ionicModal","AdjustService","ErrNotifier","Flash","Navigator","Recommendations","Redirector","Helpers","ContactsImporter","$cordovaKeyboard",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g){var m,p,v,k;return v=n.relative_type,e.can_import_contacts=h.canImportContacts(),e.first_pick_done=!1,e.legal_terms_checked=!0,e.legal_sms_checked=!0,e.can_submit=!0,e.err_messages={name:{required:"Bitte gebe den Namen deines Partners ein (Max Mustermann)",invalid_format:"Bitte gebe Vor- und Nachname deines Partners ein",min_length:"Bitte gebe den korrekten Namen deines Partners ein"},phone:{required:"Bitte gebe die Handynummer deines Partners ein"}},_.isEmpty(v)&&c.go("user.contracts-relatives",{noBack:!0,clearHistory:!0}),e.setForm=function(n){return e.invitationForm=n},e.submitForm=function(n){var t,o;if(e.invitationForm=n,n.$submitted=!0,e.invitationForm.$valid)return o=f.replacePhoneCode(n.userNumber.$modelValue),t={name:n.userName.$modelValue,phonenumber:o,relative_type:v},r.show(),l.add(t).then(function(){return s.invitePartner(),r.hide(),u.show("Wir haben deinen Partner per SMS eingeladen. Sobald er sich die GetSafe App installiert und sich vollständig registriert hat, könnt ihr eure Versicherungen gemeinsam verwalten.")}).then(function(){return c.go("user.products")})["catch"](function(e){return r.hide(),409===e.status?i.alert({title:'Super - dein Partner ist bereits GetSafe-Kunde! Schreibe uns eine kurze Mail an <a href="mailto:kunden@getsafe.de">kunden@getsafe.de</a> und wir verbinden eure Konten.',template:"",okText:"OK",okType:"button-calm"}).then(function(e){return c.go("user.products")}):401===e.status?d.handleInvalidToken():(u.show("There was a problem sending the invitation"),a.send(e,"Error on submitting invitation to user."))})},e.updateCanShow=function(){var n;return n=e.invitationForm,e.can_submit=n.legal_terms_checked.$modelValue&&n.legal_sms_checked.$modelValue},e.submitInvitationForm=function(){if(e.can_submit)return t(function(){return angular.element(document.invitationForm).triggerHandler("submit")})},o.fromTemplateUrl("views/contracts/modal-relativesDataTerms.html",{scope:e}).then(function(n){return e.terms_modal=n}),e.toggleLegalCheckbox=function(){return s.checkboxPartnerInvitor(),e.updateCanShow()},e.toggleSmsCheckbox=function(){return e.updateCanShow()},p=function(n){var t,r;return t=(null!=n?n.name:void 0)||{},r=_.head(null!=n?n.phoneNumbers:void 0)||{value:""},e.userName=t.formatted||_.compact([t.familyName,t.givenName]).join(" ")||"",e.userNumber=r.value.replace(/[^\w\s]/gi,"")},e.pickContactWhenFirst=function(){if(!e.first_pick_done)return e.pickContact()},k=function(){return t(function(){return g.close()},500),i.confirm({title:"Wir helfen dir gerne beim Ausfüllen des Namens und der Handynummer aus deinem Adressbuch.",template:"",okText:"Partner auswählen",okType:"button-calm",cancelText:"Selbst eingeben",cancelType:"button-default"})},e.pickContact=function(){return e.first_pick_done=!0,h.hasPermission()?h.pickContact().then(p)["catch"](m):k().then(function(e){if(e)return h.permissionWasGranted(),h.pickContact().then(p)})},m=function(e){if(e===("undefined"!=typeof ContactError&&null!==ContactError?ContactError.PERMISSION_DENIED_ERROR:void 0))return t(function(){return g.close()},500),i.confirm({title:"Leider kein Zugriff",template:"Um dir beim Einladen deines Partners aus dem Adressbuch zu helfen, benötigen wir Zugriff auf deine Kontakte. Du kannst diesen Zugriff jederzeit unter “Einstellungen > GetSafe” ändern.",okText:"Einstellungen öffnen",okType:"button-calm",cancelText:"Ok",cancelType:"button-default"}).then(function(e){if(e)return ionic.Platform.isAndroid()?cordova.plugins.settings.openSetting("application_details"):cordova.plugins.settings.open()})},e.showTermsModal=function(){return e.terms_modal.show(),s.seePartnerTerms()},e.closeTermsModal=function(){return e.terms_modal.hide()}}]),Safe.controller("ContractsRelativesDataTermsCtrl",["$scope",function(e){return e.groups=[{title:"1. Auftrag",content:"<p>Hiermit erteilt der Nutzer der App der Plan Forward GmbH, Waldhofer Straße 102, 69123 Heidelberg als Anbieterin von GetSafe den Auftrag, dem zuvor ausgewählten oder bestätigten Partner Einsicht in seine bei GetSafe verwalteten Versicherungsverträge und darin enthaltenen Vertragsdaten zu gewähren.</p><p>Zu den verwalteten Verträgen zählen alle derzeitig, aber auch zukünftig über die App verwalteten und von der Plan Forward GmbH als Anbieterin von GetSafe betreuten Versicherungen des Nutzers.</p><p>Die Plan Forward GmbH gewährleistet nicht, dass die Partnerfunktion jederzeit verfügbar und frei von technischen Fehlern ist.</p>"},{title:"2. Einwilligung zur Weitergabe von Daten",content:"<p>Hiermit willigt der Nutzer ein, dass die Plan Forward GmbH als Anbieterin von GetSafe sämtliche über die App einsehbare Daten zu den verwalteten Verträgen, einschließlich personenbezogener Daten, an den ausgewählten Partner in der Form weitergibt, dass dieser die Daten innerhalb seiner App einsehen kann. Zu diesen Daten gehören insbesondere</p><ul><li>Name des/der Versicherungsnehmer</li><li>Versicherungsart (z.B. Hausratsversicherung,, KfZ-Haftpflichtversicherung, etc.)</li><li>Versicherungsnummer</li><li>Zahlungsrhythmus und Beitragshöhe</li><li>Abschlussdatum und Vertragsende</li><li>Zeitpunkt der letzten Aktualisierung.</li></ul><p>Eine Weitergabe zu anderen Zwecken als zur Einsichtnahme erfolgt nicht. Personenbezogene Gesundheitsdaten werden in keinem Fall weitergegeben.</p>"},{title:"3. Widerruf",content:"<p>Der Nutzer kann die Einwilligung in die Weitergabe der Vertragsdaten an seinen Partner jederzeit formlos gegenüber der Plan Forward GmbH als Anbieterin von GetSafe widerrufen. Der Widerruf ist zu richten an die Plan Forward GmbH, Waldhofer Straße 102, 69123 Heidelberg, Tel. 06221/87100-87, Fax-Nr. 06221 - 87100-88 oder per-Email an kunden@getsafe.de. GetSafe kann verlangen, dass ein mündlicher Widerruf in Textform bestätigt wird. Im Falle des Widerrufs wird beiden Partnern keine Einsicht mehr in die bei GetSafe gespeicherten und verwalteten Vertragsdaten des jeweils anderen Nutzers gewährt.</p>"}]}]),Safe.controller("ContractsRelativesSuccessCtrl",["$scope","Navigator",function(e,n){return e.goToProducts=function(){return n.go("user.products")}}]),Safe.controller("ContractsRelativesWelcomeCtrl",["$scope","$stateParams","$ionicLoading","$ionicPopup","$ionicModal","AdjustService","localStorageService","Account","Recommendations","Navigator",function(e,n,t,r,i,o,s,a,u,c){var l,d,f;return e.is_invitation_accepted=!0,e.user=a.current(),e.recommendation=a.recommendationData(),l=n.next_target,i.fromTemplateUrl("views/contracts/modal-relativesTerms.html",{scope:e}).then(function(n){return e.modal_relatives_terms=n}),i.fromTemplateUrl("views/contracts/modal-relativesDataTerms.html",{scope:e}).then(function(n){return e.modal_relatives_data_terms=n}),e.goToNext=function(){return e.is_invitation_accepted?d():r.confirm({title:"Verträge Teilen",template:"Ohne deine Zustimmung kann dein Partner deine Verträge nicht sehen",cancelText:"Zurück",cancelType:"button-default",okText:"Trotzdem weiter",okType:"button-calm"}).then(function(e){if(e)return d()})},d=function(){return t.show(),u.share(e.is_invitation_accepted).success(function(n){var t;return o.partnerInviteeSignup(),t=a.recommendationData(),t.share_state=u.acceptedBoolToState(e.is_invitation_accepted),a.setRecommendationData(t),c.go(l,{noBack:!0,clearHistory:!0})}).error(function(e,n){return 401===n?Redirector.handleInvalidToken():404===n?(a.removeRecommendationData(),c.go(l,{noBack:!0,clearHistory:!0})):c.go(l,{noBack:!0,clearHistory:!0})})["finally"](t.hide)},e.toggleCheckbox=function(){return e.is_invitation_accepted=!e.is_invitation_accepted,f(),o.checkboxPartnerInvitee()},e.showDataTermsModal=function(){return e.modal_relatives_data_terms.show(),o.seePartnerTerms()},e.showTermsModal=function(){return e.modal_relatives_terms.show()},e.closeTermsModal=function(){return e.modal_relatives_terms.hide(),e.modal_relatives_data_terms.hide()},(f=function(){return e.footer_text=e.is_invitation_accepted?"Einverstanden":"Weiter"})()}]),Safe.controller("ContractsSelectConfirmCtrl",["$scope","$stateParams","Navigator","Database","Flash","AdjustService",function(e,n,t,r,i,o){var s;return e.insurances=[],e.insurer_title=n.insurer_title,s=e.$on("$ionicView.beforeEnter",function(){return o.missingContractOpen(n.insurer_id)}),e.$on("$destroy",function(){return s()}),r.get("user_index").then(function(t){var r,i;if(r=null!=t&&null!=(i=t.data)?i.selected_products:void 0)return e.insurances=_.filter(r,["insurer_id",parseInt(n.insurer_id)])})["catch"](function(n){return i.show("Cannot load the insurances!"),e.goToProductsIndex()}),e.goToMissingContracts=function(){return t.go("user.contracts-missing-insurances",{stateParams:{insurer_id:n.insurer_id,insurer_title:n.insurer_title}}),o.missingContractConfirm(n.insurer_id)},e.goToProductsIndex=function(){return t.go("user.products",{animation:"back",noBack:!0}),o.missingContractCancel(n.insurer_id)}}]),Safe.controller("ContractsSelectCtrl",["$scope","$stateParams","Registration","Insurer","InsurerAutocomplete","Navigator","$ionicPopup","$ionicLoading","ErrNotifier","Database","Flash","AdjustService",function(e,n,t,r,i,o,s,a,u,c,l,d){var f,h,g,m,p,v,k,b,w,S,y,C,z,A,P,$,I,E;return z=n,C=0,A=null,h=[],k=[],g=[],m=[],e.insurers=[],e.autocomplete={search_filter:""},e.can_show=!1,I=e.$on("$ionicView.beforeEnter",function(){return d.addProductInsurersList()}),e.$on("$destroy",function(){return I()}),a.show(),r.get().then(function(n){var t;return t="gkv"===z.spec?_(n.data).filter(["is_gkv",!0]).value():n.data,h=t,m=_(t).filter(["user_insurer",!0]).map("id").value(),C=20,e.insurers=_.take(t,C)})["finally"](a.hide),e.search=function(){return i(h,"title",e.autocomplete.search_filter).then(function(n){return C=20,_.isEmpty(e.autocomplete.search_filter)?(g=[],e.insurers=_.take(h,C)):(g=n,k=_.take(g,C),e.insurers=k),E()})},e.selectInsurer=function(n,t){return $(t),_.each(e.insurers,function(e,t){n!==t&&(e.checked=!1)}),e.can_show=_.some(e.insurers,"checked")},e.loadMore=function(){return y(w()?g:h)},e.moreDataAvailable=function(){var n,t,r;return r=w()?[k,g]:[e.insurers,h],t=r[0],n=r[1],p(t,n)},e.submit=function(){var n;if(!_.isNull(A))return n=_.find(e.insurers,function(e){return e.id===A}),!_.includes(m,A)||n.is_gkv?v():c.get("user_index").then(function(e){var n,t,r;return(n=null!=e&&null!=(t=e.data)?t.selected_products:void 0)?(r=_.isEmpty(_.filter(n,["insurer_id",A]))?"user.contracts-missing-insurances":"user.contracts-select-confirm",b(r)):P()})["catch"](P)},P=function(){return l.show("Cannot load the insurances!"),o.go("user.products",{animation:"back",noBack:!0})},p=function(e,n){return e.length<n.length},w=function(){return!_.isEmpty(g)},y=function(n){return e.insurers=_(e.insurers).concat(_.slice(n,C,C+=20)).value(),E(),e.$broadcast("scroll.infiniteScrollComplete")},$=function(e){return A=A===e?null:e},E=function(){return _.each(e.insurers,function(e){A!==e.id&&(e.checked=!1)})},b=function(e){return o.go(e,{stateParams:{insurer_id:A,insurer_title:S()}})},S=function(){return _.get(_.find(h,["id",A]),"title")},f=function(){var n;return a.show(),n=_.find(e.insurers,["id",A]),m.push(A),t.addInsurers(m).then(function(){return A=null,n.is_gkv?o.go("user.gkv-insurance-rate-form",{stateParams:{insurer_id:n.id}}):o.go("user.products"),d.missingContractAdd(),a.hide()})["catch"](function(e){return 401===e.status?Redirector.handleInvalidToken():(l.show("Data update failed"),u.send(e,"Error on adding new insurers"))})["finally"](a.hide)},v=function(){return s.confirm({title:"Versicherung hinzufügen",template:"Willst du Verträge der angegebenen Versicherung mit GetSafe verwalten?",okText:"Nein",okType:"button-default flex-order-reverse",cancelText:"Ja",cancelType:"button-calm"}).then(function(e){if(!e)return f()})}}]),Safe.controller("asdfDocumentCtrl",["$scope","$window","Document",function(e,n,t){return $ionicModal.fromTemplateUrl("views/document/document.html",{scope:e})}]),Safe.controller("DynamicFormQuestionCtrl",["$scope","DynamicForm","Navigator","$stateParams","Chat","$ionicPopup","Redirector","$ionicLoading","UserDataRequest","ChatCache","Consultation","Flash","$timeout",function(e,n,t,r,i,o,s,a,u,c,l,d,f){var h,g,m,p,v,k,b,w,S,y,C,z,A,P;return(e.fields=n.findPage(r.page))||t.go("user.products",{animation:"back",noBack:!0}),g=n.getAnswers(),S=parseInt(n.currentPage(e.fields)),y=n.pageNumber(),b=n.isSeparatorPage(e.fields),b||(e.title=n.title(e.fields)),e.user={answers:n.prefillAnswers(e.fields)},e.show_next_button=_.some(e.fields,function(e){return _.includes(["text_input","multiple_select"],e.type)})||b||!_.isEmpty(e.user.answers),e.$watch("user.answers",function(n){if(_.mergeWith(g,n,function(e,n){return n}),!e.show_next_button)return e.hasAllAnswers()?e.next():void 0},!0),e.next=function(){if(e.hasAllAnswers()||b)return b||n.storeAnswer(e.user.answers),w()},e.previousPage=function(){if(n.previousPage(S),1===S&&!n.getConsultationType())return n.trackLeavingForm()},e.canSubmit=function(){return e.hasAllAnswers()||b},e.hasAllAnswers=function(){return C()===h()},e.canShow=function(e){var t;return t=n.findFieldByName(e),!!t&&(t.templateOptions.show===!0||v(t,g[t.templateOptions.show.field]))},C=function(){return _.filter(e.fields,function(e){return _.isObject(e.templateOptions.show)}).reduce(function(n,t){return e.canShow(t.key)?n+=1:n},_.filter(e.fields,function(e){return e.templateOptions.show===!0}).length)},h=function(){return _(e.user.answers).pickBy(function(n,t){return!_.isNull(n)&&e.canShow(t)}).keys().value().length},v=function(e,n){var t;return t="multiple_select"===e.type?n:[n],_.includes(t,e.templateOptions.show.equal)},p=function(){return n.getConversationId()&&n.getFormHash()?z(P):n.getConversationId()?z(m):t.go("user.dynamicForm-success")},w=function(){var e,r;return r=n.computeOffset(S,k),e=n.next(S+r),_.isUndefined(e)?p():(b||n.pageNumber(y+1),t.go("user.dynamicForm-question",{stateParams:{page:e}}))},m=function(){return f(function(){return i.goToChat(n.getConversationId()),n.clearCache()},500)},P=function(){var e,t,r;return e=btoa(n.getConversationId()),r=n.getProductId(),t=n.getFormHash(),c.get(e).then(function(e){var n;return(n=e.data.consultation)&&l.updateDynamicFormInfo(n.id,r,t,!0),e}).then(function(n){return A(n,t,e)})["finally"](m)},A=function(e,n,t){return e.data.consultation.form_hash_array.push(n),c.save(e.data.messages,e.data.consultation,t)},z=function(e){return a.show(),u.create(n.getProductId(),n.finalAnswers()).then(e)["catch"](function(e){if(401===e.status)return s.handleInvalidToken()})["finally"](a.hide)},k=function(e){return e+1}}]),Safe.controller("DynamicFormQuestionsIntroCtrl",["$scope","Navigator","$stateParams","DynamicForm","$ionicLoading",function(e,n,t,r,i){var o,s;return r.getConsultationType()||n.go("user.insurances-show",{$stateParams:{id:t.id}}),o={optimizeTariff:"Um herauszufinden, ob dein Versicherungstarif der richtige für dich ist, beantworte uns bitte ein paar wenige Fragen.",buyProduct:"Um dir passende Versicherungstarife vorschlagen zu können, beantworte uns bitte ein paar wenige Fragen."},s=1,e.title=t.insurer_title,e.content=o[r.getConsultationType()],e.goToQuestions=function(){return n.go("user.dynamicForm-question",{stateParams:{page:s}})},e.leaveForm=function(){return i.show,r.trackLeavingForm()["catch"](console.log.bind(console))["finally"](i.hide(),n.goBack())}}]),Safe.controller("DynamicFormSuccessCtrl",["$scope","Navigator","DynamicForm","UserDataRequest","$ionicLoading","Redirector","Flash",function(e,n,t,r,i,o,s){var a,u;return a={optimizeTariff:["Wir prüfen deinen Tarif und melden uns bei dir.","Tarif-check"],buyProduct:["Wir suchen dir passende Versicherungstarife raus und melden uns bei dir.","Neues angebot einholen"]},u=a[t.getConsultationType()],e.content=u[0],e.title=u[1],e.confirmAnswers=function(){return i.show(),r.create(t.getProductId(),t.finalAnswers()).then(function(){return t.clearCache(),n.go("user.products")})["catch"](function(e){if(401===e.status)return o.handleInvalidToken()})["finally"](i.hide)}}]),Safe.controller("GkvInsuranceRateFormCtrl",["$scope","$stateParams","Database","Flash","Product","$ionicLoading","Navigator","AdjustService","$filter",function(e,n,t,r,i,o,s,a,u){var c,l,d,f,h,g,m,p;return e.input={amount:null},e.current_monthly=null,e.title="GKV bearbeiten",h=!1,g=null,m="Deine gesetzliche Krankenversicherung wurde erfolgreich bearbeitet!",p=e.$on("$ionicView.enter",function(){return a.enterGkvRequestFromRate()}),t.get("user_index").then(function(t){var r,i;return i=_.find(null!=(r=t.data)?r.selected_products:void 0,function(e){return e.insurer_id===parseInt(n.insurer_id)}),i?(g=i.id,i.monthly&&(e.current_monthly=_.round(parseFloat(i.monthly),2)),h=!0):(e.title="GKV freischalten",m="Deine gesetzliche Krankenversicherung wurde erfolgreich freigeschaltet!")})["catch"](d),d=function(){return r.show("Cannot load the insurances!"),s.go("user.products",{animation:"back",noBack:!0})},e.formValid=function(){return!_.flow([parseFloat,_.isNaN])(e.input.amount)},e.goToUserIncomeForm=function(){return h&&a.editGkvGoToIncome(),s.go("user.gkv-user-income-form",{stateParams:{insurer_id:n.insurer_id}})},c=function(e){return a.editGkvSucceeded(),h?a.editGkvFromRate():a.createGkvFromRate(),o.hide(),r.show(m).then(function(){return s.go("user.insurances-show",{noBack:!0,stateParams:{id:e.data.selected_product_id||g}})})},l=function(){return h?i.updateGkvWithMonthlyRate(g,n.insurer_id,e.input.amount):i.addGkvWithMonthlyRate(n.insurer_id,e.input.amount)},f=function(){r.show("Leider konnte deine Eingabe nicht abgeschickt werden. Bitte versuche es in wenigen Augenblicken noch einmal.")},e.submit=function(){return e.formValid()?(o.show(),l().then(c)["catch"](f)["finally"](o.hide)):r.show("Bitte gebe deinen korrekten monatlichen Beitrag zur gesetzlichen Krankenversicherung ein");
},e.$on("$destroy",p)}]),Safe.controller("GkvUserIncomeFormCtrl",["$scope","$stateParams","Database","Flash","Product","$ionicLoading","Navigator","AdjustService",function(e,n,t,r,i,o,s,a){var u,c,l,d,f,h,g,m,p;return e.input={amount:null},e.choosen_interval="month",e.title="GKV bearbeiten",h=!1,g=null,m="Deine gesetzliche Krankenversicherung wurde erfolgreich bearbeitet!",p=e.$on("$ionicView.enter",function(){return a.enterGkvRequestFromIncome()}),p=e.$on("$ionicView.enter",function(){return a.enterGkvRequestFromRate()}),t.get("user_index").then(function(t){var r,i;return i=_.find(null!=(r=t.data)?r.selected_products:void 0,function(e){return e.insurer_id===parseInt(n.insurer_id)}),i?(g=i.id,e.current_monthly=i.monthly,h=!0):(e.title="GKV freischalten",m="Deine gesetzliche Krankenversicherung wurde erfolgreich freigeschaltet!")})["catch"](l),l=function(){return r.show("Cannot load the insurances!"),s.go("user.products",{animation:"back",noBack:!0})},e.formValid=function(){return!_.flow([parseFloat,_.isNaN])(e.input.amount)},e.changeIncome=function(n){var t;return t=n.target.value.toString().replace(".",""),e.input.amount=t,n.target.value=f(t)},f=function(e){var n;return null!=e&&null!=(n=e.toString())?n.replace(/\B(?=(\d{3})+(?!\d))/,"."):void 0},e.setChoosenInterval=function(n){return e.choosen_interval=n},e.isChoosenInterval=function(n){return e.choosen_interval===n},u=function(e){return a.editGkvSucceeded(),h?a.editGkvFromIncome():a.createGkvFromIncome(),o.hide(),r.show(m).then(function(){return s.go("user.insurances-show",{noBack:!0,stateParams:{id:e.data.selected_product_id||g}})})},c=function(){return h?i.updateGkvWithUserIncome(g,n.insurer_id,e.input.amount,e.choosen_interval):i.addGkvWithUserIncome(n.insurer_id,e.input.amount,e.choosen_interval)},d=function(){r.show("Leider konnte deine Eingabe nicht abgeschickt werden. Bitte versuche es in wenigen Augenblicken noch einmal.")},e.submit=function(){return e.formValid()?(o.show(),c().then(u)["catch"](d)["finally"](o.hide)):r.show("Bitte gebe dein korrektes Bruttogehalt ein.")},e.$on("$destroy",p)}]),Safe.controller("CheckTariffCtrl",["$scope","$rootScope","$stateParams","Database","$ionicModal","$ionicLoading","ConnectionChecker","DynamicForm","AdjustService","Navigator","Chat","OptimizeTariffResolver","Redirector","ChatCache","Consultation","$ionicPopup","$ionicScrollDelegate","ProductRecommender","Product","$q","$timeout",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g,m,p,v,k,b,w){var S,y,C,z,A,P,$,I,E,B,D,V,F,T,G,x,N;return S={single:"Wir prüfen für dich kostenlos, ob dein Versicherungsschutz ausreichend und dein Beitrag angemessen ist.",multiple:"Möchtest du noch andere Tarife auf ausreichenden Schutz und angemessene Beiträge kostenlos prüfen oder neue Tarife hinzufügen?"},$="user_index",F="optimizeTariff",A="buyProduct",N="singleCreation",y="batchCreation",x=[],e.modal_content=S.multiple,e.insurances=[],e.additional_products=[],e.products=[],e.proposed=null,o.show(),r.get($).then(function(n){var r,i;return x=null!=(r=n.data)?r.selected_products:void 0,e.showInsurance=_.find(x,["id",parseInt(t.id)])||_.find(_.flatten(_.map(selected_products_of_partners,"selected_products")),["id",parseInt(t.id)]),null!=(i=e.showInsurance)&&(i.checked=!0),e.insurances=G(),_.isEmpty(e.insurances)&&(e.modal_content=S.single),k.get().then(function(n){return e.products=n.data,g.intentIndex(A).then(function(n){return e.proposed=v(e.products,_.map(x,"product"),n.data)})})})["catch"](console.log.bind(console))["finally"](o.hide),e.track=function(e){return e?u.productToOptimizationChecked():u.productToOtimizationUnchecked()},e.trackProposed=function(e,n){return e?u.optimizationAddRecommended(n):u.optimizationRemoveRecommended(n)},e.submit=function(){return s.isOffline()?s.internetErrorPopup():(c.go("user.insurances-show",{stateParams:{id:e.showInsurance.id}}),z().then(V))},z=function(){var n,t,r,i;return(null!=(r=e.proposed)?r.checked:void 0)&&(n=e.proposed.id),t=C(A,n,e.additional_products),_.isEmpty(t)?_.tap(b.defer(),function(e){return e.resolve()}).promise:(i=1===t.length?(t[0].check_tariff_list=!0,N):y,P(i,t))},V=function(){var n,t,r;return n=e.showInsurance,t=C(F,n.id,e.insurances),r=1===t.length?(t[0].check_tariff_list=!0,N):y,u.optimizationStart(),P(r,t).then(function(e){var t,r,i,o,s,u,l,d,f,h;return r=null!=e&&null!=(o=e.data)&&null!=(s=o.user_product_form)&&null!=(u=s.policyholders)&&null!=(l=u.objects[0])?l.fields:void 0,i=null!=e&&null!=(d=e.data)&&null!=(f=d.user_product_form)?f.form_hash:void 0,t=null!=e&&null!=(h=e.data)?h.conversation_id:void 0,r?(a.cache(r,n.product_id,"optimizeTariff",t,i),c.go("user.dynamicForm-questions-intro",{stateParams:{insurer_title:n.product.title,id:n.id}})):t?E(t):void 0})},e.showAddModal=function(){return u.optimizationClickedBuyProduct(),i.fromTemplateUrl("views/products/modal-add.html",{scope:e}).then(function(n){return e.addModal=n,e.addModal.show()})["catch"](console.log.bind(console))},e.closeAddModal=function(){return e.addModal.hide()},e.toogleDescription=function(e){return e.show_description=!e.show_description},e.selectProduct=function(n,t){return e.proposed.id!==t.id?(e.additional_products.push(t),e.additional_products=_.uniq(e.additional_products)):e.proposed.checked=!0,e.closeAddModal(),p.$getByHandle("tariff_scroll").scrollBottom(!0)},E=function(n){return w(function(){return l.goToChat(n||e.showInsurance.conversation_id),u.chatButtonClick()},500)},T=function(){return _.filter(x,function(n){var t;return n.offer_tariff_optimization===!0&&n.id!==(null!=(t=e.showInsurance)?t.id:void 0)})},G=function(){return _.filter(T(),function(e){return d.canShowConsultationButton(e)})},B=function(){return!!_.find(x,["super_consultation_state","open"])},D=function(e,n){var t;return t={intent:n},B()||(t.mute=!0),n===F?t.selected_product_id=e:t.product_id=e,t},C=function(e,n,t){var r;return r=n?[D(n,e)]:[],_(r).concat(_(t).filter("checked").map(function(n){return D(n.id,e)}).value()).value()},I=function(e){return 401===e?f.handleInvalidToken():m.alert({title:"Fehler",template:"Leider konnte deine Anfrage nicht gesendet werden, bitte versuche uns per E-Mail unter kunden@getsafe.de zu erreichen.",okType:"button-calm"})},P=function(e,t){return o.show(),n.$broadcast("consultation:optimized"),g[e](t).then(function(e){var n;return(n=e.data.consultation)&&h.save([],n,btoa(n.conversation_id)),u.consultationCreate(),e})["catch"](function(e){I(e.status)})["finally"](o.hide)}}]),Safe.controller("InsurancesShowCtrl",["$scope","$rootScope","MyPDFReader","Flash","$stateParams","AdjustService","Navigator","ConsultationFlow","UserIndex","ConnectionChecker","Chat","$ionicPopup","Account","$ionicModal","OptimizeTariffResolver","$ionicLoading","$q","ClaimChatManager",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g,m,p,v){var k,b,w,S,y,C,z,A,P,$,I;return e.damage_reportable=!1,e.optimizeTariffClicked=!1,e.insuranceDetailsVisible=!1,e.claim_chat_text=v.buttonText(e.showInsurance),A=p.defer(),I=n.$on("consultation:optimized",function(){return e.optimizeTariffClicked=!0}),$=e.$on("$ionicView.beforeEnter",function(){var n;return e.loaded=!1,(!b()&&!w()||C())&&e.showInsurance&&parseInt(null!=(n=e.showInsurance)?n.id:void 0)===parseInt(i.id)?y():(e.showInsurance=null,S())}),e.$on("$destroy",function(){return $(),I()}),P=function(n){var t;return z(),e.damage_reportable=null!=n&&null!=(t=n.product)?t.damage_reportable:void 0,e.claim_chat_text=v.buttonText(e.showInsurance)},S=function(){return m.show(),u.index().then(k)["finally"](m.hide)},y=function(){return u.index().then(k)["catch"](function(){return e.loaded=!0,A.resolve(),P(e.showInsurance)})},k=function(n){return e.showInsurance=_.find(n.data.selected_products,["id",parseInt(i.id)])||_.find(_.flatten(_.map(n.data.selected_products_of_partners,"selected_products")),["id",parseInt(i.id)]),A.resolve(),e.loaded=!0,e.showInsurance||s.go("user.products",{noBack:!0}),P(e.showInsurance)},e.readPDF=function(){var n,i,s,a,u;return o.policeShowButton(),n=e.showInsurance,u=(null!=n&&null!=(i=n.merged_document)?i.getfile:void 0)||(null!=n&&null!=(s=n.user_documents)&&null!=(a=s[0])?a.getfile:void 0),u?t.setup().success(function(){return t.downloadAndOpen(u)}):r.show("Leider haben wir für diesen Vertrag noch keine Vertragsunterlagen erhalten.")},e.editGKV=function(){return o.editGkv(),s.go("user.gkv-insurance-rate-form",{stateParams:{insurer_id:e.showInsurance.insurer_id}})},e.formatDate=function(e){return e?e.split("-").reverse().join("."):"n.v."},e.toggleInsuranceDetails=function(){var n,t;if(e.insuranceDetailsVisible=!e.insuranceDetailsVisible,e.insuranceDetailsVisible)return o.productDetails("undefined"!=typeof insurance&&null!==insurance&&null!=(n=insurance.product)?n.id:void 0,"undefined"!=typeof insurance&&null!==insurance&&null!=(t=insurance.product)?t.spec:void 0)},e.dummyPartnerOptimization=function(){return o.partnerOptimization(),d.alert({title:"Aktuell kann nur dein Partner seinen Tarif prüfen",template:"",okType:"button-calm"})},e.showTariff=function(){return A.promise.then(function(){var n;return o.optimizeTariffButton(),s.go("user.insurances-multicheck",{stateParams:{id:null!=(n=e.showInsurance)?n.id:void 0}})})["catch"](console.log.bind(console))},e.reportDamageOnInsurancePage=function(){var n,t;return c.isOffline()?c.internetErrorPopup():(n=v.idForActiveChat(e.showInsurance))?l.goToChat(n):(o.reportDamageButton(),a.run("reportDamage",null!=(t=e.showInsurance)?t.id:void 0).then(function(e){var t;if(n=null!=e&&null!=(t=e.data)?t.conversation_id:void 0)return l.goToChat(n)})["catch"](function(e){return r.show("Bitte versuche es erneut.")}))},e.showConsultationButton=function(){return g.canShowConsultationButton(e.showInsurance,e.optimizeTariffClicked)},e.showChatButton=function(){return g.canShowChatButton(e.showInsurance)},e.canShowWonMessage=function(){return g.canShowWonMessage(e.showInsurance)},e.goToChat=function(n){return l.goToChat(n||e.showInsurance.conversation_id),o.chatButtonClick()},e.productOptimizationPossible=function(){var n;return null!=(n=e.showInsurance)?n.offer_tariff_optimization:void 0},e.isFromPartner=function(){var n;return null!=(n=e.showInsurance)?n.from_partner:void 0},z=function(){var n,t;return e.is_gkv="gkv"===(null!=(n=e.showInsurance)&&null!=(t=n.product)?t.spec:void 0)},b=function(){return"user.dynamicForm-questions-intro"===s.forwardState()},w=function(){return"user.gkv-insurance-rate-form"===s.forwardState()||_.isUndefined(s.forwardState())},C=function(){return"user.products"===s.backState()}}]),Safe.controller("IntroInformationsCtrl",["$scope",function(e){}]),Safe.controller("LoginCheckCodeCtrl",["$scope","$controller",function(e,n){return n("CheckCodeCtrl",{$scope:e}),e.checkCode=function(){return e.checkCodeBase({targetState:"user.products"})}}]),Safe.controller("LoginRequestCodeCtrl",["$scope","$ionicLoading","$ionicModal","Navigator","AdjustService","SettingsService","$timeout","Helpers","ConnectionChecker","Account","Recommendations","AndroidGoButtonHandler",function(e,n,t,r,i,o,s,a,u,c,l,d){var f,h,g;return e.numberErrMessage="Bitte gebe deine Handynummer ein",t.fromTemplateUrl("views/register/modal-terms2.html",{scope:e}).then(function(n){return e.termsModal=n}),t.fromTemplateUrl("views/register/modal-privacy2.html",{scope:e}).then(function(n){return e.privacyModal=n}),g=e.$on("$stateChangeSuccess",function(n,t,r,i,s){if(o.loadSettings(e),e.loginForm&&(e.loginForm.$submitted=!1,"start.intro"===i.name))return o.initSettings(),o.loadSettings(e),e.loginForm.userNumber.$setViewValue(o.get("userNumber")),e.loginForm.userNumber.$render()}),f=e.$on("$ionicView.enter",function(){return i.loginStart()}),h=e.$on("$ionicView.afterEnter",function(){return s(function(){return loginForm.userNumber.focus()},250)}),e.requestCode=function(t){var s;if(e.loginForm=t,t.$submitted=!0,t.$valid)return s=a.replacePhoneCode(t.userNumber.$modelValue),o.set("userNumber",s),n.show(),c.requestCode(s).success(function(e){return localStorage["ls.userNumber"]=s,l.isPending(e.recommendation)&&(console.log("settin data"),console.log(e.recommendation),c.setRecommendationData(e.recommendation)),r.go("start.login-checkCode"),i.loginCodeRequested()}).error(function(e,n){if(0===n&&u.internetErrorPopup(),404===n)return t.userNumber.$error={realNumber:!0}})["finally"](n.hide)},e.submitLoginForm=function(){return s(function(){return angular.element(document.loginForm).triggerHandler("submit")})},e.showTermsModal=function(){return e.termsModal.show()},e.closeTermsModal=function(){return e.termsModal.hide()},e.showPrivacyModal=function(){return e.privacyModal.show()},e.closePrivacyModal=function(){return e.privacyModal.hide()},e.keyDown=function(n){return d.keyDownHandler(n.keyCode,function(){return n.preventDefault(),e.submitLoginForm()})},e.$on("$destroy",function(){return f(),g(),h()})}]),Safe.controller("ProductsConsultationSelect",["$scope","$controller","Product","$ionicLoading","Navigator","Consultation","Flash","ErrNotifier","Redirector","ContractImportFlowPopup","DynamicForm","AdjustService","ChatCache",function(e,n,t,r,i,o,s,a,u,c,l,d,f){var h,g,m,p;return n("selectProductsBaseCtrl",{$scope:e}),g=null,p=e.$on("$ionicView.beforeEnter",function(){return d.insuranceTypeOpen()}),e.$on("$destroy",function(){return p()}),r.show(),t.getPersonalized().then(function(n){return e.products=n.data})["catch"](function(e){i.go("user.products",{animation:"back",noBack:!0}),s.show("Die Produkte konnten nicht geladen werden. Bitte gedulde dich ein wenig und versuche es später erneut.")})["finally"](r.hide),e.selectProduct=function(n,t){if(m(t),_.each(e.products,function(e,t){n!==t&&(e.checked=!1)}),e.updateCanShow(),e.can_show)return d.insuranceTypeSelect()},e.submit=function(){if(e.can_show)return c(e.selectedProducts(),h,"buyProduct")},e.toogleDescription=function(e){return e.show_description=!e.show_description},h=function(){return r.show(),o.buyProduct(g).then(function(n){var t,r,o,s,a,u,c,f,h,m;return d.consultationCreate(),r=null!=n&&null!=(s=n.data)&&null!=(a=s.user_product_form)&&null!=(u=a.policyholders)&&null!=(c=u.objects[0])?c.fields:void 0,o=null!=n&&null!=(f=n.data)&&null!=(h=f.user_product_form)?h.form_hash:void 0,t=null!=n&&null!=(m=n.data)?m.conversation_id:void 0,r?(l.cache(r,g,"buyProduct",t,o),i.go("user.dynamicForm-questions-intro",{stateParams:{insurer_title:_.first(e.selectedProducts()).title,id:g}})):(l.cache(null,null,"buyProduct",t),i.go("user.buy-product-consultation-success"))})["catch"](function(e){switch(e.status){case 401:return u.handleInvalidToken();case 429:s.show("Du hast zu viele Anfragen gestellt. Bitte gedulde dich ein wenig und versuche es später erneut.");break;default:return s.show("Die Anfrage konnte leider nicht erstellt werden. Bitte gedulde dich ein wenig und versuche es später erneut."),a.send(e,"Error on creating a new buyProduct consultation")}})["finally"](r.hide)},m=function(e){return g=g===e?null:e}}]),Safe.controller("ProductsConsultationSuccess",["$scope","Navigator","DynamicForm","Chat",function(e,n,t,r){return e.goToNext=function(){var e;return(e=t.getConversationId())?r.goToChat(e):n.go("user.products"),t.clearCache()}}]),Safe.controller("RegisterCheckCodeCtrl",["$scope","$controller",function(e,n){return n("CheckCodeCtrl",{$scope:e}),e.checkCode=function(){return e.checkCodeBase({targetState:"start.register-guide"})}}]),Safe.controller("ChooseGuessedAddressCtrl",["$scope",function(e){return e.closeModal=function(){return e.guessedAddressesModal.modal.remove(),e.guessedAddressesModal.modal=void 0},e.chooseAddress=function(n){return e.closeModal(),e.fillGuessedPartOfTheAddress(n)}}]),Safe.controller("GuessedAddressCtrl",["$scope","$ionicModal","Api",function(e,n,t){var r,i,o,s,a,u;return i=!1,a=!1,e.potentialAddresses=[],e.guessedAddressesModal={id:"guessed-addresses",url:"/views/register/modal-guessedAddresses.html",name:"guessedAddressesModal",modal:void 0},e.userFinishedFilling=function(){if(!i&&!a)return o()},o=function(){var n;if(n=r())return t.get("guessed_addresses.json",{query:n}).success(function(n){return e.potentialAddresses=n,s(n)})},r=function(){return _.filter([e.user.street,e.user.zip,e.user.place],function(e){return e}).join(", ")},s=function(n){if(0!==n.length)return 1===n.length?e.fillGuessedPartOfTheAddress(n[0]):u()},e.fillGuessedPartOfTheAddress=function(n){return i=!0,_.each(["zip","place"],function(t){if(n[t])return e.user[t]=n[t]})},u=function(){return n.fromTemplateUrl(e.guessedAddressesModal.url,{scope:e}).then(function(n){return e.guessedAddressesModal.modal=n,n.show(),a=!0})}}]),Safe.controller("PrivacyCtrl",["$scope","AdjustService",function(e,n){var t;return e.groups=[{title:"§ 1 Geltungsbereich",content:"<p>Diese Datenschutzerklärung regelt den Umfang der Speicherung und Verarbeitung Ihrer Daten als Nutzer von GetSafe.</p><p>Verantwortliche Anbieterin von GetSafe ist die</p><p>Plan Forward GmbH<br> Bahnhofstr. 9-13<br> D-69115 Heidelberg  </p><p>Telefon: 06221 - 87100-87<br> Telefax: 06221 - 87100-88<br> E-Mail: kunden@getsafe.de</p><p>Geschäftsführer: Christian Wiens, Marius Blaesing<br> Handelsregister: HRB 718171<br> Vermittlerregisternummer: D-4V95-B0VXG-67</p><p>Erlaubnis nach § 34d GewO erteilt durch die zuständige Aufsichtsbehörde:<br> Industrie- und Handelskammer Rhein-Neckar<br> L 1, 2, 68161 Mannheim</p><p>- nachfolgend GetSafe genannt -</p><p>Diese Datenschutzerklärung richtet sich nach den gesetzlichen Bestimmungen des Bundesdaten-schutzgesetzes (BDSG) und dem Telemediengesetz (TMG).</p>"},{title:"§ 2 Unser Grundsatz zum Umgang mit Ihren personenbezogenen Daten",content:"<p>(1) Die Sicherheit Ihrer Daten ist GetSafe sehr wichtig. GetSafe erhebt und verarbeitet Ihre personenbezogenen Daten nur, soweit es gesetzlich erlaubt ist oder Ihre Einwilligung vorliegt. GetSafe beachtet die rechtlichen Vorgaben zum Datenschutz nach dem Bundesdatenschutzgesetz und dem Telemediengesetz.</p><p>(2) Personenbezogene Daten sind Einzelangaben über persönliche und sachliche Verhältnisse des Nutzers von GetSafe. Hierzu zählen u.a. Angaben, die Sie identifizieren, also Ihr Name, Ihre Adresse, Ihre E-Mail-Adresse, Ihre Telefonnummer und Ihr Geburtsdatum.</p><p>(3) GetSafe verkauft, verleiht oder verschenkt Ihre personenbezogenen Daten nicht. Eine Weitergabe an Dritte ohne Ihre Einwilligung erfolgt nur dann, wenn GetSafe gesetzlich dazu verpflichtet wird, etwa bei Vorliegen eines entsprechenden Gerichtsbeschlusses, in einem Fall nach § 13 Abs. 2 TMG oder wenn Sie eingewilligt haben.</p>"},{title:"§ 3 Erhebung, Speicherung und Nutzung Ihrer personenbezogenen Daten",content:"<p>(1) Um die Dienste von GetSafe nutzen zu können, müssen Sie sich mit Ihren personenbezogenen Daten registrieren. Sie geben Ihren Namen, Ihre E-Mail-Adresse, ein Passwort, Ihre Adresse, Ihre Mobilfunknummer sowie Ihr Geburtsdatum an. Diese Angaben sind erforderlich, damit GetSafe Ihnen sicher und zuverlässig Dienste und Informationen zu Ihren Versicherungen anbieten kann. GetSafe gibt diese Daten nur im Umfang der von Ihnen erteilten Maklervollmacht/des von Ihnen erteilten Auftrags an Versicherungen und sonstige Dritte weiter.</p><p>(2) Im Verlauf der Registrierung geben Sie auch an, welche Versicherungspolicen Sie bei den einzelnen Versicherungsunternehmen abgeschlossen haben. GetSafe benötigt diese Informationen, um in Zukunft Ihre Versicherungsverträge verwalten zu können. Diese Informationen werden gespeichert und in der App hinterlegt, um Ihnen unsere Leistungen zur Verfügung stellen zu können.</p><p>(3) Schließlich bevollmächtigen Sie GetSafe am Ende des Registrierungsvorgangs, als Versicherungsmakler Ihre Versicherungen zu verwalten. Sie erteilen uns einen Auftrag, Ihre Mitteilung über die Bevollmächtigung von GetSafe an Ihre Versicherer zu übermitteln. Auch willigen Sie zuvor in diese Datenschutzerklärung ein. Um Ihre Einwilligungen (auch in Zukunft) zu dokumentieren, speichert GetSafe die Informationen zum Hostnamen des Gerätes, mit dem Sie auf die App zugreifen (IP-Adresse), sowie Datum und Uhrzeit. Ihre IP-Adresse sowie Datum und Uhrzeit geben wir zum Nachweis der erteilten Vollmacht bzw. des erteilten Auftrags an Ihre Versicherer sowie sonstige Dritte weiter.</p><p>(4) Nehmen Sie über die App, schriftlich oder telefonisch Kontakt zu GetSafe auf, werden Ihre Angaben zum Zwecke der Bearbeitung Ihres Anliegens sowie für den Fall, dass Anschlussfragen entstehen, gespeichert.</p><p>(5) GetSafe nutzt Ihre Daten im Übrigen zur Erbringung der mit der App angebotenen Dienstleistungen, insbesondere zur Betreuung und Beratung im Rahmen des Versicherungsmaklermandats. GetSafe darf Ihre Daten für die Qualitätskontrolle, zu internen Ausbildungszwecken und zur Verbesserung der angebotenen Dienstleistungen gegenüber Ihnen nutzen.</p>"},{title:"§ 4 Erhebung, Speicherung und Nutzung von personenbezogenen Gesundheitsdaten",content:"<p>GetSafe erhebt, speichert und bearbeitet personenbezogene Gesundheitsdaten nur soweit es für die Betreuung Ihrer Vertragsverhältnisse oder für die Ausführung von Ihren Aufträgen, etwa zum Abschluss von Versicherungen erforderlich ist. Personenbezogene Gesundheitsdaten werden an Versicherungen nur weitergegeben, wenn Sie ausdrücklich oder konkludent zustimmen. Sie können gegenüber GetSafe die Einwilligung zur Speicherung personenbezogener Gesundheitsdaten jederzeit widerrufen.</p>"},{title:"§ 5 Erhebung, Speicherung und Nutzung von nichtpersonenbezogenen Daten",content:"<p>Sie haben die Möglichkeit bei der Benutzung der App Feedback und Fragen an GetSafe zu richten. Diese Möglichkeit besteht bereits bei der Registrierung. Ihr Feedback und Ihre Fragen speichern wir nur, solange dies für eine (auch zukünftige) Bearbeitung erforderlich ist.</p>"},{title:"§ 6 Backup-Dienste Dritter",content:"<p>Auf Speicherungen durch Backup-Dienste Dritter (wie etwa die „iCloud“ von Apple) hat GetSafe keinen Einfluss. Sollten Sie diese Dienste nutzen, gelten die Datenschutzbestimmungen der Dritten.</p>"},{title:"§ 7 Verwendung von Analysetools (u.a. Cookies, adjust, Amazon SNS)",content:"<p>(1) GetSafe verwendet Analyse-Tools in der App, um die Nutzung für Sie zu vereinfachen, die Weiter-entwicklung der App zu ermöglichen und unser Angebot zu verbessern. Auch möchte GetSafe Sie auf Angebote und Leistungen angemessen hinweisen können.</p><p>(2) Zu diesem Zweck verwendet GetSafe Cookies. Das sind Datensätze, die vom Webserver an Ihre GetSafe-App oder Ihren Webbrowser gesandt und dort für einen späteren Abruf gespeichert werden, oftmals aber nach Beendigung Ihrer Sitzung automatisch gelöscht werden (sog. Session-Cookies). Cookies ermöglichen es, auf Ihrem Zugriffsgerät (Smartphone, Tablet, PC, o.ä.) spezifische, auf das Gerät bezogene Informationen zu speichern. Sie dienen zum einem der Benutzerfreundlichkeit der App. Zum anderen ermöglichen Sie die Erfassung statistischer Daten der App-Nutzung, um diese zur Verbesserung des Angebotes analysieren zu können. Diese Datensätze enthalten keine personenbezogenen Daten von Ihnen. GetSafe führt die Datensätze auch nicht mit denen von Ihnen zur Verfügung gestellten personenbezogenen Daten zusammen. Indem Sie dieser Datenschutzerklärung zustimmen, akzeptieren Sie die Verwendung von Cookies. Sie können der Verwendung von Cookies jederzeit widersprechen. Auch können Sie auf den Einsatz der Cookies Einfluss nehmen, wenn Sie per Browser auf die Web-App zugreifen. Die meisten Browser verfügen über Einstellungen, mit denen das Speichern von Cookies eingeschränkt oder komplett verhindert werden kann. Bitte beachten Sie dabei, dass ohne die Verwendung von Cookies möglicherweise nicht alle Funktionen der App zur Verfügung stehen.</p><p>(3) GetSafe verwendet sogenannte Re-Marketing/-Targeting-Tools (zB Google Display Netzwerk), um Angebote im Internet für Sie relevanter zu gestalten. Diese Tools machen es möglich, Sie auch im Internet mittels Werbung auf unsere Leistungen und Angebote hinzuweisen. Die Einblendung dieser Werbemittel auf den Seiten der Partner von GetSafe erfolgt auf Basis von Cookies und der Analyse des Nutzungsverhaltens in der App. Es werden zu keiner Zeit personenbezogene Daten gespeichert und Nutzungsprofile mit personenbezogenen Daten zusammengeführt oder an Partner weitergegeben. Die Werbung erfolgt anonymisiert.</p><p>(4) Die App benutzt auch die Analysetechnologie Adjust der adjust GmbH, Saarbrücker Str. 36, 10405 Berlin. Adjust nutzt für die Analyse Ihre IP-Adressen ausschließlich anonymisiert. Ein Rückschluss auf Sie als natürliche Person ist hierdurch nicht möglich. Die Technologie von Adjust wird nur dazu verwendet, die Funktion und Nutzung der App zu analysieren. Zu diesem Zweck werden anonymisierte Auswertungen und Grafiken zur Anzahl der Besuche, Anzahl der pro Nutzer aufgerufenen Seiten usw. erstellt werden. Die Analysen werden ausschließlich zu Zwecken der eigenen Marktforschung sowie der Verbesserung und bedarfsgerechten Gestaltung der App verwendet. Mit der Nutzung der App und der Zustimmung zu dieser Datenschutzerklärung erklären Sie sich mit der Bearbeitung der durch Adjust anonymisiert erhobenen Daten in der beschriebenen Art und Weise und zu dem benannten Zweck einverstanden. Der Datenerhebung und -speicherung kann jederzeit mit Wirkung für die Zukunft widersprochen werden.</p>"},{title:"§ 8 Push-Nachrichten per Amazon SNS",content:"<p>Wenn Sie die GetSafe-App über ein Push-fähiges Endgerät nutzen, können Sie in die Option „Push-Benachrichtigen“ einwilligen. So können Sie zB Updates zum Status Ihrer Versicherungen und nützliche Hinweise auf Veränderungen in Ihrem Versicherungsschutz von uns per Push-Nachricht erhalten. Für die Bereitstellung dieser Funktion verwendet GetSafe die Technologie von Amazon Simple Notification Service (Amazon SNS), P.O. Box 81226, Seattle, WA 98108, U.S.A. Um Ihnen Push-Nachrichten übermitteln zu können, ist es notwendig, dass GetSafe nicht-personenbezogene Daten (z.B. Hinweis auf eine neue Nachricht im Postfach der GetSafe-App) an den Amazon-Server übermittelt, der diese dann verschlüsselt als Push-Nachricht an Ihre GetSafe-App auf Ihrem Endgerät weiterleitet. Zur sicheren Zuordnung der Nachricht zu Ihrem Endgerät teilt GetSafe Amazon SNS Ihre Device Token ID mit, eine aus der Geräte-ID erzeugte, eindeutige Verbindungsnummer. Die Einwilligung in die Benachrichtigung durch Push-Nachrichten können Sie jederzeit über die Einstellungen Ihres Gerätes ändern.</p>"},{title:"§ 9 Auskunft",content:"<p>Sie können sich jederzeit mit Fragen zu dieser Datenschutzerklärung an GetSafe wenden. GetSafe gibt Ihnen kostenlos Auskunft über die von Ihnen gespeicherten Daten. Sie haben das Recht auf Berichtigung unrichtiger Daten. Sie können GetSafe schriftlich unter Plan Forward GmbH, Bahnhofstr. 9-13, 69115 Heidelberg, per Telefon unter 06221 - 87100-87, per Fax unter 06221 - 87100-88 sowie per E-Mail unter datenschutz@getsafe.de erreichen.</p><p>Diese Datenschutzerklärung können Sie jederzeit im Bereich „Einstellungen“ in der App abrufen. Mit Abschluss Ihrer Registrierung bei GetSafe erhalten Sie eine E-Mail an die von Ihnen angegebene Adresse mit einem Download-Link zu dieser Datenschutzerklärung. Da das Angebot von GetSafe in Zukunft erweitert werden soll, werden eventuell Änderungen an dieser Datenschutzerklärung erforderlich. U.a. zu diesem Zweck kann GetSafe jederzeit diese Datenschutzbestimmungen durch Veröffentlichung der geänderten Bestimmungen in der App ändern.</p>"},{title:"§ 10 Widerruf und Löschung Ihrer Daten",content:"<p>Diese Datenschutzerklärung können Sie jederzeit widerrufen und die Löschung Ihrer Daten verlangen. Hierfür genügt eine Benachrichtigung an Plan Forward GmbH, Bahnhofstr. 9-13, 69115 Heidelberg, per Telefon 06221 - 87100-87, per Fax 06221 - 87100-88 sowie per E-Mail an datenschutz@getsafe.de. Ihre Daten werden gelöscht, sobald das Maklermandat beendet wurde, Ihre Versicherungen zur Verwaltung auf einen anderen Versicherungsmakler übertragen wurden und keine gesetzliche Aufbewahrungsfrist entgegensteht. Besteht eine gesetzliche Aufbewahrungsfrist, werden Ihre Daten bis zum Ablauf dieser Frist für die Verarbeitung gesperrt und anschließend gelöscht.</p>"},{title:"§ 11 Speicherort der Nutzerdaten",content:"<p>Ihre Daten werden in Rechenzentren in Frankreich und Deutschland auf Servern abgelegt, die auch von zahlreichen großen Banken genutzt werden. Diese Rechenzentren sind ISO27001-zertifziert. GetSafe nutzt zudem für alle Verbindungen TLS 1.2 mit 128-Bit SSL.</p><p>Stand: 11.03.2015</p>"}],t=e.$on("$ionicView.beforeEnter",function(){return n.privacyPage()}),e.$on("$destroy",function(){return t()})}]),Safe.controller("RegisterRequestCodeCtrl",["$scope","Navigator","$ionicLoading","Account","$ionicModal","AdjustService","SettingsService","Helpers","$timeout","localStorageService",function(e,n,t,r,i,o,s,a,u,c){var l,d,f;return e.numberErrMessage="Bitte gebe deine Handynummer ein",e.nameFormatErrMessage="Bitte gebe Vor- und Nachname ein",e.fullNameRegexp=/(.)\s(.)/,f=e.$on("$stateChangeSuccess",function(n,t,r,i,o){if(s.loadSettings(e),e.form&&(e.form.$submitted=!1,"start.intro"===i.name))return e.form.userNumber.$setViewValue(s.get("userNumber")),e.form.userNumber.$render(),e.form.userName.$setViewValue(s.get("userName")),e.form.userName.$render()}),l=e.$on("$ionicView.enter",function(){return o.registrationStart()}),d=e.$on("$ionicView.afterEnter",function(){return u(function(){return form.userName.focus()},250)}),e.$on("$destroy",function(){return l(),f()}),i.fromTemplateUrl("views/register/modal-terms2.html",{scope:e}).then(function(n){return e.termsModal=n}),i.fromTemplateUrl("views/register/modal-privacy2.html",{scope:e}).then(function(n){return e.privacyModal=n}),e.requestCode=function(){var i,u;if(e.$apply(function(){return e.form.$submitted=!0}),e.form.$valid)return u=a.replacePhoneCode(e.form.userNumber.$modelValue),i=e.form.userName.$modelValue,s.set("userNumber",u),s.set("userName",i),t.show(),r.requestCode(u,i).success(function(e){return localStorage["ls.userNumber"]=u,_.isNull(e.recommendation)||r.setRecommendationData(e.recommendation),n.go("start.register-checkCode"),o.registerCodeRequested()}).error(function(n,t){if(console.log(n),404===t)return e.form.userNumber.$error={realNumber:!0}})["finally"](t.hide)},e.setForm=function(n){return e.form=n},e.showTermsModal=function(){return e.termsModal.show()},e.closeTermsModal=function(){return e.termsModal.hide()},e.showPrivacyModal=function(){return e.privacyModal.show()},e.closePrivacyModal=function(){return e.privacyModal.hide()},e.$on("$destroy",function(){return d()})}]),Safe.controller("RegisterGuideCtrl",["$scope","Navigator","Account","$ionicPopup","Flash","AdjustService",function(e,n,t,r,i,o){var s,a,u;return a="LÖSCHEN",u=e.$on("$ionicView.beforeEnter",function(){return o.signupCompletionPage()}),e.$on("$destroy",function(){return u()}),e.nextStep=function(){return n.go("start.register-stepInsurers")},s=function(){return t["delete"]()["finally"](function(){return n.go("start.intro",{animation:"back",noBack:!0}),i.show("Deine Anmeldung wurde gelöscht.")})},e.confirmDelete=function(){return r.prompt({title:"Anmeldung löschen",template:"Gebe in das untenstehende Feld "+a+" ein um deine Anmeldung zu löschen.",inputType:"text",inputPlaceholder:"",cssClass:"popup-container",cancelText:"Abbrechen",okText:"Bestätigen",okType:"button-calm"}).then(function(e){if(e&&e.toUpperCase()===a)return s()})}}]),Safe.controller("RegisterStepInsurersCtrl",["$rootScope","AdjustService","Navigator",function(e,n,t){return n.insurersModalEnter(),e.$on("insurers-choosen",function(){return t.go("start.register-stepPersonalData")})}]),Safe.controller("RegisterStepPersonalDataCtrl",["$scope","Registration","$ionicLoading","$cordovaKeyboard","Flash","AdjustService","SettingsService","$timeout","$ionicScrollDelegate","ErrNotifier","$ionicPopup","Navigator","MaturityChecker",function(e,n,t,r,i,o,s,a,u,c,l,d,f){var h,g,m,p,v,k,b,w,S,y,C,z;return S=function(e){var n;return null==e&&(e=""),n=e.split(" "),{vorname:n.shift(),
name:n.join(" ")}},o.personalDataModalEnter(),p=function(e){return e<10?"0"+e:""+e},e.days=_.map(function(){for(b=[],k=1;k<=31;k++)b.push(k);return b}.apply(this),p),e.months=_.map([1,2,3,4,5,6,7,8,9,10,11,12],p),e.years=function(){w=[];for(var e=1920,n=(new Date).getFullYear()-18;1920<=n?e<=n:e>=n;1920<=n?e++:e--)w.push(e);return w}.apply(this),e.full_name_regexp=/(.)\s(.)/,s.loadSettings(e),e.user=s.get("user")||{},v=S(s.get("userName")),(h=e.user).vorname||(h.vorname=v.vorname),(g=e.user).name||(g.name=v.name),e.user.fullname=e.user.vorname+" "+e.user.name,e.isTooltipOpen=!1,m=function(e){var n,t,r,i;return n="invalid_date",t=e["user.birthDayVal"].$$rawModelValue||n,r=e["user.birthMonthVal"].$$rawModelValue||n,i=e["user.birthYearVal"].$$rawModelValue||n,_.some([i,r,t],function(e){return e===n})?n:i+"/"+r+"/"+t},z=function(n){var t,r;return r=_.isDate(n)&&!_.isNaN(Number(n)),t=!r||f(n),e.profileForm["user.birthdate"].$setValidity("date",r),e.profileForm["user.birthdate"].$setValidity("birthdate",t)},y=function(){var s;return window.cordova&&(r.close(),setTimeout(function(){return r.close()},500)),t.show(),s=_.omit(e.user,"fullname","sex","birthDayVal","birthMonthVal","birthYearVal"),n.updateData(s).then(function(){return o.profileDataAdded(),d.go("start.register-stepSignatureExplain")})["catch"](function(n){c.send(n,"UserForm::apiErr-apiRes"),c.send(e.user,"UserForm::apiErr-userData"),i.show("Deine E-Mail Adresse ist bei GetSafe schon in Verwendung. Bitte versuche dich bei diesem Account anzumelden und kontaktiere unseren Service für weitere Hilfe unter kunden@getsafe.de")}).then(t.hide)},C=function(e){var n,t;return(null!=(n=e["user.street"])&&null!=(t=n.$modelValue)?t.indexOf(" "):void 0)>-1},e.submit=function(n){return e.profileForm=n,e.user.birthdate=new Date(m(n)),z(e.user.birthdate),n.$submitted=!0,n.$valid?C(n)?y(n):l.confirm({title:"Adresse korrekt?",template:"Bitte prüfe ob deine Straße und Hausnummer korrekt angegeben sind. <br><br> "+e.user.street+" <br> "+e.user.zip+" "+e.user.place,scope:e,cancelText:"Nein",okText:"Ja",okType:"button-calm"}).then(function(e){if(e)return y(n)}):a(function(){return u.scrollTop(!0)},250)},e.changeNameHandler=function(){var n;if(e.profileForm["user.fullname"].$valid)return n=S(e.user.fullname),e.user.vorname=n.vorname,e.user.name=n.name},e.submitProfileForm=function(e){return a(function(){return angular.element(document.profileForm).triggerHandler("submit")})},e.closeProfileModal=function(){if(e.closeModal(),e.profileForm)return e.profileForm.$submitted=!1},e.setForm=function(n){return e.profileForm=n},e.formValid=function(){var n,t;return t=e.profileForm,n=new Date(m(t)),t.$valid&&f(n)},e.toogleTooltip=function(){return e.isTooltipOpen=!e.isTooltipOpen,e.isTooltipOpen?o.personalDataExplanationOpen():o.personalDataExplanationClose()}}]),Safe.controller("RegisterStepPoaConfirmationCtrl",["$scope","Navigator","Signature","SettingsService",function(e,n,t,r){return e.user=r.get("user")||{},e.date=new Date,e.submit=function(){return t.upload()},e.signatureImgSrc=function(){return t.dataUrl},e.goBack=function(){return n.go("start.register-stepPoa",{animation:"back",noBack:!0})}}]),Safe.controller("RegisterStepPoaCtrl",["$scope","Navigator","SettingsService","AdjustService",function(e,n,t,r){var i;return e.user=t.get("user")||{},e.date=new Date,e.reading_mode=!1,i=e.$on("$ionicView.enter",function(){return r.signaturePOAOpen()}),e.$on("$destroy",function(){return i()}),e.nextStep=function(){return n.go("start.register-stepSignature")},e.toogleReadingMode=function(){return e.reading_mode=!e.reading_mode,r.signaturePOAReadModeToggle()}}]),Safe.controller("RegisterStepPushNotificationCtrl",["$scope","NotificationsManager","Navigator",function(e,n,t){return e.goToProducts=function(){return t.go("user.products",{noBack:!0,clearHistory:!0})},e.requestPermission=function(){return n.requestPermission(),e.goToProducts()}}]),Safe.controller("RegisterStepSignatureCtrl",["$scope","$window","$ionicGesture","$ionicModal","$timeout","$interval","Signature","AdjustService","Flash","Registration","$ionicLoading","$stateParams","Account","$ionicPopup","Navigator",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g){var m,p,v,k,b,w,_,S,y,C,z;return S=null,C=null,z=null,k=null,e.waited1=!1,e.waited2=!1,e.signOnPhoneBrowser=!!d.one_time_token,e.signatureValid=!1,y=e.$on("$ionicView.enter",function(){return a.signaturePadEnter()}),e.$on("$destroy",function(){return y(),i.cancel(C),i.cancel(z),o.cancel(k)}),m=function(){return e.$apply(function(){return e.signatureValid=!S.isEmpty()})},p=null,b=function(){var n;return e.signatureValid=!1,n=angular.element(document).find("body"),p=t.on("dragend",m,n),i(function(){var e,n;return e=document.querySelector("canvas"),n=Math.max(window.devicePixelRatio||1,1),e.width=e.offsetWidth*n,e.height=e.offsetHeight*n,e.getContext("2d").scale(n,n),S=new SignaturePad(e)},150)},w=function(){if(!e.signOnPhoneBrowser)return C=i(function(){return e.waited1=!0},2500),z=i(function(){return e.waited2=!0},4500)},b(),w(),r.fromTemplateUrl("views/common/poa.html",{scope:e}).then(function(n){return e.poaModal=n}),e.requestOneTimeSignature=function(){return l.show(),c.requestOneTimeSignature().then(function(){return u.show("Wir haben dir eine SMS geschickt. <br>Du kannst nun die Unterschrift auf deinem Smartphone tätigen."),v(),!0})["catch"](function(){return u.show("Es gabe in Problem beim Versenden der SMS. <br>Bitte versuche es später nochmal."),!0})["finally"](l.hide)},e.clearCanvas=function(){return a.signaturePadClear(),S.clear(),e.signatureValid=!1},e.validCanvas=function(){return e.signatureValid=!0},e.nextStep=function(){if(e.signatureValid)return s.dataUrl=S.toDataURL(),d.one_time_token?(c.registerOneTimeToken(d.one_time_token),s.upload(!0).then(function(){return _()})):s.upload()},e.previewPDF=function(){return a.signaturePOAOpen(),e.poaModal.show()},e.closePoaModal=function(){return a.signaturePOAClose(),e.poaModal.hide()},e.closeSubmodal=function(){return e.submodal.hide()},v=function(){return o.cancel(k),k=o(function(){return f.status().then(function(e){if(null!=e?e.step_power_of_attorney:void 0)return o.cancel(k),h.alert({title:"Deine Unterschrift wurde erfolgreich übermittelt.",template:"Du kannst nun GetSafe in deinem Desktop Browser oder der App nutzen.",buttons:[{text:"Starten",type:"button-calm",onTap:function(e){return g.go("user.products")}}]})})},2e3)},_=function(){var e,n;return e='<i class="icon ion-social-apple"></i> <span class="signature-btn-label">GetSafe im App Store</span>',n="https://itunes.apple.com/de/app/getsafe-versicherungsmanager/id964426812?mt=8",ionic.Platform.isAndroid()&&(e='<i class="icon android-playstore"></i> <span class="signature-btn-label">GetSafe im Play Store</span>',n="https://play.google.com/store/apps/details?id=de.getsafe.safe&hl=de"),h.alert({title:"Deine Unterschrift wurde erfolgreich übermittelt.",template:"Du kannst nun GetSafe in deinem Desktop Browser oder der App nutzen.",buttons:[{text:e,type:"button-calm",onTap:function(e){return e.preventDefault(),window.open(n)}}]})}}]),Safe.controller("RegisterStepSignatureExplainCtrl",["AdjustService",function(e){return e.signatureExplanationEnter()}]),Safe.controller("TermsCtrl",["$scope","AdjustService",function(e,n){var t;return e.groups=[{title:"1. Geltungsbereich",content:"<p>1.1. Die nachfolgenden Allgemeinen Nutzungs- und Geschäftsbedingungen (AGB) regeln das Verhältnis zwischen Ihnen als Nutzer von GetSafe über unsere App, Website oder andere Kommunikationswege (zB Telefon, E-Mail, Fax). Verantwortliche Anbieterin von GetSafe ist die Plan Forward GmbH (nachfolgend „wir“) als Versicherungsmaklerin. Diese AGB gelten auch für alle zukünftigen Nutzungs- und Geschäftsbeziehungen, die wir mit Ihnen eingehen, soweit Allgemeine Nutzungs- und/oder Geschäftsbedingungen nicht noch einmal ausdrücklich vereinbart werden. </p><p>1.2. Anbieterin der Nutzungsangebote und Vertragspartner für die Erbringung von Leistungen von GetSafe ist die</p><p>Plan Forward GmbH<br> Bahnhofstr. 9-13<br> D-69115 Heidelberg</p><p>Telefon: 06221 - 87100-87<br> Telefax: 06221 - 87100-88<br> E-Mail: kunden@getsafe.de</p><p>Geschäftsführer: Christian Wiens, Marius Blaesing<br> Handelsregister: HRB 718171<br> Vermittlerregisternummer: D-4V95-B0VXG-67</p><p>Erlaubnis nach § 34d GewO erteilt durch die zuständige Aufsichtsbehörde:<br> Industrie- und Handelskammer Rhein-Neckar<br> L 1, 2, 68161 Mannheim</p><p>1.3. GetSafe können Sie nur nutzen, wenn Sie sich hierfür anmelden. Die Anmeldung ist kostenlos. Mit der Anmeldung erkennen Sie den Inhalt dieser AGB ausdrücklich an. Abweichende und/oder ergänzende Vereinbarungen bedürfen unserer ausdrücklichen schriftlichen Zustimmung. </p>"},{title:"2. Über GetSafe",content:"<p>2.1 GetSafe ergänzt die herkömmliche Versicherungsvermittlung um die einfache und unkomplizierte digitale Verwaltung, Betreuung und Optimierung Ihrer Versicherungsangelegenheiten. GetSafe hat das Ziel, Ihnen die Möglichkeit zu bieten, in einer elektronischen Applikation (App) und über die Website GetSafe.de einen passenden Versicherungstarif zu finden, über uns abgeschlossene Versicherungen digital zu verwalten und Ihre bestehenden Versicherungsverträge auf Nutzen und Vollständigkeit zu prüfen. </p><p>2.2. Unser Ziel ist es, GetSafe entsprechend Ihren Bedürfnissen nach einer einfachen, zuverlässigen und umfassenden Beratung und Verwaltung Ihrer Versicherungen kontinuierlich weiterzuentwickeln und Ihnen noch mehr Möglichkeiten für die digitale Verwaltung Ihrer Versicherungen zu schaffen. </p>"},{title:"3. Über uns",content:"<p>3.1. Wir sind als unabhängiger Versicherungsmakler tätig und stehen wirtschaftlich auf Ihrer Seite und vertreten Ihre Interessen.</p><p>3.2. Wir sind als Versicherungsmakler mit Erlaubnis gemäß § 34d Abs. 1 GewO bei der Industrie- und Handelskammer Rhein-Neckar in L 1, 2, 68161 Mannheim zugelassen und mit der Vermittlernummer D-4V95-B0VXG-67 bei Deutscher Industrie- und Handelskammertag (DIHK) e.V., Breite Straße 29, 10178 Berlin registriert. Dies kann überprüft werden per Telefon 0 180/ 50 05 85 0 (14 Cent/Min aus dem dt. Festnetz, höchstens 42 Cent/Min aus Mobilfunknetzen) oder unter www.vermittlerregister.info.</p><p>3.3. Wir besitzen keine direkte oder indirekte Beteiligung von über zehn Prozent an den Stimmrechten oder am Kapital eines Versicherungsunternehmens. Kein Versicherungsunternehmen oder Mutterunternehmen eines Versicherungsunternehmens besitzt eine direkte oder indirekte Beteiligung von über zehn Prozent an Stimmrechten bzw. am Kapital von uns.</p><p>3.4. Wir erbringen unsere Leistungen in Übereinstimmung mit den gesetzlichen Vorschriften, insbesondere mit dem Versicherungsvertragsgesetz (VVG). </p>"},{title:"4. Nutzungsbedingungen",content:"<p>4.1. Nutzungsangebot von GetSafe</p><p>4.1.1. GetSafe bietet Ihnen die Möglichkeit, kostenlos und unverbindlich eine von uns entwickelte Software zu nutzen, die Sie bei der Suche nach einem passenden Versicherungsprodukt unterstützt. Die Software wurde anhand objektiver und anerkannter Bewertungsmaßstäbe für Versicherungsprodukte entwickelt. </p><p>4.1.2. Die Nutzung unserer Software ersetzt eine Beratung nicht. Für eine umfassende Beratung bieten wir Ihnen die Möglichkeit, telefonisch, schriftlich, per E-Mail oder im persönlichen Gespräch Kontakt mit uns aufzunehmen. Sowohl in der App als auch auf der Webseite finden Sie sämtliche Kontaktdaten.</p><p>4.1.3. Soweit wir Ihnen mit der Nutzung unserer Software die Möglichkeit bieten, Ihre bestehenden Versicherungsverträge auf Nutzen und Vollständigkeit zu prüfen, erfolgt dies anhand objektiver, allgemeiner und anerkannter Bewertungsmaßstäbe. Ihre private und berufliche, gegenwärtige und zukünftige Lebenssituation kann von den zugrunde gelegten Maßstäben abweichen. Daher ersetzt die Nutzung unserer Software eine umfassende und individuelle Beratung nicht. Hierzu stehen wir Ihnen telefonisch, schriftlich, per E-Mail oder im persönlichen Gespräch zur Verfügung.</p><p>4.1.4. Die von uns angebotene Nutzung von GetSafe, insbesondere unserer Software, ist ein freiwilliges Angebot und wird ohne Anerkenntnis einer Rechtspflicht erbracht. Wir behalten uns das Recht vor, die Nutzungsmöglichkeit zu begrenzen, zu ändern oder einzustellen. Etwas anderes gilt, soweit wir uns gesondert gegenüber Ihnen zur Leistungserbringung vertraglich verpflichten.</p><p>4.2. Software</p><p>4.2.1. Sie dürfen die Software von GetSafe nur dazu nutzen, um die Verwendung einer unserer Leistungen zu ermöglichen. Sie dürfen keine Teile der GetSafe Software in Ihre eigenen Computerprogramme einbringen oder mit ihnen zusammensetzten, sie verkaufen, vermieten, verleihen, vertreiben oder unterlizenzieren. Sie dürfen GetSafe nicht für illegale Zwecke nutzen.</p><p>4.2.2. Wir dürfen jederzeit die Bereitstellung unserer Software einstellen und Ihre Nutzungsrechte kündigen. Ihre Rechte zur Benutzung von GetSafe enden automatisch, wenn sie diese Nutzungsbestimmungen nicht einhalten.</p><p>4.2.3. Wenn Sie GetSafe nutzen, ist es möglich, dass Sie gleichzeitig auch Dienste Dritter in Anspruch nehmen, wie etwa von Netzanbietern oder eines Mobilfunkanbieters. Insoweit unterliegt die Nutzung den Nutzungsbedingungen der Dritten.</p><p>4.2.4. Um GetSafe stets aktuell zu halten, dürfen wir jederzeit und ohne vorige Ankündigung automatische oder manuelle Updates anbieten.</p><p>4.3. Ihre Mitwirkungsplichten</p><p>4.3.1. Sie verpflichten sich, uns alle Angaben, die für die Anmeldung zu GetSafe und die Nutzung unserer Software erforderlich sind, wahrheitsgemäß anzugeben. Änderungen (u.a. Ihrer Anschrift, Mobilfunknummer oder E-Mail-Adresse) teilen Sie uns unverzüglich mit.</p><p>4.3.2. Sie tragen dafür Sorge, dass Ihr Benutzername und Ihr Passwort für die Benutzung der App Dritten nicht zugängig gemacht werden. Insbesondere dürfen Sie Ihre Zugangsdaten nicht weitergeben, Dritten aufgrund unzureichend geschützter Aufbewahrung Zugriff verschaffen oder ein Passwort verwenden, dass Sie bereits für andere Dienste verwenden.</p><p>4.3.3. Sie verpflichten sich, Ihr Passwort in regelmäßigen Abständen zu ändern und uns Fälle von Missbrauch und unbefugtem Zugriff auf Ihre Zugangsdaten unverzüglich zu melden.</p><p>4.4. Nutzungsdauer</p><p>Sie können sich jederzeit von GetSafe abmelden. Wir behalten uns vor, das Angebot von GetSafe jederzeit zu ändern, zu beschränken oder einzustellen. </p>"},{title:"5. Unsere Leistungen als Versicherungsmakler",content:"<p>5.1. Maklermandat</p><p>5.1.1. Soweit wir für Sie als Versicherungsmakler tätig werden, erfolgt dies nur aufgrund eines gesondert über die App, per E-Mail, schriftlich oder telefonisch von Ihnen erteilten Mandats bzw. einer Vollmacht. </p><p>5.1.2. Das Maklermandat entspricht in Umfang und Reichweite den branchenüblichen Versicherungsmaklermandaten. Umfasst hiervon sind etwa der Auftrag zur Betreuung und Verwaltung sowie der Vermittlung von Verträgen des Privatversicherungsrechts und die Mitwirkung bei der Schadensregulierung im Versicherungsfall.</p><p>5.1.3. Soweit Sie uns als Versicherungsmakler bevollmächtigen, teilen Sie Ihren Versicherern oder sonstigen Dritten mit, dass Sie uns als Versicherungsmakler bevollmächtigt haben. Versicherer und sonstige Dritte in diesem Sinne sind nur diejenigen, denen gegenüber GetSafe als Ihr Versicherungsmakler von Ihnen zur Abgabe und dem Empfang von Willens- und Wissenserklärungen bevollmächtigt wird. Wir übermitteln den Versicherern oder sonstigen Dritten Ihre Erklärung, soweit Sie uns dazu beauftragen. Den Auftrag können Sie uns mittels einer gesonderten Erklärung neben der Erteilung der Maklervollmacht entweder in der App, per E-Mail, schriftlich oder telefonisch erteilen.</p><p>5.1.4. Soweit wir es Ihnen anbieten, haben Sie die Möglichkeit uns ein Maklermandat elektronisch über die App oder per E-Mail zu erteilen. Hierzu unterschreiben Sie elektronisch mit der von Ihnen in Ihren Ausweisdokumenten angegebenen Namensunterschrift, indem Sie Ihren Finger oder Ihre PC-Maus wie mit einem Stift über den Bildschirm oder das Trackpad auf dem vorgesehenen Feld führen. Sollten Sie uns Ihre Unterschrift elektronisch zum Nachweis bei Ihren Versicherern nicht hinterlegen wollen, können Sie uns Ihre Unterschrift im Original postalisch zukommen lassen.</p><p>5.2. Vermittlung von Versicherungsverträgen</p><p>5.2.1. Soweit Sie uns hierzu bevollmächtigt und beauftragt haben, bieten wir Ihnen neben der Betreuung und Verwaltung Ihrer Versicherungsverträge die Möglichkeit, über uns Versicherungsverträge abzuschließen. Unserem Rat legen wir grundsätzlich eine hinreichende Zahl von auf dem Markt angebotenen Versicherungsprodukten und Versicherern zugrunde. Unser Ziel ist es, Ihnen ein Versicherungsprodukt entsprechend Ihren individuellen Bedürfnissen zu vermitteln. Unsere Empfehlungen basieren neben Kriterien wie Preis-Leistungs-Verhältnis, Zuverlässigkeit in der Schadensabwicklung und Zuverlässigkeit auch auf unseren Erfahrungen aus der Betreuung von anderen Versicherungsnehmern.</p><p>5.2.2. Lebens- und Unfallversicherungen können wir Ihnen nur unter der Bedingung vermitteln, dass Sie uns Ihre Identität anhand eines gültigen amtlichen Ausweises, der ein Lichtbild von Ihnen enthält und mit dem die Pass- und Ausweispflicht in Ihrem Heimatland erfüllt wird, nachweisen. Zu diesem Zweck bieten wir Ihnen die Möglichkeit der Durchführung eines anerkannten Identifizierungsverfahrens (zB PostIdent).</p><p>5.2.3. Wir berücksichtigen im Rahmen unserer Tätigkeit für Sie nur Versicherer, die von der Bundesanstalt für Finanzdienstleistungsaufsicht (BaFin) beaufsichtigt werden und Versicherungsbedingungen in deutscher Sprache anbieten. Ausländische Versicherer bleiben grundsätzlich unberücksichtigt. Sofern die Art der Risiken oder die Marktverhältnisse es erlauben, ist es uns freigestellt, Versicherungen auch an im europäischen Dienstleistungsverkehr tätige Versicherer zu vermitteln. Eine rechtliche Verpflichtung hierzu besteht nicht. Einige Versicherungen (insbesondere Direktversicherer) erlauben den Abschluss von Versicherungen über Versicherungsmakler nicht. Produkte dieser Versicherer können wir Ihnen daher nicht anbieten. Wir bemühen uns jedoch darum, Ihnen in Zukunft von diesen Versicherern Produkte vermitteln zu können.</p><p>5.3. Ihre Pflichten als unser Mandant</p><p>5.3.1. Sie verpflichten sich, uns alle Angaben, die für die vertragsgemäße Ausführung unserer Beratungs-, Verwaltungs- und Vermittlungspflichten erforderlich sind, zeitnah und wahrheitsgemäß zur Verfügung zu stellen. Änderungen (u.a. Ihrer Anschrift, Mobilfunknummer oder E-Mail-Adresse) teilen Sie uns unverzüglich mit. </p><p>5.3.2. Ist Ihre Mitwirkung bei der Abgabe von Willenserklärungen gegenüber den Versicherern oder sonstigen Dritten erforderlich zur Erfüllung des von Ihnen erteilten Maklermandats, insbesondere bei der Kündigung, Änderung und Abschluss einer Versicherung, verpflichten Sie sich, auf unsere Aufforderung oder die des Versicherers hin und mit unserer Unterstützung ohne schuldhaftes Zögern die entsprechenden Erklärungen abzugeben. </p><p>5.3.3. Bei Abschluss bestimmter Versicherungsverträge (Lebens- und Unfallversicherungen, vgl. Ziff. 5.2.2.) ist die Feststellung Ihrer Identität anhand von Ausweisdokumenten erforderlich. Wünschen Sie den Abschluss einer Versicherung in diesem Sinne, unterstützen Sie uns bei der Feststellung Ihrer Identität durch Teilnahme an einem anerkannten Identifizierungsverfahren (etwa PostIdent).</p><p>5.4. Keine Kosten</p><p>Wir erbringen unsere Leistungen für Sie kostenfrei. Gewohnheitsrechtlich tragen die Versicherungsunternehmen die Vergütung für unsere Betreuungs- und Vermittlungstätigkeiten in Form von Verwaltungspauschalen oder in der Form der Courtage. Ihnen entstehen keine weiteren Kosten.</p><p>5.5. Beendigung des Maklermandats</p><p>Der Vertrag mit uns kann von beiden Seiten jederzeit gekündigt werden. Von unserer Seite aber nicht zur Unzeit, es sei denn, es liegt ein wichtiger Grund vor.</p>"},{title:"6. Virtuelles Guthabenkonto",content:"<p>6.1. Wir führen für Sie ein virtuelles Guthabenkonto. Die auf diesem Konto wiedergegebenen Werte entsprechen Beträgen in Euro und Euro-Cent. </p><p>6.2. Wir behalten uns vor, Ihnen freiwillig und ohne Anerkenntnis einer Rechtspflicht über Guthabenkarten oder andere Buchungen ein Guthaben auf Ihrem virtuellen Guthabenkonto zu verbuchen. Soweit Sie eine Guthabenkarte erhalten, können Sie das Guthaben über einen Aktivierungscode freischalten. Nähere Hinweise finden sich auf der Guthabenkarte.</p><p>6.3. Das Guthaben können Sie sich nur in bar auszahlen lassen, nachdem Sie einen Versicherungsvertrag über die GetSafe App oder Plan Forward abgeschlossen haben. </p><p>6.4. Der Auszahlungsbetrag ist in der Höhe auf einen Monatsbeitrag (brutto in Euro) der jeweils abgeschlossenen Versicherung pro Kalenderjahr begrenzt. Eine Auszahlung ist frühestens acht Wochen nach dem jeweiligen Vertragsabschluss möglich. </p><p>6.5. Wir behalten uns vor, die Gutschrift von Guthaben auf Ihrem virtuellen Konto an weitere Bedingungen zu knüpfen. Über diese Bedingungen informieren wir Sie, bevor Ihnen ein Guthaben gutgeschrieben wird. </p>"},{title:"7. Elektronische Kommunikation",content:"<p>Mit der Anmeldung bei GetSafe erkennen Sie an, dass wir Ihnen sämtliche Informationen, Mitteilungen oder sonstige Erklärungen auch über die App oder per E-Mail digital übermitteln dürfen. Soweit Sie uns als Versicherungsmakler bevollmächtigen und beauftragen, zählen hierzu auch sämtliche Informationen, Mitteilungen über Dienste oder sonstige Erklärungen, die den Abschluss, die Verwaltung und Abwicklung von Versicherungsverträgen betreffen. Ausgenommen sind lediglich Erklärungen, die der gesetzlichen Schriftform bedürfen und von deren Formerfordernis nicht abgewichen werden kann. </p>"},{title:"8. Unsere Haftung",content:"<p>8.1. Unsere Haftung ist im Falle leicht fahrlässiger Verletzung unserer vertraglichen Pflichten auf einen Betrag von 1,13 Mio. Euro je Schadensfall begrenzt. Wir halten bis zu dieser Summe eine Vermögensschaden-Haftpflichtversicherung vor. Soweit im Einzelfall das Risiko eines höheren Schadens besteht, haben Sie die Möglichkeit, unseren Haftpflichtversicherungsschutz auf eigene Kosten auf eine Versicherungssumme zu erhöhen, die das übernommene Risiko abdeckt. Wir geben Ihnen hierzu eine Empfehlung ab. </p><p>8.2. Wenn die Nutzung von GetSafe und/oder der Maklervertrag beendet wird/werden, verjähren Ansprüche aus diesem Vertrag spätestens nach 5 Jahren. Die Frist beginnt zum Schluss des Jahres, in dem die Nutzung und/oder der Maklervertrag beendet wurden.</p><p>8.3. Für Vermögensschäden, die Ihnen infolge leicht fahrlässiger Verletzung von Nebenpflichten entstehen, haften wir nicht. Nebenpflichten sind Pflichten, die keine Kardinalpflichten sind. Kardinalpflichten sind u.a. die im Gegenseitigkeitsverhältnis zwischen Ihnen uns stehenden Hauptpflichten, etwa die Risikoanalyse, die Untersuchung des Versicherungsmarktes, die Auswahl und Vermittlung des bestmöglichen Deckungsangebots, die laufende Betreuung und Anpassung des abgeschlossenen Vertrages und sowie die Unterstützung des Kunden im Schadenfall.</p><p>8.4. Die in Ziff. 8.1. und 8.2. geregelten Haftungsbeschränkungen und der in Ziff. 8.3. geregelte Haftungsausschluss gelten nicht für Schäden aus der Verletzung des Lebens, des Körpers oder der Gesundheit, die auf einer schuldhaften Pflichtverletzung beruhen. Unberührt bleibt ferner die Haftung für sonstige Schäden wegen grob fahrlässiger oder vorsätzlicher Pflichtverletzung.</p><p>8.5. Wir sind ständig bemüht, die Richtigkeit und Aktualität der von uns in der App und auf GetSafe.de zur Verfügung gestellten Informationen sicherzustellen. Wir machen jedoch keine Zusicherung über die Richtigkeit und Aktualität dieser Inhalte und können daher keine Haftung hierfür übernehmen. Wir behalten uns das Recht vor, Inhalte und Informationen jederzeit zu ändern und aus der App oder von der Internetseite GetSafe.de zu entfernen.</p><p>8.6. Für Fehler Dritter, die für Sie tätig sind, insbesondere für die Richtigkeit von EDV-Berechnungen, für Produktangaben oder Versicherungsbedingungen der Versicherer oder sonstiger Vertragspartner haften wir nicht. Auch für Inhalte von uns in der App oder auf GetSafe.de zur Verfügung gestellten Links Dritter übernehmen wir keine Haftung.</p><p>8.7. Soweit die Haftung von GetSafe ausgeschlossen oder beschränkt ist, gilt dies auch für die persönliche Haftung von Arbeitnehmern, Vertretern und Erfüllungsgehilfen.</p>"},{title:"9. Datenschutzerklärung",content:"<p>Die Erhebung, Speicherung und Verarbeitung Ihrer Daten regelt unsere Datenschutzerklärung. Die Datenschutzerklärung ist abrufbar in den Einstellungen der App und über GetSafe.de. Wir übermitteln Ihnen unsere Datenschutzerklärung jederzeit auf Anfrage per E-Mail, soweit Sie keine Empfangsmöglichkeit für E-Mails besitzen, per Post.</p>"},{title:"10. Inhalte der GetSafe App und der Internetseite GetSafe.de",content:"<p>10.1. Der gesamte Inhalt, der in der App oder auf GetSafe.de enthalten oder durch die App oder GetSafe.de bereitgestellt wird, wie Text, Grafik, Logos, Bilder, Icons, Audio- und Video-Clips, Downloads und Datensammlungen, ist Eigentum von GetSafe oder von Dritten, die Inhalte zuliefern oder auf der Webseite bereitstellen, und ist urheberrechtlich geschützt. Auch der Gesamtbestand der Inhalte der in der App oder auf GetSafe.de enthalten oder durch die App oder auf GetSafe.de bereitgestellt wird, ist ausschließliches Eigentum von GetSafe und ist urheberrechtlich geschützt.</p><p>10.2. Sie dürfen ohne unsere ausdrückliche schriftliche Zustimmung nicht Inhalte von GetSafe systematisch entnehmen und/oder wiederverwenden. Insbesondere dürfen Sie ohne die ausdrückliche schriftliche Zustimmung von GetSafe kein Data Mining, keine Robots oder ähnliche Datensammel- und Extraktionsprogramme einsetzen, um irgendwelche wesentlichen Inhalte von GetSafe zur Wiederverwendung zu entnehmen (gleichgültig ob einmalig oder mehrfach). Sie dürfen ferner ohne die ausdrückliche schriftliche Zustimmung von GetSafe keine eigene Datenbank herstellen und/oder veröffentlichen, die wesentliche Teile der Inhalte von GetSafe beinhaltet.</p>"},{title:"11. Änderung der AGB, Schlussbestimmungen und Gerichtsstand",content:"<p>11.1. Wir sind berechtigt diese Allgemeinen Geschäftsbedingungen für die Zukunft zu ändern, soweit die Änderungen für Sie zumutbar sind. Änderungen der AGB werden Ihnen frühzeitig durch Benachrichtigung in der App, schriftlich, per E-Mail oder in sonstiger geeigneter Weise bekannt gegeben. Die Änderungen gelten als genehmigt und mit Inkrafttreten für das bestehende Vertragsverhältnis als bindend, wenn Sie weder per Nachricht in der App, schriftlich noch per E-Mail gegenüber uns Widerspruch erheben. Auf diese Folge werden Sie bei der Bekanntgabe von Änderungen von uns besonders hingewiesen. Ihr Widerspruch muss innerhalb eines Monats nach Bekanntgabe der Änderungen an uns abgesendet werden. </p><p>11.2. Unsere Allgemeinen Geschäftsbedingungen können Sie jederzeit in der aktuell gültigen Fassung in den Einstellungen Ihrer App und auf GetSafe.de abrufen und sich per E-Mail zuschicken lassen.</p><p>11.3. Sollte eine Vorschrift dieser Bestimmungen unwirksam sein oder durch die Rechtsprechung oder gesetzliche Regelungen unwirksam werden, so hat dies nicht die Unwirksamkeit der gesamten AGB zur Folge. Die nichtige Bestimmung ist durch eine Regelung zu ersetzen, die dem angestrebten Zweck in rechtlich wirksamer Weise wirtschaftlich am ehesten entspricht. Das Gleiche gilt für Regelungslücken.</p><p>11.4. Die Geschäftsbeziehung zwischen Ihnen und GetSafe unterliegt dem Recht der Bundesrepublik Deutschland.</p><p>11.5. Für gegenwärtige oder zukünftige Ansprüche, die sich nicht auf einen Versicherungsvertrag oder die Versicherungsvermittlung beziehen, ist ausschließlicher Gerichtsstand Heidelberg, soweit Sie Kaufmann sind. Haben Sie nach Vertragsschluss Ihren Wohnsitz oder gewöhnlichen Aufenthalt aus der Bundesrepublik Deutschland verlegt oder ist Ihr Wohnsitz oder gewöhnlicher Aufenthalt im Zeitpunkt der Klageerhebung nicht bekannt, ist ausschließlicher Gerichtsstand für alle Ansprüche aus dieser Geschäftsbeziehung ebenfalls Heidelberg.</p><p>Stand: 11.03.2015</p>"}],t=e.$on("$ionicView.beforeEnter",function(){return n.termsPage()}),e.$on("$destroy",function(){return t()})}]),Safe.controller("AboutCtrl",["$scope","AdjustService",function(e,n){var t;return e.groups=[{title:"Über GetSafe",content:"GetSafe ist eine erfrischend einfache und faire Lösung für die eigenen Versicherungen. Hunderten Kunden hilft die App bereits den persönlichen Versicherungsschutz richtig aufzubauen und digital zu verwalten. <br> Dank eines automatisierten Beratungsprozesses können Kunden kostenfrei und bequem von zu Hause, aus über 30.000 Tarifen, die ideale Versicherung finden, papierlos abschließen und über die App verwalten. Unterstützt werden sie dabei von einem freundlichen Team ausgebildeter Versicherungs-Experten, die nicht nach Provision, sondern nach der erreichten Kundenzufriedenheit bezahlt werden."},{title:"Unsere Geschichte",content:"Die Idee zu GetSafe kam uns direkt nach dem Studium als junge Gründer und Geschäftsführer unseres ersten Start-ups. Wir standen vor der nervigen und zugegeben auch etwas langweiligen Frage, wie und wo wir uns versichern sollten. Schnell wurde uns klar, wo bei der Suche nach Versicherungen das größte Problem liegt: es gibt 1000 Angebote, aber keine einzige wirklich kundenfreundliche Lösung. Ein Versicherungsvertreter berät persönlich, bedeutet aber Zeitaufwand, eine hohe Verbindlichkeit und allzu häufig auch falsche Beratung. Vergleichsportale im Internet sind unverbindlich und bieten Transparenz. Als Laie ist es aber so gut wie unmöglich dort eine fundierte Entscheidung zu treffen. So kam uns die Idee eine Lösung zu schaffen, die die Transparenz und den Komfort eines Online-Portals mit der persönlichen Note eines Beraters verbindet. GetSafe ist entstanden. Eine App, für deine Versicherungen."},{title:"Unsere Gründer",content:"<h2>Christian Wiens, CEO</h2> Christian Wiens hat nach seinem Studium des Wirtschaftsingenieurwesens an der TU Darmstadt und mehreren Stationen in der Finanz- und Automobilbranche Gourmeo.com gegründet, das 2013 an die Müller Medien Verlagsgruppe verkauft wurde. Bereits 2012 hat er Plan Forward ins Leben gerufen, ein Projekt, das eine Beratung zu Versicherungen ohne Provisionsanreize entwickelt.<br><br> <h2>Marius Blaesing, CTO</h2> Marius Blaesing ist für die Entwicklung der GetSafe Technologie zuständig. Nach Ende seines Studiums der Physik an der Universität Heidelberg und mehreren Stationen bei Unternehmensberatungen, hat er sich auf IT-Sicherheit und die Entwicklung von Software spezialisiert. Gemeinsam mit Christian hat er 2013 GetSafe gegründet."}],t=e.$on("$ionicView.beforeEnter",function(){return n.aboutPage()}),e.$on("$destroy",function(){return t()})}]),Safe.controller("ContractNumCtrl",["$scope","$stateParams","UserIndex","Navigator","$ionicLoading","Flash","Insurer","$ionicPopup",function(e,n,t,r,i,o,s,a){var u,c;return u=function(){return t.index().success(function(t){var r;return e.insurer=_(t.insurers).map("data").find(["id",parseInt(n.insurer_id)]),e.title=null!=(r=e.insurer)?r.title:void 0}).error(r.goBack)["finally"](i.hide)},c=e.$on("$ionicView.beforeEnter",function(){return i.show(),u()}),e.submit=function(){var t;return e.contractForm.$submitted=!0,e.contractForm.$valid?(t=e.contractForm.contractNum.$$rawModelValue,s.setContractNum({contract_num:t,insurer_id:n.insurer_id}).success(r.goBack).error(function(e,n){var t;return console.log(e),409===n?(t="Du hast diese Versicherungsnummer bereits verwendet. Leider konnte unter dieser Versicherungsnummer kein Vertrag  für dich gefunden werden. Bitte versuche eine andere.",o.show(t).then(r.goBack)):r.goBack()})):o.show("Bitte gebe eine gültige Versicherungsnummer ein.");
},e.setForm=function(n){return e.contractForm=n},e.contractNumUnknown=function(){return a.confirm({title:"Keine Versicherungsnummer",okType:"button-assertive",cssClass:"text-center",cancelText:"Zurück",template:"Der Versuch deine Versicherungsverträge von der genannten Gesellschaft in der App darzustellen wird dann abgebrochen."}).then(function(e){if(e)return s.noContractNum({insurer_id:n.insurer_id}).error(console.log.bind(console))["finally"](r.goBack)})},e.$on("$destroy",function(){return c()})}]),Safe.controller("MenuCtrl",["$rootScope","$scope","Account","Navigator","Flash","$ionicSideMenuDelegate","$timeout","MyPDFReader","AdjustService","localStorageService",function(e,n,t,r,i,o,s,a,u,c){var l;return n.showReviewButton=!ionic.Platform.isIOS(),l=function(){return e.chat_enabled=t.chatEnabled()},n.$on("$stateChangeStart",function(){return s(l,3e3)}),s(l,2e3),l(),n.closeMenu=function(){return o.toggleLeft(!1)},n.toggleMenu=function(){return o.toggleLeft()},n.showMenuButton=function(){return"user.insurances-show"!==r.currentState()},n.logout=function(){return t.logout(),i.show("Du wurdest ausgeloggt."),r.go("start.intro",{animation:"none",noBack:!0,clearHistory:!0}),u.logout()},n.openPoaPDF=function(){return a.setup().success(function(){return a.downloadAndOpen(t.latestPoaUrl())})},n.showLogout=t.hasToken(),n.goToReferAFriend=function(){return u.referAFriendVisit(),r.go("user.refer-a-friend")},n.checkConsultations=function(){return c.set("are_consultations_checked",!0)}}]),Safe.controller("ProductsCtrl",["$scope","$timeout","localStorageService","$ionicModal","$rootScope","Navigator","Account","Redirector","UserIndex","$ionicActionSheet","AdjustService","ConsultationFlow","$ionicHistory","Review","ConnectionChecker","Insurer","$q","$ionicNavBarDelegate",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g,m,p,v){var k,b,w,S,y,C,z,A,P,$,I,E;return e.isBackdropVisible=!1,e.insurances=[],e.insurers=[],e.partners=[],e.plusButtonTrackers={addProduct:"addProductButton",buyProduct:"buyProductButton",consultation:"consultantButtonClick",onAction:"onActionIndex"},z=function(){return e.isBackdropVisible=!!t.get("isBackdropVisible")&&_.isEmpty(e.insurances),angular.element(document.body).toggleClass("backdropVisible",e.isBackdropVisible)},y=null,E=e.$on("reviewModal-hide",function(){return null!=y?y.hide():void 0}),C=p.defer(),r.fromTemplateUrl("views/common/review3.html",{scope:e}).then(function(e){return y=e,C.resolve(!0)}),P=function(){return p.all([s.status(),C.promise]).spread(function(e){if(s.registrationCompleted(e)&&h.showOverlay()&&window.cordova)return null!=y?y.show():void 0})},r.fromTemplateUrl("views/userPanel/modal-insurers.html",{scope:e,animation:"none"}).then(function(n){return e.insurersModal=n}),$=e.$on("$ionicView.enter",function(){return f.clearHistory(),l.productIndex(),e.refresh(),P()}),I=e.$on("$ionicView.leave",function(){return e.hideBackdrop()}),e.$on("insurers-choosen",function(){return e.$broadcast("refresh-insurers-modal"),e.refresh(),n(function(){return e.closeInsurersModal()})}),A=function(){return e.insurersModal.show()},e.call1=function(){return A()},e.hideSubText=!0,k=function(e){return _.every(e,["status","Derzeit nicht unterstützt"])},S=function(e){var n;return!(null!=(n=e.data)?n.is_gkv:void 0)},e.refresh=function(){return u.index().then(function(n){return e.partners=n.data.selected_products_of_partners,e.insurances=n.data.selected_products,e.insurers=_.orderBy(n.data.insurers,S),e.hideSubText=k(n.data.insurers),z()})["catch"](w)["finally"](b)},b=function(){return e.$broadcast("scroll.refreshComplete")},w=function(n,t){return 401===t?a.handleInvalidToken():"missing"===(null!=n?n.reason:void 0)?g.storedDataErrorPopup():(e.insurances=[],e.insurers=[]),b()},e.goToInsurance=function(e){return i.showInsurance=e,o.go("user.insurances-show",{stateParams:{id:e.id}})},e.closeInsurersModal=function(){return e.insurersModal.hide()},e.progressLevelInPercent=function(e){return 100*e.progress.progress_level+"%"},e.progressAlert=function(e){return e.progress.alert},e.insurerTileClicked=function(n){return e.progressAlert(n)?o.go("user.contractNum",{stateParams:{insurer_id:n.data.id}}):e.gkvCanBeAdded(n)?o.go("user.gkv-insurance-rate-form",{stateParams:{insurer_id:n.data.id}}):void 0},e.gkvCanBeAdded=function(e){var n;return(null!=(n=e.data)?n.is_gkv:void 0)&&!e.has_user_product},e.noInsurers=function(){return _.isEmpty(e.insurers)},e.getUserInsuranceTypes=function(){return _(e.insurances).map(function(e){return e.product.spec}).uniq().value()},e.hasGkvInCheck=function(){return!!_.find(e.insurers,function(e){var n;return null!=(n=e.data)?n.is_gkv:void 0})},e.closeReviewModal=function(){return h.showLater(),y.hide()},e.hideBackdrop=function(){return t.remove("isBackdropVisible"),z()},e.intervalName=function(e){var n;return n=m.intervalNamesMapping(e),n?" - "+n:""},document.addEventListener("resume",P),document.addEventListener("resume",e.refresh),e.$on("$destroy",function(){return document.removeEventListener("resume",P),document.removeEventListener("resume",e.refresh),E(),$(),I()})}]),Safe.controller("ReferAFriendCtrl",["$scope","$rootScope","$document","$timeout","$ionicPopup","$ionicActionSheet","$ionicLoading","Recommendations","Flash","Redirector","Navigator","Helpers","ErrNotifier","ContactsImporter","$cordovaKeyboard","AdjustService","telRegex",function(e,n,t,r,i,o,s,a,u,c,l,d,f,h,g,m,p){var v,k,b,w,S,y,C,z,A;return k=null,e.err_messages={name:{required:"Bitte gebe den Namen deines Freundes ein (Max Mustermann)",invalid_format:"Bitte gebe Vor- und Nachname deines Freundes ein",min_length:"Bitte gebe den korrekten Namen deines Freundes ein"},phone:{required:"Bitte gebe die Handynummer deines Freundes ein"}},A=e.$on("$ionicView.beforeEnter",function(){return S()}),e.setForm=function(n){return e.form=n},e.submitManually=function(){return m.referAFriendSubmitManually(),e.submitForm()},e.submitForm=function(){var n;if(e.form.$submitted=!0,e.form.$valid)return n=d.replacePhoneCode(e.form.userNumber.$modelValue),s.show(),a.add({name:e.form.userName.$modelValue,phonenumber:n,relative_type:"friend"}).then(function(){return s.hide(),z()})["catch"](v)},e.pickContact=function(){return m.referAFriendChooseContact(),h.hasPermission()?h.pickContact().then(w)["catch"](b):y().then(function(e){return e?(m.referAFriendContactsAllow(),h.permissionWasGranted(),h.pickContact().then(w)):m.referAFriendContactsDecline()})},b=function(e){if(e===("undefined"!=typeof ContactError&&null!==ContactError?ContactError.PERMISSION_DENIED_ERROR:void 0))return i.confirm({title:"Leider kein Zugriff",template:"Um dir beim Einladen deiner Freunde aus dem Adressbuch zu helfen, benötigen wir Zugriff auf deine Kontakte. Du kannst diesen Zugriff jederzeit unter “Einstellungen > GetSafe” ändern.",okText:"Einstellungen öffnen",okType:"button-calm",cancelText:"Ok",cancelType:"button-default"}).then(function(e){if(e)return ionic.Platform.isAndroid()?cordova.plugins.settings.openSetting("application_details"):cordova.plugins.settings.open()})},e.$on("$destroy",function(){return A()}),y=function(){return r(function(){return g.close()},500),i.confirm({title:"Aus deinem Adressbuch kannst du Freunde einfach und schnell einladen.",template:"",okText:"Adressbuch nutzen",okType:"button-calm",cancelText:"Selbst eingeben",cancelType:"button-default"})},z=function(n){return s.hide(),i.confirm({template:n||"Die Einladung wurde erfolgreich verschickt. Wir freuen uns, wenn du noch viele weitere Freunde einlädst.",scope:e,cancelText:"Nein danke",cancelType:"button-default",okText:"Weitere Freunde einladen",okType:"button-calm"}).then(function(e){return e?S():l.go("user.products")})},S=function(n,t){return null==n&&(n=""),null==t&&(t=""),e.form.userName.$setViewValue(n),e.form.userName.$render(),e.form.userNumber.$setViewValue(t),e.form.userNumber.$render(),e.form.$setPristine()},w=function(e){var n,t,r,i;return i=/[^\d]/gi,n=null!=(r=e.name)?r.formatted:void 0,t=_(e.phoneNumbers).filter(function(e){return p.test(e.value.replace(i,""))}).map(function(e){var n;return n=e.value.replace(i,""),{text:e.value+(" ("+e.type+")"),nr:n}}).value(),C(t,n)},C=function(n,t){var r,i;return r="Bitte wähle die Handynummer aus",i="Zu diesem Freund gibt es keine Handynummer",k=o.show({buttons:n,titleText:n.length>0?r:i,cancelText:"Abbrechen",cancel:function(){},buttonClicked:function(r){return k(),S(t,n[r].nr),e.submitForm()}})},v=function(e){return s.hide(),409===e.status?z("Super - dein Freund ist bereits GetSafe-Kunde!"):401===e.status?c.handleInvalidToken():(u.show("Einladung konnte nicht versendet werden."),f.send(e,"Error on submitting invitation to user."))}}]),Safe.controller("SupportCtrl",["$scope",function(e){}]);
})();
